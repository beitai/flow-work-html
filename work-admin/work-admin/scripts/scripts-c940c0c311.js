!function(){"use strict";angular.module("adminApp",["ui.router","ui.router.state.events","ui.bootstrap","cgNotify","isteven-multi-select","toggle-switch","localytics.directives","perfect_scrollbar","builder.directive","ngCookies"]).run(["$rootScope","notify","$state","$timeout","$uibModal","RestService","contextRoot","restUrl",function(e,n,t,r,a,l,o,i){e.contextRoot=o,e.restUrl=i,e.FlowService=l(o.flowService),e.FormService=l(o.formService),e.IdmService=l(o.identityService),e.loginUser={},e.$state=t,e.progressNum=0,e.cacheParams={},e.getCacheParams=function(n){return angular.isUndefined(n)?e.cacheParams:(angular.isUndefined(e.cacheParams[n])&&(e.cacheParams[n]={}),e.cacheParams[n])},e.clearCacheParams=function(){for(var n in e.cacheParams)e.removeCacheParams(n)},e.removeCacheParams=function(n){angular.isDefined(e.cacheParams[n])&&delete e.cacheParams[n]},e.showProgress=function(n){e.progressNum++,n&&e.showMsg(n)},e.hideProgress=function(n,t){e.progressNum--,n&&(t&&t===!0?e.showErrorMsg(n):e.showMsg(n))},e.showSuccessMsg=function(n){e.showMsg(n,1500,"notify-success")},e.showErrorMsg=function(n){e.showMsg(n,3e3,"notify-error")},e.showMsg=function(e,t,r){n({message:e,duration:t,position:"center",classes:r||"notify-success"})},e.confirmModal=function(e){a.open({templateUrl:"views/common/confirm-modal.html",controller:["$scope","$uibModalInstance",function(n,t){n.modalTitle=angular.copy(e.title),n.cancel=function(){t.dismiss("cancel")},n.ok=function(){t.close(),e.confirm()}}]})},e.editModal=function(n){a.open({templateUrl:"views/common/edit-modal.html",controller:"EditModalController",scope:angular.extend(e.$new(),n)})},e.navModal=function(n){a.open({templateUrl:"views/common/edit-modal.html",controller:"EditModalController",scope:angular.extend(e.$new(),n)})},e.editConfirmModal=function(e){a.open({templateUrl:"views/common/edit-modal.html",controller:["$scope","$uibModalInstance",function(n,t){angular.extend(n,e.property),n.modalTitle=angular.copy(e.title),n.formData=angular.copy(e.formData)||{},n.formUrl=angular.copy(e.formUrl),n.hideFooter=angular.copy(e.hideFooter),n.cancel=function(){t.dismiss("cancel")},n.ok=function(){e.confirm(n.formData,t)}}]})},e.tableModal=function(n){a.open({template:'<div class="modal-body"><table ng-table="tableOptions" class="table table-striped ng-table"></table></div>',controller:"TableModalController",scope:angular.extend(e.$new(),n)})},e.gotoDetail=function(e){t.go(t.current,{id:e})},e.gotoDetail1=function(e,n){t.go(t.current,{id:e,status:n})},e.gotoList=function(e){t.go(t.current,{id:e})},e.multiSelectLang={selectAll:"全选",selectNone:"全部不选",reset:"重置",search:"搜索",nothingSelected:"没有选项被选中"},e.windowExportFile=function(n,t){e.showProgress(),r(function(){t=decodeURI(t);var r=URL.createObjectURL(new Blob([n])),a=document.createElement("a");document.body.appendChild(a),a.href=r,a.download=t,a.target="_blank",a.click(),a.remove(),e.hideProgress()},1e3)}}]).filter("to_trusted",["$sce",function(e){return function(n){return e.trustAsHtml(n)}}]).config(["$qProvider",function(e){e.errorOnUnhandledRejections&&e.errorOnUnhandledRejections(!1)}])}(),function(){"use strict";angular.module("adminApp").constant("contextRoot",{flowService:"http://192.168.249.211:8084",formService:"http://192.168.249.211:8083",identityService:"http://192.168.249.211:8082"}).constant("restUrl",{formTables:"/form-tables",formFields:"/form-fields",formLayouts:"/form-layouts",formDefinitions:"/form-definition",formFieldTypes:"/form-fieldTypes",flowModels:"/models",flowDefinitions:"/process-definitions",flowInstances:"/process-instances",flowTasks:"/tasks",runTasks:"/runTasks",idmAuths:"/auths",idmUsers:"/users",idmGroups:"/groups",idmRoles:"/roles",idmMenus:"/menus",idmTypes:"/moduleTypes",log:"/loggers",tasklog:"/task/logger",token:"/auths/access_token",formDesgin:function(e,n){return"http://192.168.249.211:66/form-modeler/#/design?modelId="+e+"&token="+n},formPreview:function(e){return"http://192.168.249.211:66/form-modeler/#/watch?modelId="+e},flowDesign:function(e,n){return"http://192.168.249.211:66/flow-modeler/#/editor/"+e+"?token="+n}})}(),function(){"use strict";angular.module("adminApp").directive("viewLoad",function(){return{restrict:"A",templateUrl:"views/common/view-load.html",link:function(e,n){$(n).fadeIn(300)}}}).directive("ngPagination",["$compile",function(e){return{restrict:"A",require:"ngModel",scope:{total:"=ngModel",param:"=",changed:"="},link:function(n,t){n.pageList=[5,10,20,50,100,500],n.param=n.param||{},n.param.pageNum=n.param.pageNum||1,n.param.pageSize=n.param.pageSize||10,n.total=n.total||9999999,n.pageNumChange=function(){n.changed()},n.pageSizeChange=function(){n.param.pageNum=1,n.changed()};var r='<div class="row ng-pagination">          <div class="col-xs-12 col-sm-5">        <select class="form-control input-sm" ng-model="param.pageSize" ng-change="pageSizeChange()">          <option ng-repeat="item in pageList" ng-value="item">{{item}} 条/页</option>        </select> 共 {{total}} 条      </div>      <div class="col-xs-12 col-sm-7">        <nav>          <ul uib-pagination ng-change="pageNumChange()" total-items="total"            items-per-page="param.pageSize" ng-model="param.pageNum"            max-size="5" class="pagination-sm" boundary-links="true"            previous-text="&lsaquo;" next-text="&rsaquo;"            first-text="&laquo;" last-text="&raquo;">          </ul>        </nav>      </div>    </div>';t.html("").append(e(r)(n))}}}]).directive("ngIcheck",["$timeout",function(e){return{require:"ngModel",link:function(n,t,r,a){return e(function(){return n.$watch(r.ngModel,function(){$(t).iCheck("update")}),$(t).iCheck({checkboxClass:"icheckbox_square-aero",radioClass:"iradio_square-aero",increaseArea:"20%"}).on("ifChanged",function(e){if("checkbox"===$(t).attr("type")&&r.ngModel&&n.$apply(function(){return a.$setViewValue(e.target.checked)}),"radio"===$(t).attr("type")&&r.ngModel)return n.$apply(function(){return a.$setViewValue(r.value)})})})}}}]).directive("ngTable",["$compile",function(e){return{restrict:"A",link:function(n,t,r){var a=n[r.ngTable],l=a.id;n[l]=n[l]||{},n[l].loadFunction=a.loadFunction||function(){},n[l].queryParams=a.queryParams||{},angular.isUndefined(n[l].queryParams.sortName)&&(n[l].queryParams.sortName=a.sortName||""),angular.isUndefined(n[l].queryParams.sortOrder)&&(n[l].queryParams.sortOrder=a.sortOrder||"desc"),a.isPage===!1?n[l].isPage=!1:n[l].isPage=!0,n[l].sortChange=n[l].sortChange||function(e){n[l].queryParams.sortName!==e?(n[l].queryParams.sortName=e,n[l].queryParams.sortOrder="desc"):"desc"===n[l].queryParams.sortOrder?n[l].queryParams.sortOrder="asc":n[l].queryParams.sortOrder="desc",n[l].loadFunction()};var o="",i="";for(var s in a.colModels){var c="";a.colModels[s].sortable&&(c="ng-class=\"{'sorting':"+l+".queryParams.sortName!='"+a.colModels[s].index+"','sorting_asc':"+l+".queryParams.sortName=='"+a.colModels[s].index+"'&&"+l+".queryParams.sortOrder=='asc','sorting_desc':"+l+".queryParams.sortName=='"+a.colModels[s].index+"'&&"+l+".queryParams.sortOrder=='desc'}\" ng-click=\""+l+".sortChange('"+a.colModels[s].index+"')\"");var d="";a.colModels[s].width&&(d="width="+a.colModels[s].width),o=o+"<th "+d+" "+c+" >"+a.colModels[s].name+"</th>\n",i=a.colModels[s].formatter?i+"<td>"+a.colModels[s].formatter()+"</td>\n":i+"<td>{{row."+a.colModels[s].index+"}}</td>\n"}var u=null;u=n[l].isPage?'<tr ng-repeat="row in '+a.data+'.data ">':'<tr ng-repeat="row in '+a.data+'">';var m="<thead><tr>"+o+"</tr></thead><tbody>"+u+i+"</tr></tbody>";if(t.html("").append(e(m)(n)),n[l].isPage){var p='<div ng-pagination ng-model="'+a.data+'.total" changed="'+l+'.loadFunction" param="'+l+'.queryParams"></div>';t.after(e(p)(n))}}}}]).directive("ngIconpicker",["$timeout",function(e){return{restrict:"A",require:"ngModel",scope:{data:"=ngModel"},link:function(n,t){var r={arrowClass:"btn-info",arrowPrevIconClass:"glyphicon glyphicon-chevron-left",arrowNextIconClass:"glyphicon glyphicon-chevron-right",cols:10,footer:!0,header:!0,iconset:"fontawesome",labelHeader:"第{0}页/共 {1} 页",labelFooter:"{0} - {1} 共 {2} 图标",placement:"bottom",rows:5,search:!0,searchText:"搜索",selectedClass:"btn-success",unselectedClass:""};n.$watch("data",function(e){e&&t.iconpicker("setIcon",e)}),t.on("change",function(t){e(function(){n.data=t.icon})}),t.iconpicker(r)}}}]).directive("colorbox",function(){return{restrict:"A",link:function(e,n){var t={rel:"colorbox",reposition:!0,scalePhotos:!0,scrolling:!1,current:"{current} of {total}",maxWidth:"100%",maxHeight:"100%"};$(n).colorbox(t)}}}).directive("fileInput",function(){return{restrict:"A",link:function(e,n,t){n.fileinput({language:"zh",uploadUrl:"#"}),e.$watch(t.ngDisabled,function(e){e?n.fileinput("disable"):n.fileinput("enable")}),e.$watch(t.fileInput,function(e){angular.isDefined(e)&&(e=angular.copy(e),angular.isDefined(e.allowedFileTypes)&&(e.allowedFileTypes.indexOf("all")>=0||0===e.allowedFileTypes.length)&&(e.allowedFileTypes=null),angular.isDefined(e.allowedFileExtensions)&&(e.allowedFileExtensions.indexOf("all")>=0||0===e.allowedFileExtensions.length)&&(e.allowedFileExtensions=null),angular.isDefined(e.fileuploaded)&&n.on("fileuploaded",e.fileuploaded),n.fileinput("refresh",e))},!0)}}}).directive("datetimePicker",function(){return{restrict:"A",link:function(e,n,t){var r=e.$eval(t.datetimePicker)||{};r.autoclose=r.autoclose||!0,r.todayBtn=r.todayBtn||!0,r.showSeconds=r.showSeconds||!0,r.format=r.format||"yyyy-mm-dd hh:ii:ss",r.language=r.language||"zh-CN",n.datetimepicker(r)}}});var e=function(e,n,t,r){return r.$watch(t,function(t){if(t){var a=e(t)(r);return $(n).html(a)}})};angular.module("builder.directive",[]).directive("fbForm",[function(){return{restrict:"A",require:"ngModel",scope:{data:"=ngModel",forms:"=fbForm"},template:'<div ng-repeat="component in forms.components"><div fb-form-object="component"></div></div>'}}]).directive("fbFormObject",["$compile",function(n){return{restrict:"A",scope:{component:"=fbFormObject"},link:function(t,r,a,l){t.data=t.$parent.data,t.showForm=!0;t.component.properties.overrideId;return e(n,r,"component.template",t)}}}]).directive("fbBuilder",[function(){return{restrict:"A",scope:{forms:"=fbBuilder"},templateUrl:"views/directive/fb-builder.html",controller:"fbBuilderController",link:function(e,n){"root"===e.forms.id&&(n.children(":first").addClass("fb-builder"),angular.element(window).resize())}}}]).directive("fbBuilderObject",["$compile",function(n){return{restrict:"A",scope:{component:"=fbBuilderObject"},link:function(t,r){return e(n,r,"component.template",t)}}}]).directive("fbHtml",["$compile",function(e){return{restrict:"A",link:function(n,t,r){r.summernote||(n.fbHtmlConfig=n.$eval(r.fbHtml)||{},n.fbHtmlConfig.lang=n.fbHtmlConfig.lang||"zh-CN",n.$watch(r.ngDisabled,function(e){e?t.summernote("disable"):t.summernote("enable")}),t.removeAttr("fb-html"),t.attr("summernote",""),t.attr("config","fbHtmlConfig"),e(t)(n))}}}])}(),function(){"use strict";angular.module("adminApp").config(["$httpProvider",function(e){e.interceptors.push("httpInterceptor")}]),angular.module("adminApp").factory("httpInterceptor",["$q","$injector","$window","$rootScope",function(e,n,t,r){var a={request:function(n){return r.showProgress(),n||e.when(n)},response:function(n){return r.hideProgress(),n||e.when(n)},requestError:function(n){return console.info("requestError:"+n),e.reject(n)},responseError:function(n){return console.info("response error- rejection:"+n),401===n.status?(delete t.localStorage.token,r.$state.go("login"),r.hideProgress(n.data.msg,!0)):n.data&&n.data.msg?r.hideProgress(n.data.msg,!0):r.hideProgress("HTTP请求异常",!0),e.reject(n)}};return a}]),angular.module("adminApp").factory("RestService",["$http","$q","$window",function(e,n,t){var r=function(e,n){this.url=e,this.defaultConf=n};return r.prototype={url:null,defaultConf:null,http:function(r,a,l){this.defaultConf&&(this.defaultConf.params&&angular.extend(a.params||{},this.defaultConf.params),this.defaultConf.data&&angular.extend(a.data||{},this.defaultConf.data),this.defaultConf.headers&&angular.extend(a.headers||{},this.defaultConf.headers),this.defaultConf.responseType&&angular.extend(a.responseType||{},this.defaultConf.responseType)),console.info(this.url+(a.urlPath||""));var o=n.defer();return e({method:r,url:this.url+(a.urlPath||""),params:a.params,data:a.data,responseType:a.responseType,headers:angular.extend(a.headers||{},{Token:t.localStorage.token,access_token:t.localStorage.access_token})}).then(function(e){l(e.data),o.resolve(e)},function(e){o.reject(e)})},get:function(e,n){return this.http("GET",e,n)},post:function(e,n){return this.http("POST",e,n)},put:function(e,n){return this.http("PUT",e,n)},"delete":function(e,n){return this.http("DELETE",e,n)}},function(e,n){return function(t){return new r(e+t,n)}}}])}(),function(){"use strict";angular.module("adminApp").config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginController"}).state("main",{url:"",templateUrl:"views/main.html",controller:"MainController","abstract":!0}).state("main.blank",{url:"/blank",template:'<h1 class="text-center"> 页面不存在 </h1>'}).state("main.home",{url:"/home",template:'<h1 class="text-center"> 页面不存在 </h1>'}).state("main.modeler",{url:"/modeler","abstract":!0,template:"<div ui-view></div>"}).state("main.modeler.form",{url:"/form?:id",controller:"ModelerFormController",templateUrl:"views/modeler/form.html"}).state("main.modeler.flow",{url:"/flow/?:id",controller:"ModelerFlowController",templateUrl:"views/modeler/flow.html"}).state("main.idm",{url:"/idm","abstract":!0,template:"<div ui-view></div>"}).state("main.idm.user",{url:"/user",controller:"UserController",templateUrl:"views/idm/user.html"}).state("main.idm.group",{url:"/group/?:id",controller:"GroupController",templateUrl:"views/idm/group.html"}).state("main.idm.type",{url:"/type/?:id",controller:"TypeController",templateUrl:"views/idm/type.html"}).state("main.idm.menu",{url:"/menu/?:id",controller:"MenuController",templateUrl:"views/idm/menu.html"}).state("main.idm.role",{url:"/role",controller:"RoleController",templateUrl:"views/idm/role.html"}).state("main.flow",{url:"/flow","abstract":!0,template:"<div ui-view></div>"}).state("main.flow.definition",{url:"/definition/?:id",controller:"FlowDefinitionController",templateUrl:"views/flow/definition.html"}).state("main.flow.instance",{url:"/instance/?:id",params:{processDefinitionId:null},controller:"FlowInstanceController",templateUrl:"views/flow/instance.html"}).state("main.flow.task",{url:"/task/?:id:status",controller:"FlowTaskController",templateUrl:"views/flow/task.html"}).state("main.flow.form",{url:"/form/?:id",controller:"FlowFormController",templateUrl:"views/flow/form.html"}),n.otherwise("/modeler/flow/")}])}(),function(){"use strict"}(),function(){"use strict";angular.module("adminApp").controller("LoginController",["$scope","$window","$http",function(e,n,t){e.user={},e.user.account="btz",e.user.password="111111",e.authService=e.IdmService(e.restUrl.idmAuths),e.login=function(){e.authService.post({urlPath:"/login",data:e.user},function(t){n.localStorage.token="Bearer "+t.token,n.localStorage.userId=t.id,n.localStorage.userName=t.name,n.localStorage.userAvatar=t.avatar,n.localStorage.access_token=t.access_token,e.$state.go("main.home")})}}])}(),function(){"use strict";angular.module("adminApp").controller("MainController",["$scope","$timeout","$window","$q","$interval","$location","$cookies",function(e,n,t,r,a,l,o){if(e.authService=e.IdmService(e.restUrl.idmAuths),e.loginUser.token=t.localStorage.token,e.loginUser.userName=t.localStorage.userName,e.loginUser.userAvatar=t.localStorage.userAvatar,e.loginUser.userId=t.localStorage.userId,e.menuTitle=null,e.currentState=null,e.logService=e.FlowService(e.restUrl.log),e.controlquery=function(){$(".card-query").slideToggle()},e.queryLog=function(){e.logService.get({urlPath:"/userId/"+e.loginUser.userId},function(n){console.log("日志输出成功"),console.log(n),e.log=n})},e.log=function(n,t){e.editModal({id:"userId/"+n,formUrl:"log.html",title:"日志",key:"log",username:t,hideFooter:!0,service:e.logService})},e.sidebarBackground="black",e.switchSidebarBackground=function(n){e.sidebarBackground=n},e.sidebarActiveColor="primary",e.switchSidebarActiveColor=function(n){e.sidebarActiveColor=n},e.changeNotMobileMenu=function(){n(function(){angular.element(t).width()>991?e.isNotMobileMenu=!1:e.isNotMobileMenu=!0,jQuery(".scroller").css("max-height",angular.element(t).height()-75)})},angular.element(window).bind("resize",function(){e.changeNotMobileMenu()}),e.$on("$viewContentLoaded",function(){e.changeNotMobileMenu()}),e.changeNotMobileMenu(),e.sidebarVisible=!1,e.sidebarToggle=function(){var t=document.getElementsByClassName("navbar-toggle")[0],r=document.getElementsByTagName("body")[0];e.sidebarVisible===!1?(n(function(){t.classList.add("toggled")},500),r.classList.add("nav-open"),e.sidebarVisible=!0):(t.classList.remove("toggled"),e.sidebarVisible=!1,r.classList.remove("nav-open"))},e.signOut=function(){t.localStorage.token=null,t.localStorage.access_token=null,e.$state.go("login")},e.setMenuTitle=function(n){e.currentState=n,e.menuTitle=null;var t=n.split(".");if("main"===t[0]){for(var r in e.menuItems){var a=e.menuItems[r];if(a.path===t[0]+"."+t[1]){if(a.children&&a.children.length>0)for(var l in a.children){var o=a.children[l];if(o.path===n){e.menuTitle=o.name;break}}else e.menuTitle=a.name;break}}null===e.menuTitle&&e.$state.go("main.blank")}},e.userId=l.search().userId,null!=e.userId)var i=e.authService.get({urlPath:"/menus",params:{userId:e.userId||0}},function(n){e.menuItems=n});else var i=e.authService.get({urlPath:"/menus",params:{userId:e.loginUser.userId||0}},function(n){e.menuItems=n});r.all([i]).then(function(){e.setMenuTitle(e.$state.current.name)}),e.$on("$stateChangeSuccess",function(n,t){e.currentState!==t.name&&(e.clearCacheParams(),e.setMenuTitle(t.name))})}])}(),function(){"use strict";angular.module("adminApp").controller("FormModelerController",["$scope","$uibModal","$window","$sce",function(e,n,t,r){e.formModels=e.FormService(e.restUrl.formModels),e.queryFormModels=function(){e.formModels.get({params:e.query},function(n){e.data=n.data,e.dataTotal=n.dataTotal})},e.openModal=function(t){e.id=t,n.open({templateUrl:"form-model-edit.html",controller:"FormModelModalCtrl",scope:e})},e.desginForm=function(n){t.open(e.restUrl.formDesgin(n))},e.previewForm=function(t){e.previewUrl=r.trustAsResourceUrl(e.restUrl.formPreview(t)),n.open({templateUrl:"form-model-watch.html",size:"lg",scope:e})},e.queryFormModels()}]),angular.module("adminApp").controller("FormModelModalCtrl",["$scope","$uibModalInstance",function(e,n){e.formdata={},e.id?(e.modalTitle="修改表单模型",e.formModels.get({urlPath:"/"+e.id},function(n,t){e.formdata=n}),e.ok=function(){e.formModels.put({urlPath:"/"+e.id,data:e.formdata},function(t,r){n.close(),e.showSuccessMsg("修改表单模型成功"),e.queryFormModels()})}):(e.modalTitle="添加表单模型",e.ok=function(){e.formModels.post({data:e.formdata},function(t,r){n.close(),e.showSuccessMsg("添加表单模型成功"),e.queryFormModels()})}),e.cancel=function(){n.dismiss("cancel")}}])}(),function(){"use strict";angular.module("adminApp").controller("EditModalController",["$scope","$uibModalInstance",function(e,n){e.categoryService=e.IdmService(e.restUrl.idmTypes),e.category=0,e.typeService=e.FormService(e.restUrl.formFieldTypes),e.formData=e.formData||{},e.definitionService=e.FlowService(e.restUrl.flowDefinitions),e.instanceService=e.FlowService(e.restUrl.flowInstances),e.id?(e.modalTitle="修改"+e.title,e.service.get({urlPath:"/"+e.id},function(n){e.formData=angular.extend(e.formData,n)}),e.ok=function(){e.service.put({urlPath:"/"+e.id,data:e.formData},function(){n.close(),e.showSuccessMsg(e.modalTitle+"成功"),e.complete()})}):(e.modalTitle="添加"+e.title,e.ok=function(){e.service.post({data:e.formData},function(){n.close(),e.showSuccessMsg(e.modalTitle+"成功"),e.complete()})}),"log"==e.key&&(console.log("日记输出"),e.modalTitle=e.title,e.service.get({urlPath:"/"+e.id},function(n){console.log(e),e.log=n,e.name=e.username})),"category"==e.key&&(e.toggle=!1,e.toggle1=!1,e.querycategory=function(){e.categoryService.get({urlPath:"/parentId/1"},function(n){e.category=n})},e.querycategory(),e.aa=function(n){e.toggle=!0},e.bb=function(){$(document).mousedown(function(n){"groupColumn"!=n.target.id&&(e.toggle=!1)})},e.cc=function(n){null!=n?(e.toggle1=!0,e.category=null):(e.toggle=!0,e.toggle1=!1,e.formData.category=n,e.categoryService.get({urlPath:"/parentId/1",params:e.formData},function(n){e.category=n}))},e.selectGroup=function(n){e.formData.category=n,e.toggle=!1},e.deleteGroup=function(n){e.confirmModal({title:"确认删除分类",confirm:function(){e.categoryService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除分类成功"),e.querycategory(),e.formData.category=null})}})},e.ok=function(){e.service.post({data:e.formData},function(){n.close(),e.showSuccessMsg(e.modalTitle+"成功"),e.complete()}),e.id||(e.formData.parentId=1,e.formData.moduleType=e.formData.category,e.categoryService.post({data:e.formData},function(){}))}),"category1"==e.key&&(e.toggle=!1,e.toggle1=!1,e.querycategory=function(){e.categoryService.get({urlPath:"/parentId/2"},function(n){e.category=n})},e.querycategory(),e.aa=function(n){e.toggle=!0},e.bb=function(){$(document).mousedown(function(n){"groupColumn"!=n.target.id&&(e.toggle=!1)})},e.cc=function(n){null!=n?(e.toggle1=!0,e.category=null):(e.toggle=!0,e.toggle1=!1,e.formData.category=n,e.categoryService.get({urlPath:"/parentId/2",params:e.formData},function(n){e.category=n}))},e.selectGroup=function(n){e.formData.category=n,e.toggle=!1},e.deleteGroup=function(n){e.confirmModal({title:"确认删除分类",confirm:function(){e.categoryService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除分类成功"),e.querycategory(),e.formData.category=null})}})},e.ok=function(){e.service.post({data:e.formData},function(){n.close(),e.showSuccessMsg(e.modalTitle+"成功"),e.complete()}),e.id||(e.formData.parentId=2,e.formData.moduleType=e.formData.category,e.categoryService.post({data:e.formData},function(){}))}),"types"==e.key&&(e.toggle=!1,e.toggle1=!1,e.querytypes=function(){e.typeService.get({},function(n){e.types=n.data,e.count=n.total})},e.querytypes(),e.aa=function(){e.toggle=!0},e.bb=function(){$(document).mousedown(function(n){"groupColumn"!=n.target.id&&(e.toggle=!1)})},e.cc=function(n){null!=n?(e.toggle1=!0,e.types=null):(e.toggle=!0,e.toggle1=!1,e.formData.type=n,e.typeService.get({params:e.formData},function(n){e.types=n.data,e.count=n.total}))},e.selectGroup=function(n){e.formData.type=n,e.toggle=!1},e.deleteGroup=function(n){e.confirmModal({title:"确认删除分类",confirm:function(){e.typeService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除分类成功"),e.querytypes(),e.formData.type=null})}})},e.ok=function(){e.service.post({data:e.formData},function(){n.close(),e.showSuccessMsg(e.modalTitle+"成功"),e.complete()}),e.id||(e.formData1={},e.formData1.name=e.formData.type,e.typeService.post({data:e.formData1},function(){}))}),"nav"==e.key&&(e.modalTitle=e.title,e.service.get({urlPath:"/"+e.id},function(n){e.nav=n}),e.b=function(){$(".AreaCenter").css({width:"70%"}),$(".AreaRight").hide()},e.bb=function(n){e.category=n,$(".AreaCenter").css({width:"30%"}),$(".AreaRight").show(),e.queryParams={},e.queryParams.name=null,e.queryParams.category=n,e.definitionService.get({params:e.queryParams},function(n){e.queryResult=n.data,e.count=n.total})},e.queryDefinition=function(){e.definitionService.get({},function(n){e.definitions=n.data,e.count=n.total})},e.queryParams={},e.queryTask=function(){$(".AreaCenter").css({width:"30%"}),$(".AreaRight").show(),e.userService=e.IdmService(e.restUrl.idmUsers),e.queryParams.category=null,e.definitionService.get({params:e.queryParams},function(n){e.queryResult=n.data,e.count=n.total,e.category=n.data[0].category,null==e.queryParams.name&&(e.category=null)})},e.queryDefinition(),e.createInstance1=function(t,r){e.editConfirmModal({formUrl:"definition-start.html",title:"启动流程实例",formData:{name:t,processDefinitionId:r},confirm:function(t,r){e.instanceService.post({data:t},function(){e.showSuccessMsg("启动流程实例成功"),r.close(),e.$state.go("main.flow.task"),n.dismiss("cancel")})}})}),e.cancel=function(){n.dismiss("cancel")}}])}(),function(){"use strict";angular.module("adminApp").controller("TableModalController",["$scope",function(e){e.queryResult=[],e.colModels=e.colModels||[],e.colModels.push({name:"操作",index:"",formatter:function(){return'<button type="button" class="btn btn-danger btn-xs" ng-click=deleteRow(row.id)><i class="fa fa-trash-o"></i>&nbsp;删除关联</button>'}}),e.tableOptions={id:"tableModal",data:"queryResult",isPage:!1,colModels:e.colModels},e.query=function(){e.service.get({},function(n){e.queryResult=n})},e.deleteRow=function(n){e.service["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除关联成功"),e.query()})},e.query()}])}(),function(){"use strict";angular.module("adminApp").controller("FlowDefinitionController",["$scope","$stateParams","$q","$timeout",function(e,n,t,r){e.definitionService=e.FlowService(e.restUrl.flowDefinitions),e.instanceService=e.FlowService(e.restUrl.flowInstances),e.userService=e.IdmService(e.restUrl.idmUsers),e.groupService=e.IdmService(e.restUrl.idmGroups),e.detailId=n.id||"0",e.queryParams="0"===e.detailId?e.getCacheParams():{},e.queryResult={},e.selectedItem=null,e.categoryService=e.IdmService(e.restUrl.idmTypes),e.category=null,e.taskService=e.FlowService(e.restUrl.flowTasks),e.queryDetail=function(n){e.definitionService.get({urlPath:"/"+n},function(n){e.selectedItem=n})},e.queryDefinition=function(){e.definitionService.get({params:e.queryParams},function(n){e.queryResult=n,console.log(e.queryResult)}),e.categoryService.get({urlPath:"/parentId/1"},function(n){e.category=n})},e.deleteDefinition=function(n){e.editConfirmModal({formUrl:"definition-delete.html",title:"删除流程定义",formData:{name:n.name},confirm:function(t,r){e.definitionService["delete"]({urlPath:"/"+n.id,params:{cascade:t.cascade}},function(){e.showSuccessMsg("删除流程定义成功"),r.close(),e.gotoList()})}})},e.createInstance=function(n){e.editConfirmModal({formUrl:"definition-start.html",title:"启动流程实例",formData:{name:n.name,processDefinitionId:n.id},confirm:function(n,t){e.instanceService.post({data:n},function(){e.showSuccessMsg("启动流程实例成功"),t.close()})}})},e.nav=function(){e.navModal({id:"parentId/1",formUrl:"nav.html",title:"流程开启",key:"nav",hideFooter:!0,service:e.categoryService})},e.importDefinition=function(){e.editConfirmModal({formUrl:"definition-import.html",title:"导入流程",hideFooter:!0,property:{fileOptions:{fileuploaded:function(){e.queryDefinition()},uploadUrl:e.definitionService.url+"/import?token="+e.loginUser.token,allowedFileExtensions:["bpmn","bpmn20.xml","bar","zip"]}}})},e.exportDefinition=function(n){e.definitionService.get({urlPath:"/"+n.id+"/xml"},function(t){e.windowExportFile(t,n.name+"-v"+n.version+".bpmn20.xml")})},e.getImageUrl=function(n){return angular.isDefined(n)?e.definitionService.url+"/"+n+"/image.png?token="+e.loginUser.token:null},e.switchStaus=function(n,t){var r=t?"激活流程":"挂起流程",a=t?"activate":"suspend";e.editConfirmModal({formUrl:"definition-status-edit.html",title:r,formData:n,confirm:function(t,l){e.definitionService.put({urlPath:"/"+n.id+"/"+a,data:t},function(){e.showSuccessMsg(r+"成功"),"0"!==e.detailId?e.queryDetail(n.id):e.queryDefinition(),l.close()})}})},e.tableOptions={id:"definition",data:"queryResult",colModels:[{name:"流程ID",index:"id",sortable:!0,width:"10%"},{name:"流程名称",index:"name",sortable:!0,width:"10%"},{name:"标识",index:"key",sortable:!0,width:"10%"},{name:"版本号",index:"version",sortable:!0,width:"10%"},{name:"状态",index:"suspended",width:"11%",formatter:function(){return'<toggle-switch ng-init="switch=(!row.suspended)" ng-model="switch" class="switch-small switch-info" on-label="激活" off-label="挂起" on-change="switchStaus(row,switch)"></toggle-switch>'}},{name:"备注",index:"description",width:"12%"},{name:"操作",index:"",width:"10%",formatter:function(){return'<button type="button" class="btn btn-info btn-xs" ng-click=gotoDetail(row.id)><i class="fa fa-eye"></i>&nbsp;明细</button>'}}],loadFunction:e.queryDefinition,queryParams:e.queryParams,sortName:"name",sortOrder:"asc"},e.queryIdentity=function(n){e.definitionService.get({urlPath:"/"+n+"/identity-links"},function(n){e.queryIdentityResult=n})},e.deleteIdentity=function(n,t,r){e.definitionService["delete"]({urlPath:"/"+n+"/identity-links/"+t+"/"+r},function(){e.showSuccessMsg("删除授权成功"),e.queryIdentity(n)})},e.createIdentity=function(n){var r={},a=e.userService.get({params:{status:0}},function(e){r.users=e.data}),l=e.userService.get({urlPath:"/groups"},function(e){r.groups=e});t.all([a,l]).then(function(){e.editConfirmModal({formUrl:"definition-identity-create.html",title:"添加授权",formData:r,confirm:function(t,r){var a={type:t.type};"user"===t.type?a.identityId=t.user[0].id:a.identityId=t.group[0].id,e.definitionService.post({urlPath:"/"+n+"/identity-links",data:a},function(){e.showSuccessMsg("添加授权成功"),e.queryIdentity(n),r.close()})}})})},e.identityTableOptions={id:"definitionidentity",data:"queryIdentityResult",isPage:!1,colModels:[{name:"ID",index:"identityId"},{name:"名称",index:"identityName"},{name:"类型",index:"type",formatter:function(){return'<span>{{row.type=="user"?"用户":"群组"}}</span>'}},{name:"操作",index:"",formatter:function(){return'<button type="button" class="btn btn-danger btn-xs" ng-click=deleteIdentity(selectedItem.id,row.type,row.identityId)><i class="fa fa-trash-o"></i>&nbsp;删除</button>'}}]},e.queryJob=function(n){e.definitionService.get({urlPath:"/"+n+"/jobs"},function(n){e.queryJobResult=n})},e.deleteJob=function(n,t){e.definitionService["delete"]({urlPath:"/"+n+"/jobs/"+t},function(){e.showSuccessMsg("删除定时任务成功"),e.queryJob(n)})},e.jobTableOptions={id:"definitionJob",data:"queryJobResult",isPage:!1,colModels:[{name:"类型",index:"jobHandlerType"},{name:"执行时间",index:"duedate"},{name:"创建时间",index:"createTime"},{name:"操作",index:"",formatter:function(){return'<button type="button" class="btn btn-danger btn-xs" ng-click=deleteJob(selectedItem.id,row.id)><i class="fa fa-trash-o"></i>&nbsp;删除</button>'}}]},e.queryProcess=function(n){e.instanceService.get({params:{processDefinitionId:n,finished:!1,pageNum:1}},function(n){e.queryProcessResult=n.data})},e.gotoProcessDetail=function(n){e.$state.go("main.flow.instance",{id:n})},e.gotoProcessList=function(n){e.$state.go("main.flow.instance",{processDefinitionId:n})},e.processTableOptions={id:"definitionProcess",data:"queryProcessResult",isPage:!1,colModels:[{name:"实例ID",index:"id"},{name:"流程标识",index:"processDefinitionId"},{name:"开始时间",index:"startTime"},{name:"业务标识",index:"businessKey"},{name:"操作",index:"",formatter:function(){return'<button type="button" class="btn btn-info btn-xs" ng-click=gotoProcessDetail(row.id)><i class="fa fa-eye"></i>&nbsp;明细</button>'}}]},"0"!==e.detailId?e.queryDetail(e.detailId):(e.queryDefinition(),e.nav())}])}(),function(){"use strict";angular.module("adminApp").controller("FlowFormController",["$scope","$stateParams","$window","$q",function(e,n,t,r){e.definitionService=e.FormService(e.restUrl.formDefinitions),e.userService=e.IdmService(e.restUrl.idmUsers),e.groupService=e.IdmService(e.restUrl.idmGroups),e.detailId=n.id||"0",e.queryParams="0"===e.detailId?e.getCacheParams():{},e.queryResult={},e.selectedItem=null,e.categoryService=e.IdmService(e.restUrl.idmTypes),e.category=null,e.forms=[],e.queryDefinition=function(){e.definitionService.get({params:e.queryParams},function(n){e.queryResult=n,console.log(n)}),e.categoryService.get({urlPath:"/parentId/2"},function(n){e.category=n,console.log(n)})},e.queryDetail=function(n){e.definitionService.get({urlPath:"/"+n},function(n){e.selectedItem=n,console.log(e.forms),console.log("key值"),console.log(e.selectedItem.key),e.definitionService.get({urlPath:"/json",params:{formKey:e.selectedItem.key}},function(n){console.log($.parseJSON(n.json)),e.forms1=$.parseJSON(n.json),
e.forms1.length>0&&(e.forms=[],angular.forEach(e.forms1,function(n,t){e.forms[t]={},e.forms[t].component=e.forms1[t]}))})})},e.deleteDefinition=function(n){e.editConfirmModal({formUrl:"definition-delete.html",title:"删除流程定义",formData:{name:n.name},confirm:function(t,r){e.definitionService["delete"]({urlPath:"/"+n.id,params:{cascade:t.cascade}},function(){e.showSuccessMsg("删除流程定义成功"),r.close(),e.gotoList()})}})},e.tableOptions={id:"definition",data:"queryResult",colModels:[{name:"表单ID",index:"id",sortable:!0,width:"10%"},{name:"表单名称",index:"name",sortable:!0,width:"10%"},{name:"分类",index:"category",sortable:!0,width:"10%"},{name:"版本号",index:"version",sortable:!0,width:"10%"},{name:"状态",index:"suspended",width:"11%",formatter:function(){return'<toggle-switch ng-init="switch=(!row.suspended)" ng-model="switch" class="switch-small switch-info" on-label="激活" off-label="挂起" on-change="switchStaus(row,switch)"></toggle-switch>'}},{name:"备注",index:"remark",width:"12%"},{name:"操作",index:"",width:"10%",formatter:function(){return'<button type="button" class="btn btn-info btn-xs" ng-click=gotoDetail(row.id)><i class="fa fa-eye"></i>&nbsp;明细</button>'}}],loadFunction:e.queryDefinition,queryParams:e.queryParams,sortName:"name",sortOrder:"asc"},"0"!==e.detailId?e.queryDetail(e.detailId):e.queryDefinition()}]).controller("fbBuilderController",["$scope","$injector","$timeout",function(e,n,t){}])}(),function(){"use strict";angular.module("adminApp").controller("FlowInstanceController",["$scope","$stateParams",function(e,n){e.instanceService=e.FlowService(e.restUrl.flowInstances),e.definitionService=e.FlowService(e.restUrl.flowDefinitions),e.taskService=e.FlowService(e.restUrl.flowTasks),e.detailId=n.id||"0",e.queryParams="0"===e.detailId?e.getCacheParams():{},angular.isUndefined(e.queryParams.processDefinitionId)&&(e.queryParams.processDefinitionId=n.processDefinitionId),e.queryResult={},e.selectedItem=null,e.queryDefinition=function(){e.definitionService.get({},function(n){e.definitions=n.data})},e.queryDetail=function(n){e.instanceService.get({urlPath:"/"+n},function(n){e.selectedItem=n})},e.queryInstance=function(){e.instanceService.get({params:e.queryParams},function(n){e.queryResult=n})},e.deleteInstance=function(n){null!==n.endTime?e.confirmModal({title:"确认删除已结束流程实例",confirm:function(){e.deleteInstanceApi(n.id)}}):e.editConfirmModal({formUrl:"instance-delete.html",title:"删除正在运行的流程实例",formData:{name:n.processDefinitionName},confirm:function(t,r){e.deleteInstanceApi(n.id,t.deleteReason,t.cascade),r.close()}})},e.deleteInstanceApi=function(n,t,r){e.instanceService["delete"]({urlPath:"/"+n,params:{deleteReason:t,cascade:r}},function(){e.showSuccessMsg("删除流程实例成功"),e.gotoList()})},e.switchStaus=function(n,t){var r=t?"激活流程实例":"挂起流程实例",a=t?"activate":"suspend";e.confirmModal({title:r,confirm:function(){e.instanceService.put({urlPath:"/"+n+"/"+a},function(){e.showSuccessMsg(r+"成功"),e.queryDetail(n)})}})},e.getImageUrl=function(n){return angular.isDefined(n)?e.instanceService.url+"/"+n+"/image.png?token="+e.loginUser.token:null},e.tableOptions={id:"instance",data:"queryResult",colModels:[{name:"实例ID",index:"id",width:"7%"},{name:"流程名称",index:"processDefinitionName",width:"10%"},{name:"流程标识",index:"processDefinitionId",sortable:!0,width:"10%"},{name:"状态",index:"endTime",width:"7%",formatter:function(){return'<span>{{row.endTime==null?"进行中":"已完成"}}</span>'}},{name:"开始时间",index:"startTime",sortable:!0,width:"10%"},{name:"结束时间",index:"endTime",sortable:!0,width:"10%"},{name:"业务标识",index:"businessKey",sortable:!0,width:"10%"},{name:"操作",index:"",width:"10%",formatter:function(){return'<button type="button" class="btn btn-info btn-xs" ng-click=gotoDetail(row.id)><i class="fa fa-eye"></i>&nbsp;明细</button>'}}],loadFunction:e.queryInstance,queryParams:e.queryParams,sortName:"startTime",sortOrder:"desc"},e.queryTask=function(n){e.taskService.get({params:{processInstanceId:n}},function(n){e.queryTaskResult=n.data})},e.gotoTaskDetail=function(n){e.$state.go("main.flow.task",{id:n})},e.taskTableOptions={id:"instanceTask",data:"queryTaskResult",isPage:!1,colModels:[{name:"任务ID",index:"id"},{name:"任务名称",index:"name"},{name:"负责人",index:"assignee"},{name:"所有人",index:"owner"},{name:"开始时间",index:"startTime"},{name:"结束时间",index:"endTime"},{name:"操作",index:"",formatter:function(){return'<button type="button" class="btn btn-info btn-xs" ng-click=gotoTaskDetail(row.id)><i class="fa fa-eye"></i>&nbsp;明细</button>'}}]},e.queryVariable=function(n){e.instanceService.get({urlPath:"/"+n+"/variables"},function(n){e.queryVariableResult=n})},e.createVariable=function(n){e.editConfirmModal({formUrl:"variable-create.html",title:"添加流程变量",confirm:function(t,r){e.instanceService.post({urlPath:"/"+n+"/variables",data:t},function(){e.showSuccessMsg("添加流程变量成功"),e.queryVariable(n),r.close()})}})},e.deleteVariable=function(n,t){e.instanceService["delete"]({urlPath:"/"+n+"/variables/"+t},function(){e.showSuccessMsg("删除流程变量成功"),e.queryVariable(n)})},e.variableTableOptions={id:"instanceVariable",data:"queryVariableResult",isPage:!1,colModels:[{name:"变量名称",index:"name"},{name:"类型",index:"type"},{name:"变量值",index:"value"},{name:"操作",index:"",formatter:function(){return'<button type="button" class="btn btn-danger btn-xs" ng-click=deleteVariable(selectedItem.id,row.name) ng-disabled="selectedItem.endTime != null"><i class="fa fa-trash-o"></i>&nbsp;删除</button>'}}]},e.queryChildInstance=function(n){e.instanceService.get({params:{superProcessInstanceId:n}},function(n){e.queryChildrenResult=n.data})},e.childrenTableOptions={id:"instanceChildren",data:"queryChildrenResult",isPage:!1,colModels:[{name:"实例ID",index:"id"},{name:"流程名称",index:"processDefinitionName"},{name:"流程标识",index:"processDefinitionId"},{name:"开始时间",index:"startTime"},{name:"结束时间",index:"endTime"},{name:"业务标识",index:"businessKey"},{name:"操作",index:"",formatter:function(){return'<button type="button" class="btn btn-info btn-xs" ng-click=gotoDetail(row.id)><i class="fa fa-eye"></i>&nbsp;明细</button>'}}]},"0"!==e.detailId?e.queryDetail(e.detailId):(e.queryDefinition(),e.queryInstance())}])}(),function(){"use strict";angular.module("adminApp").controller("FlowTaskController",["$scope","$stateParams","$q","$timeout","$location","$window",function(e,n,t,r,a,l){e.form_definitionService=e.FormService(e.restUrl.formDefinitions),e.taskService=e.FlowService(e.restUrl.flowTasks),e.taskService1=e.FlowService(e.restUrl.runTasks),e.instanceService=e.FlowService(e.restUrl.flowInstances),e.definitionService=e.FlowService(e.restUrl.flowDefinitions),e.userService=e.IdmService(e.restUrl.idmUsers),e.detailId=n.id||"0",e.queryParams="0"===e.detailId?e.getCacheParams():{},e.queryResult={},e.selectedItem=null,e.token=e.IdmService(e.restUrl.token),e.queryDefinition=function(){e.definitionService.get({},function(n){e.definitions=n.data})},e.queryDetail=function(n,t){a.search();e.status=a.search().status,e.user(),e.taskService.get({urlPath:"/"+n},function(n){e.selectedItem=n,e.img=e.instanceService.url+"/"+e.selectedItem.processInstanceId+"/image.png?token="+e.loginUser.token,console.log("表单标识"),console.log(e.selectedItem),e.log(),e.form()})},e.user=function(){e.access_token=a.search().access_token,null!=e.access_token&&(l.localStorage.access_token=e.access_token,e.token.get({urlPath:"/"+e.access_token},function(n){l.localStorage.token=n.token,l.localStorage.userName=n.name,l.localStorage.userId=n.id,l.localStorage.userId=n.id,l.localStorage.userAvatar=n.avatar,e.loginUser.userName=n.name,e.loginUser.token=n.token,e.loginUser.userId=n.id,e.loginUser.userAvatar=n.avatar}))},e.form=function(){null!=e.selectedItem.formKey&&""!=e.selectedItem.formKey&&e.form_definitionService.get({urlPath:"/json",params:{processInstanceId:e.selectedItem.processInstanceId,formKey:e.selectedItem.formKey}},function(n){e.id=n.bytearrayId,""!==n.json&&(e.forms1=$.parseJSON(n.json),e.forms1.length>0&&(e.forms=[],angular.forEach(e.forms1,function(n,t){"不可填"==e.selectedItem.form_update&&angular.forEach(e.forms1[t].forms,function(e,n){void 0!=e.components[0]&&void 0!=e.components[0].properties.initValue&&(e.components[0].properties.visible="disabled",e.components[0].properties.style.border="0px",e.components[0].properties.style["border-bottom"]="1px solid")}),e.forms[t]={},e.forms[t].component=e.forms1[t]})))})},e.subjson=function(n,t){var r=[];angular.forEach(t,function(e,n){r.push(e.component)}),console.log(r),e.taskService.get({urlPath:"/"+n},function(n){e.confirmModal({title:"确认提交数据",confirm:function(){console.log(e.selectedItem),e.selectedItem=n,e.form_definitionService.post({urlPath:"/json",data:{procInstId:e.selectedItem.processInstanceId,tableKey:e.selectedItem.formKey,editorJson:JSON.stringify(r),id:e.id}},function(n){console.log("提交成功"),e.showSuccessMsg("表单提交成功")})}})})},e.log=function(){e.userService.get({},function(n){e.users=n,e.logService=e.FlowService(e.restUrl.tasklog),e.queryParams.procDefId=e.selectedItem.processDefinitionId,e.queryParams.sortName="time",e.logService.get({params:e.queryParams},function(n){e.tasklogResult=n.data,angular.forEach(n.data,function(n){angular.forEach(e.users.data,function(e){n.userId==e.id&&(n.username=e.name)})})})})},e.logOptions={id:"tasklog",data:"tasklogResult",isPage:!1,colModels:[{name:"id",index:"id",width:"20%"},{name:"任务名称",index:"taskName",width:"20%"},{name:"操作人",index:"username",width:"20%"},{name:"状态",index:"status",width:"20%",formatter:function(){return'<span ng-if="row.status==2">结束</span> <span ng-if="row.status!=2">{{row.status== 0 ?"反驳":"完成"}}</span>'}},{name:"操作时间",index:"time",width:"20%",sortable:!0}],loadFunction:e.log,queryParams:e.queryParams,sortName:"time",sortOrder:"desc"},e.queryTask=function(){e.userService.get({},function(n){e.users=n,e.taskService.get({params:e.queryParams},function(n){e.queryResult=n,angular.forEach(e.queryResult.data,function(n){null==n.assignee?n.assigneeName="空":angular.forEach(e.users.data,function(e){n.assignee==e.id&&(n.assigneeName=e.name)})})})})},e.editTask=function(n){e.editConfirmModal({formUrl:"task-edit.html",title:"编辑任务",formData:n,confirm:function(t,r){e.taskService.put({urlPath:"/"+n.id,data:t},function(){e.showSuccessMsg("编辑任务成功"),e.queryDetail(n.id),r.close()})}})},e.assignTask=function(n){e.editTaskUser(n,"转派任务","assign")},e.delegateTask=function(n){e.editTaskUser(n,"委托任务","delegate")},e.editTaskUser=function(n,r,a){var l=[],o=e.userService.get({params:{status:0}},function(e){l=e.data});t.all([o]).then(function(){e.editConfirmModal({formUrl:"task-user-edit.html",title:r,formData:{name:n.name,users:l},confirm:function(t,l){e.taskService.put({urlPath:"/"+n.id+"/"+a+"/"+t.userId},function(){e.showSuccessMsg(r+"成功"),e.queryDetail(n.id),l.close()})}})})},e.completeTask=function(n){e.confirmModal({title:"确认完成任务",confirm:function(){e.taskService.put({urlPath:"/"+n.id+"/complete",data:'{"variables":[{"name":"submitType","type":"string","value":"y"}]}'},function(t){e.showSuccessMsg("完成任务成功"),e.queryDetail(n.id),e.taskService1.get({urlPath:"/"+n.id},function(e){console.log(e)}),console.log("图片的重新获取"),e.img=e.instanceService.url+"/"+e.selectedItem.processInstanceId+"/image.png?token="+e.loginUser.token+"&"+(new Date).getTime()})}})},e.backTask=function(n){e.confirmModal({title:"确认驳回任务",confirm:function(){e.taskService.put({urlPath:"/"+n.id+"/complete",data:'{"variables":[{"name":"submitType","type":"string","value":"n"}]}'},function(){e.showSuccessMsg("任务驳回成功"),e.queryDetail(n.id),e.taskService1.get({urlPath:"/"+n.id},function(e){console.log(e)}),console.log("图片的重新获取"),e.img=e.instanceService.url+"/"+e.selectedItem.processInstanceId+"/image.png?token="+e.loginUser.token+"&"+(new Date).getTime()})}})},e.deleteTask=function(n){e.confirmModal({title:"确认删除任务",confirm:function(){e.taskService["delete"]({urlPath:"/"+n.id},function(){e.showSuccessMsg("删除任务成功"),e.gotoList()})}})},e.tableOptions={id:"task",data:"queryResult",colModels:[{name:"任务ID",index:"id",width:"7%"},{name:"任务名称",index:"name",width:"8%"},{name:"流程标识",index:"processDefinitionId",sortable:!0,width:"8%"},{name:"负责人",index:"assigneeName",width:"7%"},{name:"状态",index:"endTime",width:"7%",formatter:function(){return'<span>{{row.endTime==null?"未处理":"已处理"}}</span>'}},{name:"开始时间",index:"startTime",sortable:!0,width:"10%"},{name:"结束时间",index:"endTime",sortable:!0,width:"10%"},{name:"操作",index:"",width:"7%",formatter:function(){return'<button type="button" class="btn btn-info btn-xs" ng-click=gotoDetail1(row.id,row.status)><i class="fa fa-eye"></i>&nbsp;明细</button>'}}],loadFunction:e.queryTask,queryParams:e.queryParams,sortName:"startTime",sortOrder:"desc"},e.queryVariable=function(n){e.taskService.get({urlPath:"/"+n+"/variables"},function(n){e.queryVariableResult=n})},e.createVariable=function(n){e.editConfirmModal({formUrl:"variable-create.html",title:"添加任务变量",confirm:function(t,r){e.taskService.post({urlPath:"/"+n+"/variables",data:t},function(){e.showSuccessMsg("添加任务变量成功"),e.queryVariable(n),r.close()})}})},e.deleteVariable=function(n,t){e.taskService["delete"]({urlPath:"/"+n+"/variables/"+t},function(){e.showSuccessMsg("删除任务变量成功"),e.queryVariable(n)})},e.variableTableOptions={id:"taskVariable",data:"queryVariableResult",isPage:!1,colModels:[{name:"变量名称",index:"name"},{name:"类型",index:"type"},{name:"变量值",index:"value"},{name:"操作",index:"",formatter:function(){return'<button type="button" class="btn btn-danger btn-xs" ng-click=deleteVariable(selectedItem.id,row.name) ng-disabled="selectedItem.endTime != null"><i class="fa fa-trash-o"></i>&nbsp;删除</button>'}}]},e.queryIdentity=function(n){e.taskService.get({urlPath:"/"+n+"/identity-links"},function(n){e.queryIdentityResult=n})},e.deleteIdentity=function(n,t,r){e.taskService["delete"]({urlPath:"/"+n+"/identity-links/"+t+"/"+r},function(){e.showSuccessMsg("删除候选信息成功"),e.queryIdentity(n)})},e.createIdentity=function(n){var r={},a=e.userService.get({params:{status:0}},function(e){r.users=e.data}),l=e.userService.get({urlPath:"/groups"},function(e){r.groups=e});t.all([a,l]).then(function(){e.editConfirmModal({formUrl:"task-identity-create.html",title:"添加候选信息",formData:r,confirm:function(t,r){var a={type:t.type};"user"===t.type?a.identityId=t.user[0].id:a.identityId=t.group[0].id,e.taskService.post({urlPath:"/"+n+"/identity-links",data:a},function(){e.showSuccessMsg("添加候选信息成功"),e.queryIdentity(n),r.close()})}})})},e.identityTableOptions={id:"taskidentity",data:"queryIdentityResult",isPage:!1,colModels:[{name:"ID",index:"identityId"},{name:"名称",index:"identityName"},{name:"类型",index:"type",formatter:function(){return'<span>{{row.type=="user"?"用户":"群组"}}</span>'}},{name:"操作",index:"",formatter:function(){return'<button type="button" class="btn btn-danger btn-xs" ng-click=deleteIdentity(selectedItem.id,row.type,row.identityId) ng-disabled="selectedItem.endTime != null"><i class="fa fa-trash-o"></i>&nbsp;删除</button>'}}]},"0"!==e.detailId?e.queryDetail(e.detailId):(e.queryDefinition(),e.queryTask())}])}(),function(){"use strict";angular.module("adminApp").controller("GroupController",["$scope","$stateParams","$q",function(e,n,t){e.groupService=e.IdmService(e.restUrl.idmGroups),e.parentId=parseInt(n.id||0),e.queryParams=e.getCacheParams(e.parentId),e.queryParams.parentId=e.parentId,e.parentGroup={id:e.parentId},e.queryResult={};var r=null;0!==e.parentId&&(r=e.groupService.get({urlPath:"/"+e.parentId},function(n){e.parentGroup=n})),e.queryGroup=function(){e.groupService.get({params:e.queryParams},function(n){e.queryResult=n})},e.deleteGroup=function(n){e.confirmModal({title:"确认删除群组",confirm:function(){e.groupService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除群组成功"),e.queryGroup()})}})},e.editGroup=function(n){e.editModal({id:n,formUrl:"group-edit.html",title:"群组",formData:{parentId:e.parentGroup.id,parentName:e.parentGroup.name},service:e.groupService,complete:e.queryGroup})},e.switchStaus=function(n){e.groupService.put({urlPath:"/"+n+"/switch"},function(){e.showSuccessMsg("修改状态成功"),e.queryGroup()})},e.queryChild=function(n){e.removeCacheParams(n),e.gotoDetail(n)},e.queryGroupUser=function(n){e.tableModal({service:e.IdmService(e.restUrl.idmGroups+"/"+n+"/users"),colModels:[{name:"名称",index:"name"},{name:"电话",index:"phone"},{name:"状态",index:"status",formatter:function(){return'<span class="label label-success" ng-if="row.status==0">启用</span><span class="label label-danger" ng-if="row.status==1">停用</span>'}}]})},e.tableOptions={id:"group",data:"queryResult",colModels:[{name:"名称",index:"name",sortable:!0,width:"10%"},{name:"类型",index:"type",sortable:!0,width:"7%",formatter:function(){return'<span ng-if="row.type==0">父级</span><span ng-if="row.type==1">子级</span>'}},{name:"状态",index:"status",sortable:!0,width:"11%",formatter:function(){return'<toggle-switch ng-init="switch=(row.status==0)" ng-model="switch" class="switch-small switch-info" on-label="启用" off-label="停用" on-change="switchStaus(row.id)"></toggle-switch>'}},{name:"排序",index:"order",sortable:!0,width:"7%"},{name:"描述",index:"remark",width:"12%"},{name:"修改时间",index:"lastUpdateTime",sortable:!0,width:"12%"},{name:"操作",index:"",width:"16%",formatter:function(){return'<div class="th-btn-group"><button type="button" class="btn btn-xs btn-info" ng-click=editGroup(row.id)><i class="fa fa-pencil"></i>&nbsp;编辑</button><button type="button" class="btn btn-xs btn-success" ng-if="row.type==0" ng-click=queryChild(row.id)><i class="fa fa-list"></i>&nbsp;下级</button><button type="button" class="btn btn-xs btn-success" ng-if="row.type==1" ng-click=queryGroupUser(row.id)><i class="fa fa-list"></i>&nbsp;关联用户</button><button type="button" class="btn btn-xs btn-danger" ng-click=deleteGroup(row.id)><i class="fa fa-trash-o"></i>&nbsp;删除</button></div>'}}],loadFunction:e.queryGroup,queryParams:e.queryParams},t.all([r]).then(function(){e.queryGroup()})}])}(),function(){"use strict";angular.module("adminApp").controller("MenuController",["$scope","$stateParams","$q",function(e,n,t){e.menuService=e.IdmService(e.restUrl.idmMenus),e.parentId=parseInt(n.id||0),e.queryParams=0===e.parentId?e.getCacheParams():{},e.queryParams.parentId=e.parentId,e.parentMenu={id:e.parentId},e.queryResult={};var r=null;0!==e.parentId&&(r=e.menuService.get({urlPath:"/"+e.parentId},function(n){e.parentMenu=n})),e.queryMenu=function(){e.menuService.get({params:e.queryParams},function(n){e.queryResult=n})},e.deleteMenu=function(n){e.confirmModal({title:"确认删除菜单",confirm:function(){e.menuService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除菜单成功"),e.queryMenu()})}})},e.editMenu=function(n){e.editModal({id:n,formUrl:"menu-edit.html",title:"菜单",formData:function(){return 0!==e.parentMenu.id?{type:1,parentId:e.parentMenu.id,parentName:e.parentMenu.name}:{type:0,parentId:0}}(),service:e.menuService,complete:e.queryMenu})},e.switchStaus=function(n){e.menuService.put({urlPath:"/"+n+"/switch"},function(){e.showSuccessMsg("修改状态成功"),e.queryMenu()})},e.queryMenuRole=function(n){e.tableModal({service:e.IdmService(e.restUrl.idmMenus+"/"+n+"/roles"),colModels:[{name:"名称",index:"name"},{name:"状态",index:"status",formatter:function(){return'<span class="label label-success" ng-if="row.status==0">启用</span><span class="label label-danger" ng-if="row.status==1">停用</span>'}}]})},e.tableOptions={id:"menu",data:"queryResult",colModels:[{name:"名称",index:"name",sortable:!0,width:"10%"},{name:"路径",index:"route",sortable:!0,width:"9%"},{name:"图标",index:"icon",width:"5%",formatter:function(){return'<div class="th-icon"><span class="{{\'fa \'+row.icon}}"></span></div>'}},{name:"状态",index:"status",sortable:!0,width:"10%",formatter:function(){return'<toggle-switch ng-init="switch=(row.status==0)" ng-model="switch" class="switch-small switch-info" on-label="启用" off-label="停用" on-change="switchStaus(row.id)"></toggle-switch>'}},{name:"排序",index:"order",sortable:!0,width:"5%"},{name:"修改时间",index:"lastUpdateTime",sortable:!0,width:"12%"},{name:"操作",index:"",width:"15%",formatter:function(){return'<div class="th-btn-group"><button type="button" class="btn btn-xs btn-info" ng-click=editMenu(row.id)><i class="fa fa-pencil"></i>&nbsp;编辑</button><button type="button" class="btn btn-xs btn-success" ng-if="row.type==0" ng-click=gotoDetail(row.id)><i class="fa fa-list"></i>&nbsp;下级</button><button type="button" class="btn btn-xs btn-success" ng-if="row.type!=0" ng-click=queryMenuRole(row.id)><i class="fa fa-list"></i>&nbsp;关联角色</button><button type="button" class="btn btn-xs btn-danger" ng-click=deleteMenu(row.id)><i class="fa fa-trash-o"></i>&nbsp;删除</button></div>'}}],loadFunction:e.queryMenu,queryParams:e.queryParams,sortName:"order",sortOrder:"asc"},t.all([r]).then(function(){e.queryMenu()})}])}(),function(){"use strict";angular.module("adminApp").controller("RoleController",["$scope","$q",function(e,n){e.roleService=e.IdmService(e.restUrl.idmRoles),e.menuService=e.IdmService(e.restUrl.idmMenus),e.queryResult={},e.queryParams={},e.queryRole=function(){e.roleService.get({params:e.queryParams},function(n){e.queryResult=n})},e.deleteRole=function(n){e.confirmModal({title:"确认删除角色",confirm:function(){e.roleService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除角色成功"),e.queryRole()})}})},e.editRole=function(t){var r={},a=e.roleService.get({urlPath:"/menus",params:{id:t}},function(e){r.menus=e});n.all([a]).then(function(){e.editModal({id:t,formUrl:"role-edit.html",title:"角色",formData:r,service:e.roleService,complete:e.queryRole})})},e.switchStaus=function(n){e.roleService.put({urlPath:"/"+n+"/switch"},function(){e.showSuccessMsg("修改状态成功"),e.queryRole()})},e.queryRoleUser=function(n){e.tableModal({service:e.IdmService(e.restUrl.idmRoles+"/"+n+"/users"),colModels:[{name:"名称",index:"name"},{name:"电话",index:"phone"},{name:"状态",index:"status",formatter:function(){return'<span class="label label-success" ng-if="row.status==0">启用</span><span class="label label-danger" ng-if="row.status==1">停用</span>'}}]})},e.tableOptions={id:"role",data:"queryResult",colModels:[{name:"名称",index:"name",sortable:!0,width:"10%"},{name:"状态",index:"status",sortable:!0,width:"11%",formatter:function(){return'<toggle-switch ng-init="switch=(row.status==0)" ng-model="switch" class="switch-small switch-info" on-label="启用" off-label="停用" on-change="switchStaus(row.id)"></toggle-switch>'}},{name:"备注",index:"remark",width:"12%"},{name:"创建时间",index:"createTime",sortable:!0,width:"12%"},{name:"修改时间",index:"lastUpdateTime",sortable:!0,width:"12%"},{name:"操作",index:"",width:"15%",formatter:function(){return'<div class="th-btn-group"><button type="button" class="btn btn-info btn-xs" ng-click=editRole(row.id)><i class="fa fa-pencil"></i>&nbsp;编辑</button><button type="button" class="btn btn-xs btn-success" ng-click=queryRoleUser(row.id)><i class="fa fa-list"></i>&nbsp;关联用户</button><button type="button" class="btn btn-danger btn-xs" ng-click=deleteRole(row.id)><i class="fa fa-trash-o"></i>&nbsp;删除</button></div>'}}],loadFunction:e.queryRole,queryParams:e.queryParams,sortName:"name",sortOrder:"asc"},e.queryRole()}])}(),function(){"use strict";angular.module("adminApp").controller("TypeController",["$scope","$stateParams","$q",function(e,n,t){e.groupService=e.IdmService(e.restUrl.idmTypes),e.parentId=parseInt(n.id||0),e.queryParams=e.getCacheParams(e.parentId),e.queryParams.parentId=e.parentId,e.parentGroup={id:e.parentId},e.queryResult={};var r=null;0!==e.parentId&&(r=e.groupService.get({urlPath:"/"+e.parentId},function(n){e.parentGroup=n})),e.queryGroup=function(){e.groupService.get({params:e.queryParams},function(n){e.queryResult=n})},e.deleteGroup=function(n){e.confirmModal({title:"确认删除分类",confirm:function(){e.groupService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除分类成功"),e.queryGroup()})}})},e.editGroup=function(n){e.editModal({id:n,formUrl:"group-edit.html",title:"分类",formData:{parentId:e.parentGroup.id,parentName:e.parentGroup.moduleType},service:e.groupService,complete:e.queryGroup})},e.switchStaus=function(n){e.groupService.put({urlPath:"/"+n+"/switch"},function(){e.showSuccessMsg("修改状态成功"),e.queryGroup()})},e.queryChild=function(n){e.removeCacheParams(n),e.gotoDetail(n)},e.queryGroupUser=function(n){e.tableModal({service:e.IdmService(e.restUrl.idmGroups+"/"+n+"/users"),colModels:[{name:"名称",index:"name"},{name:"电话",index:"phone"},{name:"状态",index:"status",formatter:function(){return'<span class="label label-success" ng-if="row.status==0">启用</span><span class="label label-danger" ng-if="row.status==1">停用</span>'}}]})},e.tableOptions={id:"group",data:"queryResult",colModels:[{name:"名称",index:"moduleType",sortable:!0,width:"10%"},{name:"类型",index:"parentId",sortable:!0,width:"7%",formatter:function(){return'<span ng-if="row.parentId==0">父级</span><span ng-if="row.parentId==1">子级</span>'}},{name:"状态",index:"status",sortable:!0,width:"11%",formatter:function(){return'<toggle-switch ng-init="switch=(row.status==0)" ng-model="switch" class="switch-small switch-info" on-label="启用" off-label="停用" on-change="switchStaus(row.id)"></toggle-switch>'}},{name:"描述",index:"remark",width:"12%"},{name:"修改时间",index:"lastUpdateTime",sortable:!0,width:"12%"},{name:"操作",index:"",width:"16%",formatter:function(){return'<div class="th-btn-group"><button type="button" class="btn btn-xs btn-info" ng-click=editGroup(row.id)><i class="fa fa-pencil"></i>&nbsp;编辑</button><button type="button" class="btn btn-xs btn-success" ng-if="row.parentId==0" ng-click=queryChild(row.id)><i class="fa fa-list"></i>&nbsp;下级</button><button type="button" class="btn btn-xs btn-danger" ng-click=deleteGroup(row.id)><i class="fa fa-trash-o"></i>&nbsp;删除</button></div>'}}],loadFunction:e.queryGroup,queryParams:e.queryParams},t.all([r]).then(function(){e.queryGroup()})}])}(),function(){"use strict";angular.module("adminApp").controller("UserController",["$scope","$q",function(e,n){e.userService=e.IdmService(e.restUrl.idmUsers),e.queryResult={},e.queryParams={},e.queryUser=function(){e.userService.get({params:e.queryParams},function(n){e.queryResult=n})},e.deleteUser=function(n){e.confirmModal({title:"确认删除用户",confirm:function(){e.userService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除用户成功"),e.queryUser()})}})},e.editUser=function(t){var r={},a=e.userService.get({urlPath:"/roles",params:{id:t}},function(e){r.roles=e}),l=e.userService.get({urlPath:"/groups",params:{id:t}},function(e){r.groups=e});n.all([a,l]).then(function(){e.editModal({id:t,formUrl:"user-edit.html",title:"用户",formData:r,service:e.userService,complete:e.queryUser})})},e.queryUser()}])}(),function(){"use strict";angular.module("adminApp").controller("ModelerFlowController",["$scope","$window","$stateParams",function(e,n,t){e.modelService=e.FlowService(e.restUrl.flowModels),e.detailId=parseInt(t.id||0),e.queryParams=0===e.detailId?e.getCacheParams():{},e.queryParams.latestVersion=!0,e.queryResult={},e.selectedItem=null,e.lastVersion=!1,e.versionNum=0,e.categoryService=e.IdmService(e.restUrl.idmTypes),e.category=null,e.queryDetail=function(n){e.modelService.get({urlPath:"/"+n},function(n){e.selectedItem=n,e.lastVersion=!0,e.versionNum=n.version})},e.queryModel=function(){e.modelService.get({params:e.queryParams},function(n){e.queryResult=n}),e.categoryService.get({urlPath:"/parentId/1"},function(n){e.category=n})},e.importModel=function(){e.editConfirmModal({formUrl:"flow-model-import.html",title:"导入模型",hideFooter:!0,property:{fileOptions:{fileuploaded:function(){e.queryModel()},uploadUrl:e.modelService.url+"/import?token="+e.loginUser.token,allowedFileExtensions:["bpmn","bpmn20.xml"]}}})},e.deleteModel=function(n){e.confirmModal({title:"确认删除模型",confirm:function(){e.modelService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除模型成功"),e.gotoList()})}})},e.deployModel=function(n){e.confirmModal({title:"确认部署模型",confirm:function(){e.modelService.post({urlPath:"/"+n+"/deploy"},function(){e.showSuccessMsg("部署模型成功")})}})},e.exportModel=function(n){e.modelService.get({urlPath:"/"+n.id+"/xml"},function(t){e.windowExportFile(t,n.name+"-v"+n.version+".bpmn20.xml")})},e.editModel=function(n){e.editModal({id:n,formUrl:"flow-model-edit.html",title:"模型",key:"category",service:e.modelService,complete:function(){angular.isDefined(n)?e.queryDetail(n):e.queryModel()}})},e.copyModel=function(n){e.editConfirmModal({formUrl:"flow-model-edit.html",formData:n,title:"复制模型",confirm:function(t,r){t.key===n.key?e.showErrorMsg("模型标识必须变更"):e.modelService.post({urlPath:"/"+n.id+"/copy",data:t},function(){e.showSuccessMsg("复制模型成功"),r.close()})}})},e.newestModel=function(n){e.confirmModal({title:"确认提升模型为最新版",confirm:function(){e.modelService.post({urlPath:"/"+n.id+"/newest"},function(n){e.showSuccessMsg("提升模型最新版成功"),e.selectedItem=n,e.lastVersion=!0,e.versionNum=n.version})}})},e.queryHistory=function(n,t){e.modelService.get({urlPath:"/"+n+"/"+t},function(n){e.selectedItem=n,e.versionNum===n.version?e.lastVersion=!0:e.lastVersion=!1})},e.designModel=function(t){n.open(e.restUrl.flowDesign(t,e.loginUser.token))},e.getImageUrl=function(n){return angular.isDefined(n)?e.modelService.url+"/"+n+"/image.png?token="+e.loginUser.token:null},e.versionArray=function(){for(var n=[],t=e.versionNum;t>0;t--)n.push(t);return n},0!==e.detailId?e.queryDetail(e.detailId):e.queryModel()}])}(),function(){"use strict";angular.module("adminApp").controller("ModelerFormController",["$scope","$stateParams","$q","$window",function(e,n,t,r){e.formTableService=e.FormService(e.restUrl.formTables),e.formFieldService=e.FormService(e.restUrl.formFields),e.formLayoutService=e.FormService(e.restUrl.formLayouts),e.detailId=n.id||"0",e.selectedItem=null,e.queryParams="0"===e.detailId?e.getCacheParams():{},e.queryResult={},e.queryFieldParams={tableId:e.detailId},e.queryFieldResult={},e.queryLayoutParams={tableId:e.detailId},e.queryLayoutResult={},e.categoryService=e.IdmService(e.restUrl.idmTypes),e.category=null,e.queryDetail=function(n){e.formTableService.get({urlPath:"/"+n},function(n){e.selectedItem=n})},e.queryFormTable=function(){e.formTableService.get({params:e.queryParams},function(n){e.queryResult=n}),e.categoryService.get({urlPath:"/parentId/2"},function(n){e.category=n})},e.deleteFormTable=function(n){e.confirmModal({title:"确认删除表单",confirm:function(){e.formTableService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除表单成功"),e.gotoList()})}})},e.exportDefinition=function(n){console.log(n),e.confirmModal({title:"确认部署模型",confirm:function(){e.formTableService.put({urlPath:"/"+n+"/deploy"},function(){e.showSuccessMsg("部署模型成功")})}})},e.editFormTable=function(n){e.editModal({id:n,formUrl:"form-table-edit.html",key:"category1",title:"表单",formData:{},service:e.formTableService,complete:e.queryFormTable})},e.queryFormField=function(){e.formFieldService.get({params:e.queryFieldParams},function(n){e.queryFieldResult=n})},e.editFormField=function(n){e.editModal({id:n,formUrl:"form-field-edit.html",title:"字段",key:"types",formData:{tableId:e.detailId},service:e.formFieldService,complete:e.queryFormField})},e.deleteFormField=function(n){e.confirmModal({title:"确认删除字段",confirm:function(){e.formFieldService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除字段成功"),e.queryFormField()})}})},e.fieldTableOptions={id:"field",data:"queryFieldResult",colModels:[{name:"名称",index:"name",sortable:!0,width:"10%"},{name:"名称",index:"type",sortable:!0,width:"10%"},{name:"备注",index:"remark",width:"12%"},{name:"创建时间",index:"createTime",sortable:!0,width:"12%"},{name:"修改时间",index:"lastUpdateTime",sortable:!0,width:"12%"},{name:"操作",index:"",width:"15%",formatter:function(){return'<div class="th-btn-group"><button type="button" class="btn btn-info btn-xs" ng-click=editFormField(row.id)><i class="fa fa-pencil"></i>&nbsp;编辑</button><button type="button" class="btn btn-danger btn-xs" ng-click=deleteFormField(row.id)><i class="fa fa-trash-o"></i>&nbsp;删除</button></div>'}}],loadFunction:e.queryFormField,queryParams:e.queryFieldParams,sortName:"name",sortOrder:"asc"},e.queryFormLayout=function(){e.formLayoutService.get({params:e.queryLayoutParams},function(n){e.queryLayoutResult=n})},e.editFormLayout=function(n){e.editModal({id:n,formUrl:"form-layout-edit.html",
title:"布局",formData:{tableId:e.detailId},service:e.formLayoutService,complete:e.queryFormLayout})},e.deleteFormLayout=function(n){e.confirmModal({title:"确认删除布局",confirm:function(){e.formLayoutService["delete"]({urlPath:"/"+n},function(){e.showSuccessMsg("删除布局成功"),e.queryFormLayout()})}})},e.designFormLayout=function(n){r.open(e.restUrl.formDesgin(n,e.loginUser.token))},e.layoutTableOptions={id:"layout",data:"queryLayoutResult",colModels:[{name:"名称",index:"name",sortable:!0,width:"10%"},{name:"备注",index:"remark",width:"12%"},{name:"创建时间",index:"createTime",sortable:!0,width:"12%"},{name:"修改时间",index:"lastUpdateTime",sortable:!0,width:"12%"},{name:"操作",index:"",width:"15%",formatter:function(){return'<div class="th-btn-group"><button type="button" class="btn btn-info btn-xs" ng-click=editFormLayout(row.id)><i class="fa fa-pencil"></i>&nbsp;编辑</button><button type="button" class="btn btn-success btn-xs" ng-click=designFormLayout(row.id)><i class="fa fa-wpforms"></i>&nbsp;设计</button><button type="button" class="btn btn-danger btn-xs" ng-click=deleteFormLayout(row.id)><i class="fa fa-trash-o"></i>&nbsp;删除</button></div>'}}],loadFunction:e.queryFormLayout,queryParams:e.queryLayoutParams,sortName:"name",sortOrder:"asc"},"0"!==e.detailId?(e.queryDetail(e.detailId),e.queryFormField(),e.queryFormLayout()):e.queryFormTable()}])}(),angular.module("adminApp").run(["$templateCache",function(e){e.put("views/login.html",'<div class="full-page login-page" data-color="" data-image="images/background-2.jpg">\r\n  <div class="content">\r\n    <div class="container">\r\n      <div class="row">\r\n        <div class="col-md-4 col-sm-6 col-md-offset-4 col-sm-offset-3">\r\n          <form role="form" novalidate name="editForm">\r\n            <div class="card card-login">\r\n              <div class="header text-center">\r\n                <h3 class="title">工作流平台</h3>\r\n              </div>\r\n              <div class="content">\r\n                <div class="form-group">\r\n                  <label>账号</label> \r\n                  <input type="text" placeholder="输入账号"  ng-model="user.account" class="form-control" required>\r\n                </div>\r\n                <div class="form-group">\r\n                  <label>密码</label> \r\n                  <input type="password" placeholder="输入密码" ng-model="user.password" class="form-control" required>\r\n                </div>\r\n              </div>\r\n              <div class="footer text-center">\r\n                <button ng-click="login()" ng-disabled="editForm.$invalid" class="btn">登录</button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <footer class="footer footer-transparent">\r\n    <div class="container">\r\n      <div class="copyright">\r\n        <!-- © 2018, made with <i class="fa fa-heart heart"></i> by <a href="http://www.plumdo.com">plumdo</a> -->\r\n        &copy; 2018  联森工作台</a>\r\n      </div>\r\n    </div>\r\n  </footer>\r\n  <div class="full-page-background" style="background-image: url(images/background-2.jpg)"></div>\r\n</div>\r\n'),e.put("views/main.html",'<div class="wrapper">\r\n    <div class="sidebar" data-background-color="{{sidebarBackground}}" data-active-color="{{sidebarActiveColor}}">\r\n        <div ng-include="\'views/common/sidebar.html\'"></div>\r\n    </div>\r\n    <div class="main-panel">\r\n        <div ng-include="\'views/common/navbar.html\'"></div>\r\n        <div class="content" ui-view>\r\n        </div>\r\n        <div ng-include="\'views/common/footer.html\'"></div>\r\n    </div>\r\n</div>\r\n\r\n<div ng-include="\'views/common/fixed-plugin.html\'"></div>'),e.put("views/common/confirm-modal.html",'<div class="modal-alert">\r\n    <div class="modal-header">\r\n    \t<i class="fa fa-exclamation-circle modal-icon"></i>\r\n        <h5 class="modal-title">{{modalTitle}}</h5>\r\n    </div>\r\n \t<div class="modal-footer">\r\n        <button type="button" class="btn btn-default" ng-click="cancel()">取消</button>\r\n        <button type="button" class="btn btn-success" ng-click="ok()">确定</button>\r\n    </div>\r\n</div>'),e.put("views/common/edit-modal.html",'<div class="modal-header">\r\n  <h3 class="modal-title">{{modalTitle}}</h3>\r\n</div>\r\n<div class="modal-body">\r\n  <form role="form" novalidate name="editForm">\r\n    <div ng-include="formUrl"></div>\r\n  </form> \r\n</div>\r\n<div class="modal-footer" ng-if="!hideFooter">\r\n  <button type="button" class="btn btn-default" ng-click="cancel()">取消</button>\r\n  <button type="button" class="btn btn-success" ng-disabled="editForm.$invalid" ng-click="ok()">确定</button>\r\n</div>\r\n'),e.put("views/common/fixed-plugin.html",'\r\n<div class="fixed-plugin">\r\n  <div class="dropdown show-dropdown" ng-class="{true: \'open\', false: \'\'}[isOpen]" >\r\n    <a href="" ng-click="isOpen=!isOpen">\r\n      <i class="fa fa-cog fa-2x"> </i>\r\n    </a>\r\n    <ul class="dropdown-menu">\r\n      <li class="header-title">菜单栏背景色</li>\r\n      <li class="adjustments-line text-center">\r\n        <a href="javascript:void(0)" class="switch-trigger background-color">\r\n          <span class="badge filter badge-white" ng-class="{active: sidebarBackground == \'white\'}" ng-click="switchSidebarBackground(\'white\')"></span>\r\n          <span class="badge filter badge-black" ng-class="{active: sidebarBackground == \'black\'}" ng-click="switchSidebarBackground(\'black\')"></span>\r\n        </a>\r\n      </li>\r\n\r\n      <li class="header-title">菜单栏选中颜色</li>\r\n      <li class="adjustments-line text-center">\r\n        <a href="javascript:void(0)" class="switch-trigger active-color">\r\n          <span class="badge filter badge-primary" ng-class="{active: sidebarActiveColor == \'primary\'}" ng-click="switchSidebarActiveColor(\'primary\')"></span>\r\n          <span class="badge filter badge-info" ng-class="{active: sidebarActiveColor == \'info\'}" ng-click="switchSidebarActiveColor(\'info\')"></span>\r\n          <span class="badge filter badge-success" ng-class="{active: sidebarActiveColor == \'success\'}" ng-click="switchSidebarActiveColor(\'success\')"></span>\r\n          <span class="badge filter badge-warning" ng-class="{active: sidebarActiveColor == \'warning\'}" ng-click="switchSidebarActiveColor(\'warning\')"></span>\r\n          <span class="badge filter badge-danger" ng-class="{active: sidebarActiveColor == \'danger\'}" ng-click="switchSidebarActiveColor(\'danger\')"></span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</div>'),e.put("views/common/footer.html",'<footer class="footer">\r\n  <div class="container-fluid">\r\n    <div class="copyright pull-right">\r\n      <!-- &copy; 2018, made with <i class="fa fa-heart heart"></i> by <a\r\n        href="http://plumdo.com">plumdo</a> -->\r\n        &copy; 2018  联森工作台</a>\r\n    </div>\r\n  </div>\r\n</footer>\r\n'),e.put("views/common/navbar.html",'<nav class="navbar navbar-default ">\r\n  <div class="container-fluid">\r\n    <div class="navbar-header">\r\n      <button type="button" class="navbar-toggle" ng-click="sidebarToggle(this)">\r\n        <span class="sr-only">Toggle navigation</span>\r\n        <span class="icon-bar bar1"></span>\r\n        <span class="icon-bar bar2"></span>\r\n        <span class="icon-bar bar3"></span>\r\n      </button>\r\n      <a class="navbar-brand" href="">{{menuTitle}}</a>\r\n    </div>\r\n    <div class="collapse navbar-collapse">\r\n      <ul class="nav navbar-nav navbar-right">\r\n        <li>\r\n          <a href="javascript:void(0)" style="background-color: #00bbff;" ng-click="controlquery()" data-toggle="modal" data-target="#myModal">\r\n            <i class="fa fa-search"></i>\r\n            <p>搜索</p>\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a href="javascript:void(0)" style="background-color: #1e88e5;" ng-click="log(loginUser.userId,loginUser.userName)" data-toggle="modal" data-target="#myModal">\r\n            <i class="fa fa-calendar-minus-o"></i>\r\n            <p>日志</p>\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a href="javascript:void(0)" style="background-color: #2c7659;">\r\n            <i class="fa fa-commenting-o"></i>\r\n            <p>通知</p>\r\n          </a>\r\n        </li>\r\n        <li>\r\n          <a href="javascript:void(0)" style="background-color: #762c59;">\r\n            <i class="fa fa-lock"></i>\r\n            <p>锁屏</p>\r\n          </a>\r\n        </li>\r\n        <li class="dropdown">\r\n          <a href="" class="dropdown-toggle" data-toggle="dropdown">\r\n            <img class="nav-user-photo" src="{{loginUser.userAvatar}}">\r\n            <span class="user-info">\r\n              {{loginUser.userName}}\r\n              <br/>欢迎使用\r\n            </span>\r\n            <span class="caret"></span>\r\n          </a>\r\n          <ul class="dropdown-menu">\r\n            <li>\r\n              <a href="javascript:void(0)">个人信息</a>\r\n            </li>\r\n            <!-- <li>\r\n              <a href="javascript:void(0)" ng-click="changePwd()">修改密码</a>\r\n            </li> -->\r\n            <li role="separator" class="divider"></li>\r\n            <li>\r\n              <a href="javascript:void(0)" ng-click="signOut()">注销</a>\r\n            </li>\r\n          </ul>\r\n        </li>\r\n\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</nav>\r\n\r\n\r\n\r\n<script type="text/ng-template" id="change-password.html">\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.oldPassword.$error.required}">\r\n    <label class="control-label">原密码</label> \r\n    <input type="password" class="form-control" name="oldPassword" ng-model="formData.oldPassword" required></input>\r\n  </div>\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.newPassword.$error.required}">\r\n    <label class="control-label">新密码</label> \r\n    <input type="password" class="form-control" name="newPassword" ng-model="formData.newPassword" required></input>\r\n  </div>\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.confirmPassword.$error.required}">\r\n    <label class="control-label">确认新密码</label> \r\n    <input type="password" class="form-control" name="confirmPassword" ng-model="formData.confirmPassword" required></input>\r\n  </div>\r\n</script>\r\n\r\n<script type="text/ng-template" id="log.html">\r\n        <div ng-repeat="item in log">\r\n            <p>{{$index+1}}.  {{name}} {{item.desc}} <span style="float: right;">{{item.createTime}}</span></p>\r\n          </div>  \r\n</script>\r\n\r\n<!-- 模态框（Modal） \r\n   <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n    <div class="modal-dialog">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\r\n            &times;\r\n          </button>\r\n          <h4 class="modal-title" id="myModalLabel">\r\n            日志\r\n          </h4>\r\n        </div>\r\n        <div class="modal-body" style="min-height: 500px;">\r\n          <div ng-repeat="item in log">\r\n            <p>{{$index+1}}、{{item.desc}} <span style="float: right;">{{item.createTime}}</span></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div> -->'),e.put("views/common/sidebar.html",'<div class="sidebar-wrapper">\r\n  <div class="logo">\r\n    <a href="javascript:void(0);" class="simple-text">\r\n      <div class="logo-img">\r\n        <img src="./images/angular2-logo.png">\r\n      </div>\r\n      Work Admin\r\n    </a>\r\n  </div>\r\n  <perfect-scrollbar class="scroller" wheel-propagation="true" wheel-speed="10" min-scrollbar-length="20">\r\n    <ul class="nav" >\r\n      <li ng-show="isNotMobileMenu">\r\n        <a href="#" class="dropdown-toggle" data-toggle="dropdown">\r\n          <i class="ti-panel"></i>\r\n          <p>Stats</p>\r\n        </a>\r\n      </li>\r\n      <li class="dropdown" ng-if="isNotMobileMenu">\r\n        <a href="#" class="dropdown-toggle" data-toggle="dropdown">\r\n          <i class="ti-bell"></i>\r\n          <p class="notification">5</p>\r\n          <p>Notifications</p>\r\n          <b class="caret"></b>\r\n        </a>\r\n        <ul class="dropdown-menu">\r\n          <li><a href="#">Notification 1</a></li>\r\n          <li><a href="#">Notification 2</a></li>\r\n          <li><a href="#">Notification 3</a></li>\r\n          <li><a href="#">Notification 4</a></li>\r\n          <li><a href="#">Another notification</a></li>\r\n        </ul>\r\n      </li>\r\n      <li ng-if="isNotMobileMenu">\r\n        <a href="#">\r\n      \t<i class="ti-settings"></i>\r\n      \t<p>Settings</p>\r\n        </a>\r\n      </li>\r\n      <li class="divider" ng-if="isNotMobileMenu"></li>\r\n      <li ng-repeat="menuItem in menuItems" ng-class="{\'active\':$state.includes(menuItem.path)}">\r\n        <a ui-sref="{{menuItem.path}}" ng-if="!menuItem.children">\r\n          <i class="{{\'fa \'+menuItem.icon}}"></i>\r\n          <p>{{menuItem.name}}</p>\r\n        </a>\r\n        \r\n         <a href="javascript:void(0);" data-toggle="collapse" data-target="{{\'#\'+menuItem.id}}"  ng-if="menuItem.children" aria-expanded="{{$state.includes(menuItem.path)}}">\r\n          <i class="{{\'fa \'+menuItem.icon}}"></i>\r\n          <p>{{menuItem.name}}<b class="caret"></b></p>\r\n        </a>\r\n        \r\n        <div class="collapse" ng-class="{\'in\':$state.includes(menuItem.path)}" id="{{menuItem.id}}" ng-if="menuItem.children">\r\n          <ul class="nav child">\r\n              <li ng-repeat="menuItemChild in menuItem.children" ui-sref-active="active" >\r\n                <a ui-sref="{{menuItemChild.path}}">\r\n                  <i class="{{\'fa \'+menuItemChild.icon}}"></i>\r\n                  <p>{{menuItemChild.name}}</p>\r\n                </a>\r\n              </li>\r\n           </ul>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </perfect-scrollbar>\r\n</div>\r\n'),e.put("views/common/view-load.html",'<div class="folat" ng-show="progressNum>0">\r\n  <div class="sk-spinner-wave">\r\n    <div class="sk-rect{{num}}" ng-repeat="num in [1,2,3,4,5]"></div>\r\n  </div>\r\n</div>'),e.put("views/directive/fb-builder.html",' <!-- 在画布里面的状态 -->\r\n <div class="column ui-sortable" ui-sortable="sortableOptions" ng-model="forms.components">\r\n\t<div ng-repeat="component in forms.components">\r\n\t\t<!-- <div class="ui-draggable lyrow" ng-click="selectComponent(component,$event)" ng-mouseenter="hover = true" ng-mouseleave="hover = false"\r\n\t\t\tng-class="{\'box\': component.type!=\'column\',\'hover\':hover&&component.type!=\'column\',\'focused\': builderForms.selectedComponent===component}" >\r\n\t\t\t<span class="drag label label-default">\r\n\t\t\t\t<i class="glyphicon glyphicon-move icon-black"></i>拖动\r\n\t\t\t</span>\r\n\t\t\t\r\n\t\t\t<a ng-click="copyComponent(forms,component,$event)" class="copy label label-success">\r\n\t\t\t\t<i class="glyphicon glyphglyphicon glyphicon-plus icon-white"></i>复制\r\n\t\t\t</a>\r\n\t\t\t<a ng-click="removeComponent(forms,$index)" class="remove label label-danger">\r\n\t\t\t\t<i class="glyphicon glyphglyphicon glyphicon-remove icon-white"></i>删除\r\n\t\t\t</a> -->\r\n\t\t\t\r\n\t\t\t<div fb-builder-object="component"></div>\r\n\t\t\t\r\n\t\t\t<div ng-if="component.type!=\'column\'" class="handle"></div>\r\n\t\t</div>\r\n    </div>\r\n</div>'),e.put("views/flow/definition.html",'<div class="container-fluid" ng-show="detailId==\'0\'">\r\n  <div class="card card-query">\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-2">\r\n          <h4 class="title">只显示最新版本</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" ng-model="queryParams.latestVersion" ng-init="queryParams.latestVersion=queryParams.latestVersion||\'true\'">\r\n              <option value="true">是</option>\r\n              <option value="false">否</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-2">\r\n          <h4 class="title">状态</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" ng-model="queryParams.suspended">\r\n              <option value="">全部</option>\r\n              <option value="false">激活</option>\r\n              <option value="true">挂起</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n          <h4 class="title">分类</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" name="category" ng-model="queryParams.category" ng-init="queryParams.category=\'\'">\r\n              <option value="">全部</option>\r\n              <option ng-repeat="item in category" value="{{item.moduleType}}">{{item.moduleType}}</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n          <h4 class="title">名称</h4>\r\n          <div class="input-group form-group">\r\n            <input type="text" ng-model="queryParams.name"  class="form-control" placeholder="输入定义名称">\r\n            <span class="input-group-btn">\r\n              <button type="button" class="btn btn-info" ng-click="queryDefinition()">搜索</button>\r\n              <button type="button" class="btn btn-info" ng-click="importDefinition()">导入</button>\r\n              <button type="button" class="btn btn-info" ng-click="nav()">多层导航</button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card">\r\n    <div class="content">\r\n      <table ng-table="tableOptions" class="table table-striped ng-table">\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="container-fluid" ng-if="detailId!=\'0\'">\r\n  <div class="card card-detail">\r\n    <div class="header">\r\n      <h4 class="title">\r\n        <span class="text-info right-split">v{{selectedItem.version}}</span>{{selectedItem.name}}\r\n        <button type="button" class="btn btn-warning pull-right" ng-click="gotoList()">返回列表</button>\r\n      </h4>\r\n    </div>\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-10">\r\n          <span class="property">\r\n            <label>ID:</label>{{selectedItem.id}}</span>\r\n          <span class="property">\r\n            <label>版本:</label>{{selectedItem.version}}</span>\r\n          <span class="property">\r\n            <label>名称:</label>{{selectedItem.name}}</span>\r\n          <span class="property">\r\n            <label>标识:</label>{{selectedItem.key}}</span>\r\n          <span class="property">\r\n            <label>状态:</label>{{selectedItem.suspended?\'挂起\':\'激活\'}}</span>\r\n          <span class="property">\r\n            <label>分类:</label>{{selectedItem.category}}</span>\r\n          <span class="property">\r\n            <label>描述:</label>{{selectedItem.description}}</span>\r\n        </div>\r\n        <div class="col-md-2">\r\n          <button type="button" class="btn btn-info btn-block" ng-click="createInstance(selectedItem)">启动</button>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="switchStaus(selectedItem,false)" ng-show="!selectedItem.suspended">挂起</button>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="switchStaus(selectedItem,true)" ng-show="selectedItem.suspended">激活</button>\r\n          <button type="button" class="btn btn-danger btn-block" ng-click="deleteDefinition(selectedItem)">删除</button>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="exportDefinition(selectedItem)">导出</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card card-detail">\r\n    <div class="content">\r\n      <div class="nav-tabs-navigation">\r\n        <div class="nav-tabs-wrapper">\r\n          <ul uib-tabset active="active" type="tabs">\r\n            <uib-tab index="0" heading="流程图"></uib-tab>\r\n            <!-- <uib-tab index="1" heading="授权信息（启动）" select="queryIdentity(selectedItem.id)"></uib-tab>\r\n            <uib-tab index="2" heading="定时任务" select="queryJob(selectedItem.id)"></uib-tab> -->\r\n            <uib-tab index="3" heading="流程实例（运行）" select="queryProcess(selectedItem.id)"></uib-tab>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class="tab-content">\r\n        <div class="tab-pane text-center" ng-class="{\'active\':active==0}">\r\n          <img ng-src="{{getImageUrl(selectedItem.id)}}" />\r\n        </div>\r\n        <div class="tab-pane" ng-class="{\'active\':active==1}">\r\n          <table ng-table="identityTableOptions" class="table table-striped ng-table">\r\n          </table>\r\n          <br/>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="createIdentity(selectedItem.id)">添加授权</button>\r\n        </div>\r\n        <div class="tab-pane" ng-class="{\'active\':active==2}">\r\n          <table ng-table="jobTableOptions" class="table table-striped ng-table">\r\n          </table>\r\n        </div>\r\n        <div class="tab-pane" ng-class="{\'active\':active==3}">\r\n          <table ng-table="processTableOptions" class="table table-striped ng-table">\r\n          </table>\r\n          <br/>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="gotoProcessList(selectedItem.id)">查看全部流程实例</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<script type="text/ng-template" id="definition-status-edit.html">\r\n  <div class="form-group">\r\n    <label class="control-label">流程名称</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.name" readonly></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">包括流程实例</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.includeProcessInstances" ng-value="true" ng-checked="true" /> 是\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.includeProcessInstances" ng-value="false" /> 否\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">执行时间(不填立刻执行)</label> \r\n    <input type="text" datetime-picker class="form-control" ng-model="formData.date"></input>\r\n  </div>\r\n</script>\r\n\r\n\r\n<script type="text/ng-template" id="definition-delete.html">\r\n  <div class="form-group">\r\n    <label class="control-label">流程定义</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.name" readonly></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">包括流程实例</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.cascade" ng-value="true"   /> 是\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.cascade" ng-value="false" ng-checked="true" /> 否\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n</script>\r\n\r\n<script type="text/ng-template" id="definition-start.html">\r\n  <div class="form-group">\r\n    <label class="control-label">流程定义</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.name" readonly></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">自动提交任务</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.autoCommitTask" ng-value="true" /> 是\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.autoCommitTask" ng-value="false" ng-checked="true" /> 否\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">业务标识</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.businessKey"></input>\r\n  </div>\r\n</script>\r\n\r\n<script type="text/ng-template" id="definition-identity-create.html">\r\n  <div class="form-group" ng-init="formData.type=\'user\'">\r\n  \t<label class="control-label">类型</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.type" value="user" /> 人员\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.type" value="group" /> 群组\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group" ng-show="formData.type==\'user\'">\r\n    <label class="control-label">人员</label>  <br/>\r\n\t<isteven-multi-select    \r\n        input-model="formData.users"    \r\n        output-model="formData.user"\r\n        button-label="name"\r\n        item-label="name"\r\n        tick-property="selected"\r\n        orientation="horizontal"\r\n    \tselection-mode="single"\r\n        translation="multiSelectLang">\r\n   </isteven-multi-select>\r\n  </div>\r\n  \r\n  <div class="form-group" ng-show="formData.type==\'group\'">\r\n    <label class="control-label">群组</label>  <br/>\r\n    <isteven-multi-select    \r\n        input-model="formData.groups"    \r\n        output-model="formData.group"\r\n        button-label="name"\r\n        item-label="name"\r\n        tick-property="selected"\r\n        group-property="group"\r\n    \tselection-mode="single"\r\n        translation="multiSelectLang">\r\n   </isteven-multi-select>\r\n  </div>\r\n</script>\r\n\r\n<script type="text/ng-template" id="definition-import.html">\r\n  <input type="file" class="form-control" multiple file-input="fileOptions" ng-model="formData.file" >\r\n</script>\r\n\r\n<script type="text/ng-template" id="nav.html"> \r\n  <!-- <div class="col-md-2">\r\n    <lable class="control-label">流程搜索</label>\r\n  </div>\r\n  <div class="col-md-10"> \r\n      <div class="input-group form-group">\r\n        <input type="text" ng-model="queryParams.name" class="form-control" placeholder="输入定义名称">\r\n        <span class="input-group-btn">\r\n          <button type="button" class="btn btn-info" ng-click="queryDefinition()">搜索</button>\r\n           </span>\r\n      </div>\r\n    </div> -->\r\n  <div class="col-md-12">\r\n      <h4 class="title" style="margin:10px 0 10px 0;">流程定义</h4>\r\n      <div class="input-group form-group">\r\n          <!-- {{count}} --> \r\n          <!-- ng-if="option.id!=\'标识三:1:17539\'"  queryParams.processDefinitionId -->\r\n       <select class="form-control" chosen ng-model="queryParams.name" placeholder-text-single="\'选择流程定义\'" no-results-text="\'没有结果匹配\'">\r\n          <option value="">全部</option>         \r\n          <option ng-repeat="option in definitions" value="{{option.name}}" > {{option.name+\' (v\'+option.version+\')\'}}</option>\r\n        </select>\r\n        <span class="input-group-btn">\r\n          <button type="button" class="btn btn-info" ng-click="queryTask()">搜索</button>\r\n        </span>\r\n      </div>\r\n  </div>\r\n  <div class="Area">\r\n    <div class="block AreaLeft">\r\n        <ul>\r\n              <li class="active" ng-click="b()">工作流</li> \r\n          </ul>\r\n      </div>\r\n      <div class="block AreaCenter">\r\n        <ul>\r\n            <li ng-repeat="item in nav" ng-click="bb(item.moduleType)" ng-class="{\'active\':item.moduleType==category}">\r\n                      {{item.moduleType}}  \r\n            </li>\r\n            <!-- <button type="button" class="btn btn-danger btn-xs pull-right" data="{{item.moduleType}}" ng-click="aa($event.target)">三级</button> -->\r\n            <!-- <button type="button" class="btn btn-danger btn-xs pull-right" data="111" ng-click="aa()">三级</button> -->\r\n            <!--<li ng-repeat="item in category" ng-if="$index==0" class="active" ng-model="queryParams.category" ng-click="aa()">\r\n                 </li>\r\n            <li ng-repeat="item in category" ng-if="$index!=0"  ng-model="queryParams.category" ng-click="aa()">\r\n              {{item.moduleType}}\r\n            </li> --> \r\n        </ul>\r\n      </div>\r\n      <div class="block AreaRight">\r\n        <ul> \r\n              <li ng-repeat="item in queryResult">\r\n              <!-- {{item}} {{item.name}} -->\r\n              <!-- <p ng-if="item.version == count">   -->\r\n                {{item.name}}  (v{{item.version}})  \r\n                <button type="button" class="btn btn-danger btn-xs pull-right" style="margin-right:15px;" ng-click="createInstance1(item.name,item.id)">启动</button>\r\n                <button type="button" class="btn btn-info btn-xs pull-right" style="margin-right:15px;" ng-click=gotoDetail(item.id)>明细</button>\r\n              <!-- </p> -->\r\n            </li>\r\n            <li ng-if="count==0"> \r\n              暂时没有可以启动的流程图\r\n            </li>  \r\n        </ul>\r\n      </div>\r\n  </div>\r\n</script>'),e.put("views/flow/form.html",'<div class="container-fluid" ng-show="detailId==\'0\'">\r\n  <div class="card card-query">\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-2">\r\n          <h4 class="title">只显示最新版本</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" ng-model="queryParams.latestVersion" ng-init="queryParams.latestVersion=queryParams.latestVersion||\'true\'">\r\n              <option value="true">是</option>\r\n              <option value="false">否</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-2">\r\n          <h4 class="title">状态</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" ng-model="queryParams.suspended">\r\n              <option value="">全部</option>\r\n              <option value="false">激活</option>\r\n              <option value="true">挂起</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n          <h4 class="title">分类</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" name="category" ng-model="queryParams.category" ng-init="queryParams.category=\'\'">\r\n              <option value="">全部</option>\r\n              <option ng-repeat="item in category" value="{{item.moduleType}}">{{item.moduleType}}</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n          <h4 class="title">名称</h4>\r\n          <div class="input-group form-group">\r\n            <input type="text" ng-model="queryParams.name" class="form-control" placeholder="输入定义名称">\r\n            <span class="input-group-btn">\r\n              <button type="button" class="btn btn-info" ng-click="queryDefinition()">搜索</button>\r\n              <button type="button" class="btn btn-info" ng-click="importDefinition()">导入</button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card">\r\n    <div class="content">\r\n      <table ng-table="tableOptions" class="table table-striped ng-table">\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="container-fluid" ng-if="detailId!=\'0\'">\r\n  <div class="card card-detail">\r\n    <div class="header">\r\n      <h4 class="title">\r\n        <span class="text-info right-split">v{{selectedItem.version}}</span>{{selectedItem.name}}\r\n        <button type="button" class="btn btn-warning pull-right" ng-click="gotoList()">返回列表</button>\r\n      </h4>\r\n    </div>\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-10">\r\n          <span class="property">\r\n            <label>ID:</label>{{selectedItem.id}}</span>\r\n          <span class="property">\r\n            <label>版本:</label>{{selectedItem.version}}</span>\r\n          <span class="property">\r\n            <label>名称:</label>{{selectedItem.name}}</span>\r\n          <span class="property">\r\n            <label>标识:</label>{{selectedItem.key}}</span>\r\n          <span class="property">\r\n            <label>状态:</label>{{selectedItem.suspended?\'挂起\':\'激活\'}}</span>\r\n          <span class="property">\r\n            <label>分类:</label>{{selectedItem.category}}</span>\r\n          <!-- <span class="property"><label>描述:</label>{{selectedItem.description}}</span> -->\r\n        </div>\r\n        <div class="col-md-2">\r\n          <!-- <button type="button" class="btn btn-info btn-block" ng-click="createInstance(selectedItem)">启动</button>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="switchStaus(selectedItem,false)" ng-show="!selectedItem.suspended">挂起</button>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="switchStaus(selectedItem,true)" ng-show="selectedItem.suspended">激活</button> -->\r\n          <button type="button" class="btn btn-danger btn-block" ng-click="deleteDefinition(selectedItem)">删除</button>\r\n          <!-- <button type="button" class="btn btn-info btn-block" ng-click="exportDefinition(selectedItem)">导出</button> -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card card-detail">\r\n    <div class="content">\r\n      <div class="nav-tabs-navigation">\r\n        <div class="nav-tabs-wrapper">\r\n          <ul uib-tabset active="active" type="tabs">\r\n            <uib-tab index="0" heading="表单"></uib-tab>\r\n            <!-- <uib-tab index="1" heading="授权信息（启动）" select="queryIdentity(selectedItem.id)"></uib-tab>\r\n            <uib-tab index="2" heading="定时任务" select="queryJob(selectedItem.id)"></uib-tab> -->\r\n            <!-- <uib-tab index="1" heading="表单实例（运行）" select="queryProcess(selectedItem.id)"></uib-tab> -->\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class="tab-content">\r\n        <div class="tab-pane " ng-class="{\'active\':active==0}">\r\n          <div ng-repeat="form in forms">\r\n            <div ng-repeat="component in form">\r\n              <div fb-builder-object="component">\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- <div ng-repeat="(key,val) in forms"> \r\n             {{key}}\r\n             <div ng-repeat="component in val">\r\n                <div ng-bind-html="component.template | to_trusted"></div>\r\n              </div>\r\n          </div>  -->\r\n        <!-- <div class="tab-pane" ng-class="{\'active\':active==1}">\r\n          <table ng-table="identityTableOptions" class="table table-striped ng-table">\r\n            </table>\r\n          <br/>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="createIdentity(selectedItem.id)">添加授权</button>\r\n        </div>\r\n        <div class="tab-pane" ng-class="{\'active\':active==2}">\r\n          <table ng-table="jobTableOptions" class="table table-striped ng-table">\r\n            </table>\r\n        </div> -->\r\n        <!-- <div class="tab-pane" ng-class="{\'active\':active==1}">\r\n          <button type="button" class="btn btn-info btn-block" ng-click="gotoProcessList(selectedItem.id)">查看表单实例</button>\r\n        </div> -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<script type="text/ng-template" id="definition-status-edit.html">\r\n  <div class="form-group">\r\n    <label class="control-label">流程名称</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.name" readonly></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">包括流程实例</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.includeProcessInstances" ng-value="true" ng-checked="true" /> 是\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.includeProcessInstances" ng-value="false" /> 否\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">执行时间(不填立刻执行)</label> \r\n    <input type="text" datetime-picker class="form-control" ng-model="formData.date"></input>\r\n  </div>\r\n</script>\r\n\r\n\r\n<script type="text/ng-template" id="definition-delete.html">\r\n  <div class="form-group">\r\n    <label class="control-label">流程定义</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.name" readonly></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">包括流程实例</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.cascade" ng-value="true" /> 是\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.cascade" ng-value="false" ng-checked="true" /> 否\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n</script>\r\n\r\n<script type="text/ng-template" id="definition-start.html">\r\n  <div class="form-group">\r\n    <label class="control-label">流程定义</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.name" readonly></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">自动提交任务</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.autoCommitTask" ng-value="true" /> 是\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.autoCommitTask" ng-value="false" ng-checked="true" /> 否\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">业务标识</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.businessKey"></input>\r\n  </div>\r\n</script>\r\n\r\n<script type="text/ng-template" id="definition-identity-create.html">\r\n  <div class="form-group" ng-init="formData.type=\'user\'">\r\n  \t<label class="control-label">类型</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.type" value="user" /> 人员\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.type" value="group" /> 群组\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group" ng-show="formData.type==\'user\'">\r\n    <label class="control-label">人员</label>  <br/>\r\n\t<isteven-multi-select    \r\n        input-model="formData.users"    \r\n        output-model="formData.user"\r\n        button-label="name"\r\n        item-label="name"\r\n        tick-property="selected"\r\n        orientation="horizontal"\r\n    \tselection-mode="single"\r\n        translation="multiSelectLang">\r\n   </isteven-multi-select>\r\n  </div>\r\n  \r\n  <div class="form-group" ng-show="formData.type==\'group\'">\r\n    <label class="control-label">群组</label>  <br/>\r\n    <isteven-multi-select    \r\n        input-model="formData.groups"    \r\n        output-model="formData.group"\r\n        button-label="name"\r\n        item-label="name"\r\n        tick-property="selected"\r\n        group-property="group"\r\n    \tselection-mode="single"\r\n        translation="multiSelectLang">\r\n   </isteven-multi-select>\r\n  </div>\r\n</script>\r\n\r\n<script type="text/ng-template" id="definition-import.html">\r\n  <input type="file" class="form-control" multiple file-input="fileOptions" ng-model="formData.file" >\r\n</script>'),
e.put("views/flow/instance.html",'<div class="container-fluid" ng-show="detailId==\'0\'">\r\n    <div class="card card-query">\r\n      <div class="content">\r\n        <div class="row">\r\n          <div class="col-md-6">\r\n            <div class="col-md-3">\r\n              <h4 class="title">开始时间</h4>\r\n            </div>\r\n            <div class="col-md-9">\r\n              <div class="input-daterange input-group form-group">\r\n                <input type="text" class="form-control" ng-model="queryParams.taskCreatedAfter" datetime-picker/>\r\n                <span class="input-group-addon">\r\n                  <i class="fa fa-exchange"></i>\r\n                </span>\r\n                <input type="text" class="form-control" ng-model="queryParams.taskCreatedBefore" datetime-picker/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="col-md-6">\r\n            <div class="col-md-3">\r\n              <h4 class="title">是否完成</h4>\r\n            </div>\r\n            <div class="col-md-9">\r\n              <div class="form-group">\r\n                <select class="form-control" ng-model="queryParams.finished">\r\n                  <option value="">全部</option>\r\n                  <option value="true">是</option>\r\n                  <option value="false">否</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n  \r\n          </div>\r\n        </div>\r\n        <div class="row">\r\n          <div class="col-md-6">\r\n            <div class="col-md-3">\r\n              <h4 class="title">结束时间</h4>\r\n            </div>\r\n            <div class="col-md-9">\r\n              <div class="input-daterange input-group form-group">\r\n                <input type="text" class="form-control" ng-model="queryParams.taskCompletedAfter" datetime-picker/>\r\n                <span class="input-group-addon">\r\n                  <i class="fa fa-exchange"></i>\r\n                </span>\r\n                <input type="text" class="form-control" ng-model="queryParams.taskCompletedBefore" datetime-picker/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n  \r\n          <div class="col-md-6">\r\n            <div class="col-md-3">\r\n              <h4 class="title">流程定义</h4>\r\n            </div>\r\n            <div class="col-md-9">\r\n              <div class="input-group form-group">\r\n                <select class="form-control" chosen ng-model="queryParams.processDefinitionId" placeholder-text-single="\'选择流程定义\'" no-results-text="\'没有结果匹配\'">\r\n                  <option value="">全部</option>\r\n                  <option ng-repeat="option in definitions" value="{{option.id}}">{{option.name+\' (v\'+option.version+\')\'}}</option>\r\n                </select>\r\n                <span class="input-group-btn">\r\n                  <button type="button" class="btn btn-info" ng-click="queryTask()">搜索</button>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="card">\r\n      <div class="content">\r\n        <table ng-table="tableOptions" class="table table-striped ng-table">\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n<div class="container-fluid" ng-if="detailId!=\'0\'">\r\n  <div class="card card-detail">\r\n    <div class="header">\r\n      <h4 class="title">\r\n        <span class="text-info right-split">{{selectedItem.processDefinitionName}}</span>{{selectedItem.id}}\r\n        <button type="button" class="btn btn-warning pull-right" ng-click="gotoList()">返回列表</button>\r\n      </h4>\r\n    </div>\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-10">\r\n           <span class="property"><label>ID:</label>{{selectedItem.id}}</span>\r\n           <span class="property"><label>业务标识:</label>{{selectedItem.businessKey}}</span>\r\n           <span class="property"><label>名称:</label>{{selectedItem.processDefinitionName}}</span>\r\n           <span class="property"><label>开始时间:</label>{{selectedItem.startTime}}</span>\r\n           <span class="property"><label>启动人:</label>{{selectedItem.startUserName}}</span>\r\n           <span class="property"><label>启动节点:</label>{{selectedItem.startActivityId}}</span>\r\n           <div ng-if="selectedItem.endTime != null">\r\n             <span class="property"><label>结束时间:</label>{{selectedItem.endTime}}</span>\r\n             <span class="property"><label>状态:</label>结束</span>\r\n           </div>\r\n           <div ng-if="selectedItem.endTime == null">\r\n             <span class="property"><label>状态:</label>{{selectedItem.suspended?\'挂起\':\'激活\'}}</span>\r\n           </div>\r\n           <!-- <span class="property">\r\n           \t <label>流程定义:</label>\r\n           \t <a ui-sref="main.flow.definition({id:selectedItem.processDefinitionId})">\r\n           \t \t<i class="fa fa-search-plus"></i> {{selectedItem.processDefinitionId}}\r\n          \t </a>\r\n           </span> -->\r\n           <span class="property">\r\n             <label>父级实例ID:</label>\r\n             <a ui-sref="main.flow.instance({id:selectedItem.superProcessInstanceId})" ng-show="selectedItem.superProcessInstanceId != null">\r\n           \t \t<i class="fa fa-search-plus"></i> {{selectedItem.superProcessInstanceId}}\r\n          \t </a>\r\n           </span>\r\n           <span class="property"><label>删除理由:</label>{{selectedItem.deleteReason}}</span>\r\n        </div>\r\n        <div class="col-md-2">\r\n          <button type="button" class="btn btn-info btn-block" ng-click="switchStaus(selectedItem.id,false)" ng-show="!selectedItem.suspended&&selectedItem.endTime == null">挂起</button>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="switchStaus(selectedItem.id,true)" ng-show="selectedItem.suspended&&selectedItem.endTime == null">激活</button>\r\n          <button type="button" class="btn btn-danger btn-block" ng-click="deleteInstance(selectedItem)">删除</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card card-detail">\r\n    <div class="content">\r\n      <div class="nav-tabs-navigation">\r\n        <div class="nav-tabs-wrapper">\r\n          <ul uib-tabset active="active" type="tabs">\r\n              <uib-tab index="0" heading="流程图"></uib-tab>\r\n              <!-- <uib-tab index="1" heading="任务列表" select="queryTask(selectedItem.id)"></uib-tab> -->\r\n              <uib-tab index="2" heading="变量列表" select="queryVariable(selectedItem.id)"></uib-tab>\r\n              <uib-tab index="3" heading="子流程" select="queryChildInstance(selectedItem.id)"></uib-tab>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class="tab-content">\r\n          <div class="tab-pane text-center" ng-class="{\'active\':active==0}">\r\n            <img ng-src="{{getImageUrl(detailId)}}" />\r\n          </div>\r\n          <div class="tab-pane" ng-class="{\'active\':active==1}">\r\n            <table ng-table="taskTableOptions" class="table table-striped ng-table">\r\n            </table>\r\n            <br/>\r\n          </div>\r\n          <div class="tab-pane" ng-class="{\'active\':active==2}">\r\n            <table ng-table="variableTableOptions" class="table table-striped ng-table">\r\n            </table>\r\n            <br/>\r\n            <button type="button" class="btn btn-info btn-block" ng-click="createVariable(selectedItem.id)" ng-if="selectedItem.endTime == null">添加变量</button>\r\n          </div>\r\n          <div class="tab-pane" ng-class="{\'active\':active==3}">\r\n            <table ng-table="childrenTableOptions" class="table table-striped ng-table">\r\n            </table>\r\n            <br/>\r\n          </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<script type="text/ng-template" id="instance-delete.html">\r\n  <div class="form-group">\r\n    <label class="control-label">流程名称</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.name" readonly></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">包括历史数据</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.cascade" ng-value="true" /> 是\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.cascade" ng-value="false" ng-checked="true" /> 否\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">删除理由</label> \r\n\t<textarea class="form-control" ng-model="formData.deleteReason" rows="3"></textarea>\r\n  </div>\r\n</script>\r\n\r\n\r\n<script type="text/ng-template" id="variable-create.html">\r\n  <div class="form-group">\r\n    <label class="control-label">变量名称</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.name"></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">变量类型</label> \r\n\t<select class="form-control" ng-model="formData.type" ng-init="formData.type=\'string\'">\r\n      <option value="string">string</option>\r\n      <option value="boolean">boolean</option>\r\n      <option value="date">date</option>\r\n      <option value="double">double</option>\r\n      <option value="long">long</option>\r\n      <option value="integer">integer</option>\r\n      <option value="short">short</option>\r\n      <option value="list">list</option>\r\n    </select>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">变量值</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.value"></input>\r\n  </div>\r\n</script>'),e.put("views/flow/task.html",'<div class="container-fluid" ng-show="detailId==\'0\'">\r\n  <div class="card card-query">\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="col-md-3">\r\n            <h4 class="title">开始时间</h4>\r\n          </div>\r\n          <div class="col-md-9">\r\n            <div class="input-daterange input-group form-group">\r\n              <input type="text" class="form-control" ng-model="queryParams.taskCreatedAfter" datetime-picker/>\r\n              <span class="input-group-addon">\r\n                <i class="fa fa-exchange"></i>\r\n              </span>\r\n              <input type="text" class="form-control" ng-model="queryParams.taskCreatedBefore" datetime-picker/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-6">\r\n          <div class="col-md-3">\r\n            <h4 class="title">是否完成</h4>\r\n          </div>\r\n          <div class="col-md-9">\r\n            <div class="form-group">\r\n              <select class="form-control" ng-model="queryParams.finished">\r\n                <option value="">全部</option>\r\n                <option value="true">是</option>\r\n                <option value="false">否</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n      <div class="row">\r\n        <div class="col-md-6">\r\n          <div class="col-md-3">\r\n            <h4 class="title">结束时间</h4>\r\n          </div>\r\n          <div class="col-md-9">\r\n            <div class="input-daterange input-group form-group">\r\n              <input type="text" class="form-control" ng-model="queryParams.taskCompletedAfter" datetime-picker/>\r\n              <span class="input-group-addon">\r\n                <i class="fa fa-exchange"></i>\r\n              </span>\r\n              <input type="text" class="form-control" ng-model="queryParams.taskCompletedBefore" datetime-picker/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="col-md-6">\r\n          <div class="col-md-3">\r\n            <h4 class="title">流程定义</h4>\r\n          </div>\r\n          <div class="col-md-9">\r\n            <div class="input-group form-group">\r\n              <select class="form-control" chosen ng-model="queryParams.processDefinitionId" placeholder-text-single="\'选择流程定义\'" no-results-text="\'没有结果匹配\'">\r\n                <option value="">全部</option>\r\n                <option ng-repeat="option in definitions" value="{{option.id}}">{{option.name+\' (v\'+option.version+\')\'}}</option>\r\n              </select>\r\n              <span class="input-group-btn">\r\n                <button type="button" class="btn btn-info" ng-click="queryTask()">搜索</button>\r\n              </span>\r\n            </div>\r\n            <!-- <div class="col-md-3">\r\n              <h4 class="title">完成类型</h4>\r\n            </div>\r\n            <div class="col-md-9">\r\n              <div class="input-group form-group">\r\n                <select class="form-control"  ng-model="queryParams.tasktype"> \r\n                  <option value="taskAssignee">负责类型</option>\r\n                  <option value="taskCandidateUser">候选类型</option> \r\n                </select>\r\n                <span class="input-group-btn">\r\n                  <button type="button" class="btn btn-info" ng-click="queryTask()">搜索</button>\r\n                </span>\r\n              </div> -->\r\n          </div>card\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card">\r\n    <div class="content">\r\n      <table ng-table="tableOptions" class="table table-striped ng-table">\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="container-fluid" ng-if="detailId!=\'0\'">\r\n  <div class="card card-detail">\r\n    <div class="header">\r\n      <h4 class="title">\r\n        <span class="text-info right-split">{{selectedItem.name}}</span>{{selectedItem.id}}\r\n        <button type="button" class="btn btn-warning pull-right" ng-click="gotoList()">返回列表</button>\r\n      </h4>\r\n    </div>\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-10">\r\n          <span class="property">\r\n            <label>ID:</label>{{selectedItem.id}}</span>\r\n          <span class="property">\r\n            <label>状态:</label>{{selectedItem.endTime!=null?\'完成\':(selectedItem.suspended?\'挂起\':\'激活\')}}</span>\r\n          <span class="property">\r\n            <label>名称:</label>{{selectedItem.name}}</span>\r\n          <span class="property">\r\n            <label>描述:</label>{{selectedItem.description}}</span>\r\n          <span class="property">\r\n            <label>任务标识:</label>{{selectedItem.taskDefinitionKey}}</span>\r\n          <span class="property">\r\n            <label>表单标识:</label>{{selectedItem.formKey}}</span>\r\n          <span class="property">\r\n            <label>优先级:</label>{{selectedItem.priority}}</span>\r\n          <span class="property">\r\n            <label>委托:</label>{{selectedItem.delegationState==\'pending\'?\'委托中\':\'已处理\'}}</span>\r\n          <span class="property">\r\n            <label>类别:</label>{{selectedItem.category}}</span>\r\n          <span class="property">\r\n            <label>父任务:</label>{{selectedItem.parentTaskId}}</span>\r\n          <hr>\r\n          <span class="property">\r\n            <label>负责人:</label>{{selectedItem.assigneeName}}</span>\r\n          <span class="property">\r\n            <label>所有人:</label>{{selectedItem.ownerName}}</span>\r\n          <span class="property">\r\n            <label>开始时间:</label>{{selectedItem.startTime}}</span>\r\n          <span class="property">\r\n            <label>到期时间:</label>{{selectedItem.dueDate}}</span>\r\n          <div ng-if="selectedItem.endTime != null">\r\n            <span class="property">\r\n              <label>结束时间:</label>{{selectedItem.endTime}}</span>\r\n            <span class="property">\r\n              <label>删除理由:</label>{{selectedItem.deleteReason}}</span>\r\n          </div>\r\n          <hr>\r\n          <!-- <span class="property">\r\n            <label>流程实例:</label>\r\n            <a ui-sref="main.flow.instance({id:selectedItem.processInstanceId})">\r\n              <i class="fa fa-search-plus"></i> {{selectedItem.processInstanceId}}\r\n            </a>\r\n          </span> -->\r\n          <!-- <span class="property">\r\n            <label>流程定义:</label>\r\n            <a ui-sref="main.flow.definition({id:selectedItem.processDefinitionId})">\r\n              <i class="fa fa-search-plus"></i> {{selectedItem.processDefinitionId}}\r\n            </a>\r\n          </span> -->\r\n        </div>\r\n        <div class="col-md-2" ng-if="status==\'\'|| status==null">\r\n          <button type="button" class="btn btn-info btn-block" ng-click="editTask(selectedItem)" ng-show="selectedItem.endTime == null">编辑</button>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="assignTask(selectedItem)" ng-show="selectedItem.endTime == null">转派/认领</button>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="delegateTask(selectedItem)" ng-show="selectedItem.endTime == null">委托</button>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="completeTask(selectedItem)" ng-show="selectedItem.endTime == null">完成</button>\r\n          <button type="button" class="btn btn-danger btn-block" ng-click="backTask(selectedItem)" ng-show="selectedItem.endTime == null">驳回</button>\r\n          <button type="button" class="btn btn-danger btn-block" ng-click="deleteTask(selectedItem)" ng-show="selectedItem.endTime != null">删除</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card card-detail">\r\n    <div class="content">\r\n      <div class="nav-tabs-navigation">\r\n        <div class="nav-tabs-wrapper">\r\n          <ul uib-tabset active="active" type="tabs">\r\n            <uib-tab index="3" heading="表单"></uib-tab>\r\n            <uib-tab index="0" heading="流程图  " select="queryIdentity(selectedItem.id)"></uib-tab>\r\n            <uib-tab index="1" heading="任务变量" select="queryVariable(selectedItem.id)"></uib-tab>\r\n            <uib-tab index="2" heading="候选信息" select="queryIdentity(selectedItem.id)"></uib-tab>\r\n            <uib-tab index="4" heading="流程日志" select="querylogs(selectedItem.id)"></uib-tab>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class="tab-content">\r\n        <div class="tab-pane text-center" ng-class="{\'active\':active==0}"> \r\n          <!-- <img ng-src="{{getImageUrl(selectedItem.processInstanceId,\'\')}}" /> --> \r\n            <img ng-src="{{img}}" alt="">\r\n\r\n        </div>\r\n        <div class="tab-pane" ng-class="{\'active\':active==1}">\r\n          <table ng-table="variableTableOptions" class="table table-striped ng-table">\r\n          </table>\r\n          <br/>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="createVariable(selectedItem.id)" ng-if="selectedItem.endTime == null">添加任务变量</button>\r\n        </div>\r\n        <div class="tab-pane" ng-class="{\'active\':active==2}">\r\n          <table ng-table="identityTableOptions" class="table table-striped ng-table">\r\n          </table>\r\n          <br/>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="createIdentity(selectedItem.id)" ng-if="selectedItem.endTime == null">添加候选信息</button>\r\n        </div>\r\n        <div class="tab-pane" ng-class="{\'active\':active==3}">\r\n          <div ng-repeat="form in forms">\r\n            <div ng-repeat="component in form">\r\n              <div fb-builder-object="component">\r\n              </div>\r\n              <!-- <button type="button" class="btn btn-info btn-block" ng-click="subjson(selectedItem.id,component)" ng-show="selectedItem.endTime == null">提交表单数据</button> -->\r\n            </div>\r\n          </div> \r\n          <button type="button" class="btn btn-info btn-block" style="margin-top: 10px;" ng-click="subjson(selectedItem.id,forms)"\r\n            ng-show="selectedItem.endTime == null && selectedItem.form_update != \'不可填\'">提交表单数据</button>\r\n        </div>\r\n        <div class="tab-pane" ng-class="{\'active\':active==4}">\r\n          <!-- <p>用来放流程日志的数据</p> --> \r\n          <!-- <div ng-repeat="item in tasklogResult"> \r\n            <p>{{$index+1}}.  {{item.time}}, {{item.username}} {{item.status == 0 ?\'反驳\':\'完成\'}}任务 {{item.taskName}}\r\n            <p ng-if="item.status == 2">{{$index+2}}.  {{item.time}}, {{item.username}} 结束整条流程</p>\r\n          </div>  -->\r\n          <table ng-table="logOptions" class="table table-striped ng-table">\r\n          </table>\r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<script type="text/ng-template" id="task-edit.html">\r\n  <div class="form-group">\r\n    <label class="control-label">名称</label> \r\n    <input type="text" class="form-control" ng-model="formData.name"></input>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">分类</label> \r\n    <input type="text" class="form-control" ng-model="formData.category"></input>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">负责人</label> \r\n    <input type="text" class="form-control" ng-model="formData.assignee"></input>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">所有人</label> \r\n    <input type="text" class="form-control" ng-model="formData.owner"></input>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">到期时间</label> \r\n    <input type="text" class="form-control" datetime-picker ng-model="formData.dueDate"></input>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">优先级</label> \r\n    <input type="number" class="form-control" ng-model="formData.priority"></input>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">描述</label> \r\n\t<textarea class="form-control" ng-model="formData.description" rows="3"></textarea>\r\n  </div>\r\n</script>\r\n\r\n<script type="text/ng-template" id="task-user-edit.html">\r\n  <div class="form-group">\r\n    <label class="control-label">任务名称</label> \r\n    <input type="text" class="form-control" ng-model="formData.name" readonly></input>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">转派/委托用户</label> \r\n      <select class="form-control" chosen  ng-model="formData.userId" placeholder-text-single="\'选择用户\'" no-results-text = "\'没有结果匹配\'">\r\n        <option ng-repeat="option in formData.users" value="{{option.id}}">{{option.name+\' (ID:\'+option.id+\')\'}}</option>\r\n      </select>\r\n  </div>\r\n</script>\r\n\r\n\r\n<script type="text/ng-template" id="variable-create.html">\r\n  <div class="form-group">\r\n    <label class="control-label">变量名称</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.name"></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">变量类型</label> \r\n\t<select class="form-control" ng-model="formData.type" ng-init="formData.type=\'string\'">\r\n      <option value="string">string</option>\r\n      <option value="boolean">boolean</option>\r\n      <option value="date">date</option>\r\n      <option value="double">double</option>\r\n      <option value="long">long</option>\r\n      <option value="integer">integer</option>\r\n      <option value="short">short</option>\r\n      <option value="list">list</option>\r\n    </select>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">变量值</label> \r\n  \t<input type="text" class="form-control" ng-model="formData.value"></input>\r\n  </div>\r\n</script>\r\n\r\n\r\n<script type="text/ng-template" id="task-identity-create.html">\r\n  <div class="form-group" ng-init="formData.type=\'user\'">\r\n  \t<label class="control-label">类型</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.type" value="user" /> 人员\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.type" value="group" /> 群组\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group" ng-show="formData.type==\'user\'">\r\n    <label class="control-label">人员</label>  <br/>\r\n\t<isteven-multi-select    \r\n        input-model="formData.users"    \r\n        output-model="formData.user"\r\n        button-label="name"\r\n        item-label="name"\r\n        tick-property="selected"\r\n        orientation="horizontal"\r\n    \tselection-mode="single"\r\n        translation="multiSelectLang">\r\n   </isteven-multi-select>\r\n  </div>\r\n  \r\n  <div class="form-group" ng-show="formData.type==\'group\'">\r\n    <label class="control-label">群组</label>  <br/>\r\n    <isteven-multi-select    \r\n        input-model="formData.groups"    \r\n        output-model="formData.group"\r\n        button-label="name"\r\n        item-label="name"\r\n        tick-property="selected"\r\n        group-property="group"\r\n    \tselection-mode="single"\r\n        translation="multiSelectLang">\r\n   </isteven-multi-select>\r\n  </div>\r\n</script>'),e.put("views/idm/group.html",'<div class="container-fluid">\r\n  <div class="card card-query">\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-3">\r\n          <h4 class="title">群组状态</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" ng-model="queryParams.status">\r\n              <option value="">全部</option>\r\n              <option value="0">启用</option>\r\n              <option value="1">停用</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-9">\r\n          <h4 class="title">群组名称</h4>\r\n            <div class="input-group form-group">\r\n              <input type="text" ng-model="queryParams.name" class="form-control" placeholder="输入群组名称">\r\n              <span class="input-group-btn">\r\n                <button type="button" class="btn btn-info" ng-click="queryGroup()">搜索</button>\r\n                <button type="button" class="btn btn-info" ng-click="editGroup()">创建</button>\r\n              </span>\r\n            </div>\r\n      </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card ">\r\n    <div class="content">\r\n      <h4 class="title" ng-show="parentId!=0"> \r\n        <span class="label label-info"><i class="fa fa-align-right"></i> 上级：{{parentGroup.name}}</span>\r\n        <button type="button" class="btn btn-warning  pull-right" ng-click="gotoList(parentGroup.parentId)">返回上级</button>\r\n      </h4>\r\n      <table ng-table="tableOptions" class="table table-striped ng-table">\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<script type="text/ng-template" id="group-edit.html">\r\n  <div class="form-group" ng-show="formData.parentId!=0">\r\n    <label class="control-label">父级</label> \r\n  \t<input type="text" readonly class="form-control" ng-model="formData.parentName"></input>\r\n  </div>\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.name.$error.required}">\r\n    <label class="control-label">名称</label> \r\n  \t<input type="text" class="form-control" name="name" ng-model="formData.name" required></input>\r\n  </div>\r\n  \r\n  <div class="form-group">\r\n  \t<label class="control-label">类型</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.type" ng-value="0" ng-checked="true" /> 父级\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.type" ng-value="1" /> 子级\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n\r\n  <div class="form-group">\r\n    <label class="control-label">排序</label> \r\n    <input type="number" class="form-control" ng-model="formData.order"></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">状态</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.status" ng-value="0" ng-checked="true" /> 启用\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.status" ng-value="1" /> 停用\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">描述</label> \r\n\t<textarea class="form-control" ng-model="formData.remark" rows="3"></textarea>\r\n  </div>\r\n</script>\r\n\r\n'),e.put("views/idm/menu.html",'<div class="container-fluid">\r\n  <div class="card card-query">\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-3">\r\n          <h4 class="title">菜单状态</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" ng-model="queryParams.status">\r\n              <option value="">全部</option>\r\n              <option value="0">启用</option>\r\n              <option value="1">停用</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-9">\r\n          <h4 class="title">菜单名称</h4>\r\n          <div class="input-group form-group">\r\n            <input type="text" ng-model="queryParams.name" class="form-control" placeholder="输入菜单名称">\r\n            <span class="input-group-btn">\r\n              <button type="button" class="btn btn-info" ng-click="queryMenu()">搜索</button>\r\n              <button type="button" class="btn btn-info" ng-click="editMenu()">创建</button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>  \r\n  <div class="card">\r\n    <div class="content">\r\n      <h4 class="title" ng-show="parentMenu.id!=0"> \r\n        <span class="label label-info"><i class="fa fa-align-right"></i> 上级：{{parentMenu.name}}</span>\r\n        <button type="button" class="btn btn-warning  pull-right" ng-click="gotoList()">返回上级</button>\r\n      </h4>\r\n      <table ng-table="tableOptions" class="table table-striped ng-table">\r\n      </table>\r\n    </div>\r\n  </div>\r\n  \r\n</div>\r\n\r\n\r\n<script type="text/ng-template" id="menu-edit.html">\r\n  <div class="form-group" ng-show="formData.parentId!=0">\r\n    <label class="control-label">父级</label> \r\n  \t<input type="text" readonly class="form-control" ng-model="formData.parentName"></input>\r\n  </div>\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.name.$error.required}">\r\n    <label class="control-label">名称</label> \r\n  \t<input type="text" class="form-control" name="name" ng-model="formData.name" required></input>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">路径</label> \r\n    <input type="text" class="form-control" ng-model="formData.route"></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">状态</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.status" ng-value="0" ng-checked="true" /> 启用\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.status" ng-value="1" /> 停用\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.icon.$error.required}">\r\n    <label class="control-label">图标</label> \r\n\t<div class="input-group">\r\n    <input type="text" class="form-control"  name="icon" ng-model="formData.icon" readonly required>\r\n    <span class="input-group-btn">\r\n        <button class="btn btn-default" ng-iconpicker ng-model="formData.icon" role="iconpicker"></button>\r\n    </span>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">排序</label> \r\n    <input type="number" class="form-control" ng-model="formData.order"></input>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">描述</label> \r\n\t<textarea class="form-control" ng-model="formData.remark" rows="3"></textarea>\r\n  </div>\r\n</script>\r\n\r\n'),e.put("views/idm/role.html",'<div class="container-fluid">\r\n  <div class="card card-query">\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-3">\r\n          <h4 class="title">角色状态</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" ng-model="queryParams.status">\r\n              <option value="">全部</option>\r\n              <option value="0">启用</option>\r\n              <option value="1">停用</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-9">\r\n          <h4 class="title">角色名称</h4>\r\n          <div class="input-group form-group">\r\n            <input type="text" ng-model="query.name" class="form-control" placeholder="输入角色名称">\r\n            <span class="input-group-btn">\r\n              <button type="button" class="btn btn-info" ng-click="queryRole()">搜索</button>\r\n              <button type="button" class="btn btn-info" ng-click="editRole()">创建</button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>  \r\n  <div class="card">\r\n   \t<div class="content">\r\n      <table ng-table="tableOptions" class="table table-striped ng-table">\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<script type="text/ng-template" id="role-edit.html">\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.name.$error.required}">\r\n    <label class="control-label">名称</label> \r\n  \t<input type="text" placeholder="名称" class="form-control" name="name" ng-model="formData.name" required></input>\r\n  </div>\r\n\r\n  <div class="form-group">\r\n    <label class="control-label">状态</label> \r\n\t<div>\r\n      <label class="radio-inline"> \r\n\t\t<input ng-icheck type="radio" ng-model="formData.status" ng-value="0" ng-checked="true" /> 启用\r\n      </label>\r\n      <label class="radio-inline"> \r\n\t\t<input ng-icheck type="radio" ng-model="formData.status" ng-value="1" /> 停用\r\n\t  </label>\r\n\t</div>\r\n  </div>\r\n\r\n  <div class="form-group">\r\n  \t<label class="control-label">菜单权限</label> <br/>\r\n    <isteven-multi-select    \r\n        input-model="formData.menus"    \r\n        output-model="formData.roleMenus"\r\n        button-label="name"\r\n        item-label="name"\r\n        tick-property="selected"\r\n        orientation="horizontal"\r\n        group-property="group"\r\n        translation="multiSelectLang">\r\n    </isteven-multi-select>\r\n  </div>\r\n\r\n  <div class="form-group">\r\n  \t<label class="control-label">备注</label> \r\n\t<textarea placeholder="备注" class="form-control" ng-model="formData.remark" rows="3"></textarea>\r\n  </div>\r\n</script>\r\n'),
e.put("views/idm/type.html",'<div class="container-fluid">\r\n  <div class="card card-query">\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-3">\r\n          <h4 class="title">分类状态</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" ng-model="queryParams.status">\r\n              <option value="">全部</option>\r\n              <option value="0">启用</option>\r\n              <option value="1">停用</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class="col-md-9">\r\n          <h4 class="title">分类名称</h4>\r\n          <div class="input-group form-group">\r\n            <input type="text" ng-model="queryParams.name" class="form-control" placeholder="输入分类名称">\r\n            <span class="input-group-btn">\r\n              <button type="button" class="btn btn-info" ng-click="queryGroup()">搜索</button>\r\n              <button type="button" class="btn btn-info" ng-click="editGroup()">创建</button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card">\r\n    <div class="content">\r\n      <h4 class="title" ng-show="parentId!=0">\r\n        <span class="label label-info">\r\n          <i class="fa fa-align-right"></i> 上级：{{parentGroup.moduleType}}</span>\r\n        <button type="button" class="btn btn-warning  pull-right" ng-click="gotoList(parentGroup.parentId)">返回上级</button>\r\n      </h4>\r\n      <table ng-table="tableOptions" class="table table-striped ng-table">\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<script type="text/ng-template" id="group-edit.html">\r\n  <div class="form-group" ng-show="formData.parentId!=0">\r\n    <label class="control-label">父级</label> \r\n  \t<input type="text" readonly class="form-control" ng-model="formData.parentName"></input>\r\n  </div>\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.name.$error.required}">\r\n    <label class="control-label">名称</label> \r\n  \t<input type="text" class="form-control" name="name" ng-model="formData.moduleType" required></input>\r\n  </div>\r\n  \r\n  <!-- <div class="form-group">\r\n  \t<label class="control-label">类型</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.parentId" ng-value="0" ng-checked="true" /> 父级\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.parentId" ng-value="1" /> 子级\r\n\t\t</label>\r\n\t</div>\r\n  </div> -->\r\n\r\n  <!-- <div class="form-group">\r\n    <label class="control-label">排序</label> \r\n    <input type="number" class="form-control" ng-model="formData.order"></input>\r\n  </div> -->\r\n  <div class="form-group">\r\n  \t<label class="control-label">状态</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.status" ng-value="0" ng-checked="true" /> 启用\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.status" ng-value="1" /> 停用\r\n\t\t</label>\r\n\t</div>\r\n  </div>\r\n  <div class="form-group">\r\n  \t<label class="control-label">描述</label> \r\n\t<textarea class="form-control" ng-model="formData.remark" rows="3"></textarea>\r\n  </div>\r\n</script>'),e.put("views/idm/user.html",'<div class="container-fluid">\r\n  <div class="card card-query">\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <h4 class="title">状态</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" ng-model="queryParams.status">\r\n              <option value="">全部</option>\r\n              <option value="0">启用</option>\r\n              <option value="1">停用</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <!-- <div class="col-md-4">\r\n          <h4 class="title">用户电话</h4>\r\n          <div class="form-group">\r\n            <input type="text" ng-model="queryParams.phone" class="form-control" placeholder="输入用户电话">\r\n          </div>\r\n        </div> -->\r\n        <div class="col-md-8">\r\n          <h4 class="title">用户名称</h4>\r\n          <div class="input-group form-group">\r\n            <input type="text" ng-model="queryParams.name" class="form-control" placeholder="输入用户名称">\r\n            <span class="input-group-btn">\r\n              <button type="button" class="btn btn-info" ng-click="queryUser()">搜索</button>\r\n              <!-- <button type="button" class="btn btn-info" ng-click="editUser()">创建</button> -->\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div ng-pagination ng-model="queryResult.total" changed="queryUser" param="queryParams"></div>  \r\n    </div>\r\n  </div>\r\n\r\n  <div class="row">\r\n    <div class="col-lg-3 col-sm-6" ng-repeat="item in queryResult.data">\r\n      <div class="card card-person">\r\n        <div class="content">\r\n          <div class="row">\r\n            <div class="col-xs-7">\r\n              <span class="label label-primary"><i class="fa fa-user"></i> {{item.name}}</span><br/> \r\n              <!-- <span class="label label-danger"><i class="fa fa-phone"></i> {{item.phone}}</span><br/>\r\n              <span class="label label-warning"><i class="fa fa-calendar-times-o"></i> {{item.lastUpdateTime}}</span> -->\r\n            </div>\r\n            <div class="col-xs-5">\r\n                <image class="avatar border-white" ng-src="{{item.avatar}}"></image>\r\n            </div>\r\n          </div>\r\n          <div class="footer text-right">\r\n            <hr />\r\n            <span class="pull-left" ng-if="item.status==0"><i class="fa fa-circle text-info"></i> 启用</span>\r\n            <span class="pull-left" ng-if="item.status==1"><i class="fa fa-circle text-danger"></i> 停用</span>\r\n            <button type="button" class="btn btn-xs btn-info" ng-click="editUser(item.id)"><i class="fa fa-pencil"></i>编辑</button>\r\n            <!-- <button type="button" class="btn btn-xs btn-danger" ng-click="deleteUser(item.id)"><i class="fa fa-trash-o"></i>删除</button> -->\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n  \r\n<script type="text/ng-template" id="user-edit.html">\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.userName.$error.required}">\r\n    <label class="control-label">登录账户</label> \r\n    <input type="text" placeholder="登录账户" class="form-control" name="userName" ng-model="formData.userName\r\n    " required ng-readonly="formData.id"></input>\r\n  </div> \r\n  <div class="form-group" ng-class="{\'has-error\':editForm.name.$error.required}">\r\n    <label class="control-label">姓名</label> \r\n\t<input type="text" placeholder="姓名" class="form-control" name="name" ng-model="formData.name" required ng-readonly="formData.id"></input>\r\n  </div>\r\n  <!-- <div class="form-group" ng-class="{\'has-error\':editForm.password.$error.required||editForm.password.$error.minlength}">\r\n    <label class="control-label">密码</label> \r\n    <input type="text" placeholder="电话" class="form-control" name="password" ng-minlength="6" ng-model="formData.password" required></input>\r\n  \t<span ng-show="editForm.password.$error.minlength" class="help-block">位数不能低于6位</span>\r\n  </div> -->\r\n  <!-- <div class="form-group">\r\n  \t<label class="control-label">状态</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.status" ng-value="0" ng-checked="true" /> 启用\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.status" ng-value="1" /> 停用\r\n\t\t</label>\r\n\t</div>\r\n  </div> --> \r\n <div class="form-group">\r\n  \t<label class="control-label">所属角色</label> <br/>\r\n    <isteven-multi-select    \r\n        input-model="formData.roles"    \r\n        output-model="formData.userRoles"\r\n        button-label="name"\r\n        item-label="name"\r\n        tick-property="selected"\r\n        orientation="horizontal"\r\n        group-property="group"\r\n        translation="multiSelectLang">\r\n   </isteven-multi-select>\r\n  </div>\r\n <div class="form-group">\r\n  \t<label class="control-label">所属群组</label> <br/>\r\n    <isteven-multi-select    \r\n        input-model="formData.groups"    \r\n        output-model="formData.userGroups"\r\n        button-label="name"\r\n        item-label="name"\r\n        tick-property="selected"\r\n        group-property="group"\r\n        translation="multiSelectLang">\r\n   </isteven-multi-select>\r\n  </div>\r\n  <!-- {{group}}\r\n  {{formData.userGroups}}\r\n  {{formData.groups}} -->\r\n <!-- <div class="form-group">\r\n    <label class="control-label">备注</label>\r\n    <textarea placeholder="备注" class="form-control" ng-model="formData.remark" rows="3"></textarea>\r\n  </div> -->\r\n</script>\r\n'),e.put("views/modeler/flow.html",'<div class="container-fluid" ng-show="detailId==0">\r\n  <div class="card card-query">\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <h4 class="title">模型分类</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" name="category" ng-model="queryParams.category" ng-init="queryParams.category=\'\'">\r\n              <option value="">全部</option>\r\n              <option ng-repeat="item in category" value="{{item.moduleType}}" >{{item.moduleType}}</option>\r\n            </select> \r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n          <h4 class="title">模型标识</h4>\r\n          <div class="form-group">\r\n            <input type="text" ng-model="queryParams.key" class="form-control" placeholder="输入标识">\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n          <h4 class="title">模型名称</h4>\r\n          <div class="input-group">\r\n            <input type="text" ng-model="queryParams.name" class="form-control" placeholder="输入名称">\r\n            <span class="input-group-btn">\r\n              <button type="button" class="btn btn-info" ng-click="queryModel()">搜索</button>\r\n              <button type="button" class="btn btn-info" ng-click="importModel()">导入</button>\r\n              <button type="button" class="btn btn-info" ng-click="editModel()">创建</button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div ng-pagination ng-model="queryResult.total" changed="queryModel" param="queryParams"></div>\r\n    </div>\r\n  </div>\r\n\r\n  <ul class="image-thumbnails">\r\n    <li ng-repeat="item in queryResult.data">\r\n      <a href="{{getImageUrl(item.id)}}" title="{{item.name}}" data-rel="colorbox" colorbox>\r\n        <img ng-src="{{getImageUrl(item.id)}}" />\r\n        <div class="tags tags-top">\r\n          <span class="label-holder">\r\n            <span class="badge">v{{item.version}}</span>\r\n          </span>\r\n        </div>\r\n        <div class="tags">\r\n          <span class="label-holder">\r\n            <span class="label label-info">\r\n              <i class="fa fa-sitemap"></i> {{item.name}}-{{item.key}}</span>\r\n          </span>\r\n          <span class="label-holder">\r\n            <span class="label label-danger">\r\n              <i class="fa fa-calendar-times-o"></i> {{item.lastUpdateTime}}</span>\r\n          </span>\r\n        </div>\r\n      </a>\r\n      <div class="tools tools-top">\r\n        <a href="" ng-click="gotoDetail(item.id)">\r\n          <i class="fa fa-edit">流程采编</i>\r\n        </a>\r\n      </div>\r\n    </li>\r\n  </ul>\r\n</div>\r\n\r\n<div class="container-fluid" ng-if="detailId!=0">\r\n  <div class="card card-detail">\r\n    <div class="header">\r\n      <h4 class="title">\r\n        <span class="text-info right-split">v{{selectedItem.version}}</span>{{selectedItem.name}}\r\n        <button type="button" class="btn btn-warning pull-right" ng-click="gotoList()">返回列表</button>\r\n      </h4>\r\n    </div>\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-4">\r\n          <span class="label label-success pull-left">标识：{{selectedItem.key}}</span>\r\n          <br/>\r\n          <!-- <span class="label label-success pull-left">流程分类：{{selectedItem.category}}</span>\r\n          <br/> -->\r\n          <span class="label label-success pull-left">备注：{{selectedItem.description}}</span>\r\n          <br/>\r\n          <span class="label label-success pull-left">最后修改时间：{{selectedItem.lastUpdateTime}}</span>\r\n        </div>\r\n        <div class="col-md-8 text-right">\r\n          <div class="btn-group" uib-dropdown>\r\n            <button type="button" class="btn btn-info" uib-dropdown-toggle>\r\n              版本\r\n              <span class="badge">{{selectedItem.version}}</span>\r\n              <span class="caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu">\r\n              <li ng-repeat="num in versionArray()">\r\n                <a href="" ng-click="queryHistory(selectedItem.key,num)">版本：{{num}}</a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div class="btn-group">\r\n            <!-- <button type="button" class="btn btn-info" ng-click="editModel(selectedItem.id)" ng-disabled="!lastVersion">编辑</button> -->\r\n            <button type="button" class="btn btn-info" ng-click="copyModel(selectedItem)">复制</button>\r\n            <button type="button" class="btn btn-info" ng-click="deleteModel(selectedItem.id)" ng-disabled="!lastVersion">删除</button>\r\n          </div>\r\n          <div class="btn-group">\r\n            <button type="button" class="btn btn-info" ng-click="deployModel(selectedItem.id)" ng-disabled="!lastVersion">部署</button>\r\n            <button type="button" class="btn btn-info" ng-click="exportModel(selectedItem)">导出</button>\r\n          </div>\r\n          <button type="button" class="btn btn-info" ng-click="designModel(selectedItem.id)" ng-show="lastVersion">可视化设计</button>\r\n          <button type="button" class="btn btn-info" ng-click="newestModel(selectedItem)" ng-show="!lastVersion">变成新版本</button>\r\n        </div>\r\n      </div>\r\n      <div class="text-center">\r\n        <img ng-src="{{getImageUrl(selectedItem.id)}}" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<script type="text/ng-template" id="flow-model-edit.html">  \r\n  <div class="form-group" ng-class="{\'has-error\':editForm.name.$error.required}">\r\n    <label class="control-label">模型名称</label> \r\n    <input type="text" placeholder="模型名称" class="form-control" name="name" ng-model="formData.name" required></input>\r\n  </div>\r\n\t<div class="form-group" ng-class="{\'has-error\':editForm.key.$error.required}">\r\n    <label class="control-label">模型标识</label> \r\n    <input type="text" placeholder="模型标识" class="form-control" name="key" ng-model="formData.key" required></input>\r\n  </div>\r\n\t<!-- <div class="form-group" ng-class="{\'has-error\':editForm.key.$error.required}">\r\n    <label class="control-label">模型标识</label> \r\n    <input type="text" placeholder="模型标识" class="form-control" name="key" ng-model="formData.key.validation" value="[number]" required></input>\r\n  </div> -->\r\n  <!-- <label class="radio-inline"> <input type="radio"\r\n    ng-model="component.properties.validation" value="[number]" />数字\r\n  </label> -->\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.key.$error.required}" style="position: relative;" >\r\n    <label class="control-label">模型分类</label>\r\n    <input type="text" placeholder="模型分类" class="form-control" name="category" ng-model="formData.category" ng-blur="bb()"   ng-focus="aa(formData.category)" ng-change="cc(formData.category)"   required></input>\r\n    <div class="groupView" ng-show="toggle">\r\n        <ul class="groupColumn"  >\r\n          <li class="groupItem" ng-repeat="item in category"  ng-click="selectGroup(item.moduleType)" id="groupColumn">\r\n            {{item.moduleType}}\r\n            <div class="pull-right" style="padding-right:15px;"><i id="groupColumn" ng-click="deleteGroup(item.id)"  class="fa fa-trash-o"></i></div>\r\n           </li>\r\n           <li class="groupItem groupCreate" ng-show="toggle1" ng-click="selectGroup(formData.category)">创建新分类"{{formData.category}}"</li>\r\n        </ul>\r\n    </div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">备注</label>\r\n    <textarea placeholder="备注" class="form-control" ng-model="formData.description" rows="3" val  ue=""></textarea>\r\n  </div>\r\n</script>\r\n\r\n<script type="text/ng-template" id="flow-model-import.html">\r\n  <input type="file" class="form-control" multiple file-input="fileOptions" ng-model="formData.file" >\r\n</script>'),e.put("views/modeler/form.html",'<div class="container-fluid" ng-show="detailId==\'0\'">\r\n  <div class="card card-query">\r\n    <div class="content">\r\n      <div class="row">\r\n        <!-- <div class="col-md-2">\r\n          <h4 class="title">状态</h4>\r\n          <div class="form-group">\r\n            <select class="form-control" ng-model="queryParams.status">\r\n              <option value="">全部</option>\r\n              <option value="0">启用</option>\r\n              <option value="1">停用</option>\r\n            </select>\r\n          </div>\r\n        </div> -->\r\n        <div class="col-md-4">\r\n          <h4 class="title">标识</h4>\r\n          <div class="form-group">\r\n            <input type="text" ng-model="queryParams.key" class="form-control" placeholder="输入表单标识">\r\n          </div>\r\n        </div>\r\n        <div class="col-md-4">\r\n            <h4 class="title">分类</h4>\r\n            <div class="form-group">\r\n              <select class="form-control" name="category" ng-model="queryParams.category" ng-init="queryParams.category=\'\'">\r\n                <option value="">全部</option>\r\n                <option ng-repeat="item in category" value="{{item.moduleType}}" >{{item.moduleType}}</option>\r\n              </select> \r\n            </div>\r\n          </div>\r\n        <div class="col-md-4">\r\n          <h4 class="title">名称</h4>\r\n          <div class="input-group form-group">\r\n            <input type="text" ng-model="queryParams.name" class="form-control" placeholder="输入表单名称">\r\n            <span class="input-group-btn">\r\n              <button type="button" class="btn btn-info" ng-click="queryFormTable()">搜索</button>\r\n              <button type="button" class="btn btn-info" ng-click="editFormTable()">创建</button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div ng-pagination ng-model="queryResult.total" changed="queryFormTable" param="queryParams"></div>  \r\n    </div>\r\n  </div>\r\n\r\n  <div class="row">\r\n    <div class="col-lg-3 col-sm-6" ng-repeat="item in queryResult.data">\r\n      <div class="card card-person">\r\n        <div class="content">\r\n          <div class="row">\r\n            <div class="col-xs-12">\r\n             <span class="property"><label>名称:</label>{{item.name}}</span><br/>\r\n             <span class="property"><label>标识:</label>{{item.key}}</span><br/>\r\n             <span class="property"><label>分类:</label>{{item.category}}</span><br/>\r\n             <span class="property"><label>修改时间:</label>{{item.lastUpdateTime}}</span>\r\n         \t</div>\r\n          </div>\r\n          <div class="footer text-right">\r\n            <hr />\r\n            <button type="button" class="btn btn-xs btn-info btn-block" ng-click="gotoDetail(item.id)"><i class="fa fa-pencil"></i>编辑</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="container-fluid" ng-if="detailId!=\'0\'">\r\n  <div class="card card-detail">\r\n    <div class="header">\r\n      <h4 class="title">\r\n        {{selectedItem.name}}\r\n        <button type="button" class="btn btn-warning pull-right" ng-click="gotoList()">返回列表</button>\r\n      </h4>\r\n    </div>\r\n    <div class="content">\r\n      <div class="row">\r\n        <div class="col-md-10">\r\n           <span class="property"><label>ID:</label>{{selectedItem.id}}</span>\r\n           <span class="property"><label>名称:</label>{{selectedItem.name}}</span>\r\n           <span class="property"><label>标识:</label>{{selectedItem.key}}</span>\r\n           <span class="property"><label>分类:</label>{{selectedItem.category}}</span>\r\n           <span class="property"><label>备注:</label>{{selectedItem.remark}}</span>\r\n           <span class="property"><label>创建时间:</label>{{selectedItem.createTime}}</span>\r\n           <span class="property"><label>最后修改时间:</label>{{selectedItem.lastUpdateTime}}</span>\r\n        </div>\r\n        <div class="col-md-2">\r\n          <button type="button" class="btn btn-info btn-block" ng-click="editFormTable(selectedItem.id)">编辑</button>\r\n          <!-- <button type="button" class="btn btn-danger btn-block" ng-click="deleteDefinition(selectedItem)">删除</button> -->\r\n          <button type="button" class="btn btn-danger btn-block" ng-click="deleteFormTable(selectedItem.id)">删除</button>\r\n          <button type="button" class="btn btn-info btn-block" ng-click="exportDefinition(selectedItem.id)">部署</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="card card-detail">\r\n    <div class="header">\r\n      <h4 class="title">\r\n                  表单字段\r\n                  <!-- 这就很牛b了，我居然找不到这个添加方法。。。。 -->\r\n        <button type="button" class="btn btn-info pull-right" ng-click="editFormField()">创建</button>\r\n      </h4>\r\n    </div>\r\n    <div class="content">\r\n \t  <table ng-table="fieldTableOptions" class="table table-striped ng-table">\r\n      </table>\r\n    </div>\r\n  </div>\r\n  \r\n  <div class="card card-detail">\r\n    <div class="header">\r\n      <h4 class="title">\r\n                  布局设计\r\n        <button type="button" class="btn btn-info pull-right" ng-click="editFormLayout()">创建</button>\r\n      </h4>\r\n    </div>\r\n    <div class="content">\r\n \t  <table ng-table="layoutTableOptions" class="table table-striped ng-table">\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<script type="text/ng-template" id="form-table-edit.html">\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.name.$error.required}">\r\n    <label class="control-label">表单名称</label> \r\n    <input type="text" placeholder="表单名称" class="form-control" name="name" ng-model="formData.name" required></input>\r\n  </div>\r\n  <!-- 表单标识有问题。   加了跟没加一样，后端给自动生成一段代码了。 -->\r\n  <!-- <div class="form-group" ng-class="{\'has-error\':editForm.key.$error.required}">\r\n    <label class="control-label">表单标识</label> \r\n    <input type="text" placeholder="表单标识" class="form-control" name="key" ng-model="formData.key" required></input>\r\n  </div> -->\r\n\r\n  <!-- <div class="form-group" ng-class="{\'has-error\':editForm.category.$error.required}">\r\n    <label class="control-label">表单分类</label> \r\n    <input type="text" placeholder="表单分类" class="form-control" name="category" ng-model="formData.category" required></input>\r\n  </div> -->\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.key.$error.required}" style="position: relative;" >\r\n      <label class="control-label">表单分类</label>\r\n      <input type="text" placeholder="表单分类" class="form-control" name="category" ng-model="formData.category" ng-blur="bb()"   ng-focus="aa(formData.category)" ng-change="cc(formData.category)"   required></input>\r\n      <div class="groupView" ng-show="toggle">\r\n          <ul class="groupColumn"  >\r\n            <li class="groupItem" ng-repeat="item in category"  ng-click="selectGroup(item.moduleType)" id="groupColumn">\r\n              {{item.moduleType}}\r\n              <div class="pull-right" style="padding-right:15px;"><i id="groupColumn" ng-click="deleteGroup(item.id)"  class="fa fa-trash-o"></i></div>\r\n             </li>\r\n             <li class="groupItem groupCreate" ng-show="toggle1" ng-click="selectGroup(formData.category)">创建新分类"{{formData.category}}"</li>\r\n          </ul>\r\n      </div>\r\n  </div>\r\n\r\n  <div class="form-group">\r\n    <label class="control-label">备注</label>\r\n    <textarea placeholder="备注" class="form-control" ng-model="formData.remark" rows="3"></textarea>\r\n  </div>\r\n</script>\r\n\r\n\r\n\r\n<script type="text/ng-template" id="form-field-edit.html">\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.name.$error.required}">\r\n    <label class="control-label">字段名称</label> \r\n    <input type="text" placeholder="字段名称" class="form-control" name="name" ng-model="formData.name" required></input>\r\n  </div>\r\n  <!-- <div class="form-group">\r\n\t<label class="control-label">类型</label> \r\n\t<div>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.type" ng-value="0" ng-checked="true" /> varchar\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.type" ng-value="1" /> int\r\n\t\t</label>\r\n\t\t<label class="radio-inline"> \r\n\t\t\t<input ng-icheck type="radio" ng-model="formData.type" ng-value="2" /> float\r\n\t\t</label>\r\n\t</div>\r\n  </div> -->\r\n  \r\n  <!-- <div class="form-group">\r\n  <label class="control-label">类型</label>\r\n  <div>\r\n    <select ng-model="formData.type" class="form-control">\r\n        <option ng-repeat="item in category" value="item.id" ng-if="$index>0">{{item.moduleType}}</option>\r\n        <option ng-repeat="item in category" value="item.id" ng-if="$index==0" ng-selected="1">{{item.moduleType}}</option>\r\n    </select>\r\n  </div>\r\n  </div> -->\r\n  <div class="form-group" style="position:relative;">\r\n    <label class="control-label">类型</label>\r\n    <div>\r\n        <input type="text" placeholder="表单类型" class="form-control" name="category" ng-model="formData.type" ng-blur="bb()"  ng-focus="aa()" ng-change="cc(formData.type)"   required></input>\r\n        <div class="groupView" ng-show="toggle">\r\n            <ul class="groupColumn">\r\n              <!-- {{types}}{{count}}{{item.id}} -->\r\n              <li class="groupItem" ng-repeat="item in types"  ng-click="selectGroup(item.name)" id="groupColumn" ng-if="count>0">\r\n                {{item.name}}   \r\n                <div class="pull-right" style="padding-right:15px;"><i id="groupColumn" ng-click="deleteGroup(item.id)"  class="fa fa-trash-o"></i></div>\r\n              </li>\r\n              <li class="groupItem groupCreate" ng-show="toggle1" ng-click="selectGroup(formData.name)" ng-if="count>0">创建新分类" {{formData.type}} "</li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n  </div>\r\n    \r\n  <div class="form-group">\r\n    <label class="control-label">备注</label>\r\n    <textarea placeholder="备注" class="form-control" ng-model="formData.remark" rows="3"></textarea>\r\n  </div>\r\n</script>\r\n\r\n\r\n<script type="text/ng-template" id="form-layout-edit.html">\r\n  <div class="form-group" ng-class="{\'has-error\':editForm.name.$error.required}">\r\n    <label class="control-label">布局名称</label> \r\n    <input type="text" placeholder="表单名称" class="form-control" name="name" ng-model="formData.name" required></input>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="control-label">备注</label>\r\n    <textarea placeholder="备注" class="form-control" ng-model="formData.remark" rows="3"></textarea>\r\n  </div>\r\n</script>')}]);