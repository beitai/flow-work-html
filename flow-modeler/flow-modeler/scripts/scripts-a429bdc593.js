"use strict";var _internalCreateModal=function(e,t,i){return null!==i&&void 0!==i?(i.modal=t(e),i.$on("$routeChangeStart",function(){i.modal&&i.modal.hide()}),i.modal):t(e)},flowableModeler=angular.module("flowableModeler",["ngCookies","ngResource","ngSanitize","ngRoute","ngDragDrop","mgcrea.ngStrap","ui.grid","ui.grid.edit","ui.grid.selection","ui.grid.autoResize","ui.grid.moveColumns","ui.grid.cellNav","ngAnimate","pascalprecht.translate","duScroll"]),flowableModule=flowableModeler,flowableApp=flowableModeler;flowableModeler.config(["$provide","$routeProvider","$selectProvider","$translateProvider",function(e,t,i,n){var s=FLOWABLE.CONFIG.webContextRoot+(FLOWABLE.CONFIG.webContextRoot?"/":"");e.value("appResourceRoot",s),angular.extend(i.defaults,{caretHtml:'&nbsp;<i class="icon icon-caret-down"></i>'}),t.when("/editor/:modelId",{templateUrl:"views/editor.html",controller:"EditorController",params:{token:null}}),t.when("/",{redirectTo:"/editor/:modelId"}),n.useStaticFilesLoader({prefix:"./i18n/",suffix:".json"}).useSanitizeValueStrategy("sanitizeParameters").uniformLanguageTag("bcp47").determinePreferredLanguage()}]).run(["$rootScope","$timeout","$modal","$translate","$location","$http","$window","appResourceRoot",function(e,t,i,n,s,a,o,l){n.fallbackLanguage(["en"]),e.restRootUrl=function(){return FLOWABLE.CONFIG.contextRoot},e.appResourceRoot=l,e.window={};var r=function(){e.window.width=o.innerWidth,e.window.height=o.innerHeight};angular.element(o).bind("resize",function(){e.safeApply(r())}),e.$watch("window.forceRefresh",function(i){i&&t(function(){r(),e.window.forceRefresh=!1})}),r(),e.config=FLOWABLE.CONFIG,e.editorHistory=[],e.safeApply=function(e){var t=this.$root.$$phase;"$apply"==t||"$digest"==t?e&&"function"==typeof e&&e():this.$apply(e)},e.alerts={queue:[]},e.showAlert=function(i){i.queue.length>0?(i.current=i.queue.shift(),i.timeout=t(function(){0==i.queue.length?(i.current=void 0,i.timeout=void 0):e.showAlert(i)},"error"==i.current.type?5e3:1e3)):e.alerts.current=void 0},e.addAlert=function(t,i){var n={message:t,type:i};e.alerts.timeout?e.alerts.queue.push(n):(e.alerts.queue.push(n),e.showAlert(e.alerts))},e.dismissAlert=function(){e.alerts.timeout?(t.cancel(e.alerts.timeout),e.alerts.timeout=void 0,e.showAlert(e.alerts)):e.alerts.current=void 0},e.addAlertPromise=function(t,i){t&&t.then(function(t){e.addAlert(t,i)})}}]).run(["$rootScope","$location","$translate","$window","$modal",function(e,t,i,n,s){var a="/editor/";e.backToLanding=function(){var e=t.absUrl(),i=e.indexOf(a);i>=0&&(e=e.substring(0,i),e+="/"),n.location.href=e}}]).filter("dateformat",function(){return function(e,t){return e?t?moment(e).format(t):moment(e).calendar():""}});var FLOWABLE=FLOWABLE||{};FLOWABLE.CONFIG={onPremise:!0,contextRoot:"http://192.168.249.211:8084",contextRoot1:"http://192.168.249.211:8083",contextRoot2:"http://192.168.249.211:8082",webContextRoot:"./"};var FLOWABLE=FLOWABLE||{};FLOWABLE.UI_CONFIG={showRemovedProperties:!1},FLOWABLE.HEADER_CONFIG={showAppTitle:!0,showHeaderMenu:!0,showMainNavigation:!0,showPageHeader:!0};var FLOWABLE=FLOWABLE||{};FLOWABLE.URL={getModel:function(e){return FLOWABLE.CONFIG.contextRoot+"/models/"+e+"/editor?version="+Date.now()},getStencilSet:function(){return FLOWABLE.CONFIG.webContextRoot+"/stencilsets/stencilset.json?version="+Date.now()},putModel:function(e){return FLOWABLE.CONFIG.contextRoot+"/models/"+e+"/editor"},validateModel:function(){return FLOWABLE.CONFIG.contextRoot+"/models/validate"}};var FLOWABLE=FLOWABLE||{};FLOWABLE.TOOLBAR_CONFIG={items:[{type:"button",title:"TOOLBAR.ACTION.SAVE",cssClass:"editor-icon editor-icon-save",action:"FLOWABLE.TOOLBAR.ACTIONS.saveModel"},{type:"button",title:"TOOLBAR.ACTION.VALIDATE",cssClass:"glyphicon glyphicon-ok",action:"FLOWABLE.TOOLBAR.ACTIONS.validate"},{type:"separator",title:"",cssClass:"toolbar-separator"},{type:"button",title:"TOOLBAR.ACTION.CUT",cssClass:"editor-icon editor-icon-cut",action:"FLOWABLE.TOOLBAR.ACTIONS.cut",enabled:!1,enabledAction:"element"},{type:"button",title:"TOOLBAR.ACTION.COPY",cssClass:"editor-icon editor-icon-copy",action:"FLOWABLE.TOOLBAR.ACTIONS.copy",enabled:!1,enabledAction:"element"},{type:"button",title:"TOOLBAR.ACTION.PASTE",cssClass:"editor-icon editor-icon-paste",action:"FLOWABLE.TOOLBAR.ACTIONS.paste",enabled:!1},{type:"button",title:"TOOLBAR.ACTION.DELETE",cssClass:"editor-icon editor-icon-delete",action:"FLOWABLE.TOOLBAR.ACTIONS.deleteItem",enabled:!1,enabledAction:"element"},{type:"separator",title:"TOOLBAR.ACTION.SAVE",cssClass:"toolbar-separator"},{type:"button",title:"TOOLBAR.ACTION.REDO",cssClass:"editor-icon editor-icon-redo",action:"FLOWABLE.TOOLBAR.ACTIONS.redo",enabled:!1},{type:"button",title:"TOOLBAR.ACTION.UNDO",cssClass:"editor-icon editor-icon-undo",action:"FLOWABLE.TOOLBAR.ACTIONS.undo",enabled:!1},{type:"separator",title:"TOOLBAR.ACTION.SAVE",cssClass:"toolbar-separator"},{type:"button",title:"TOOLBAR.ACTION.ALIGNVERTICAL",cssClass:"editor-icon editor-icon-align-vertical",action:"FLOWABLE.TOOLBAR.ACTIONS.alignVertical",enabled:!1,enabledAction:"element",disableInForm:!0,minSelectionCount:2},{type:"button",title:"TOOLBAR.ACTION.ALIGNHORIZONTAL",cssClass:"editor-icon editor-icon-align-horizontal",action:"FLOWABLE.TOOLBAR.ACTIONS.alignHorizontal",enabledAction:"element",enabled:!1,disableInForm:!0,minSelectionCount:2},{type:"button",title:"TOOLBAR.ACTION.SAMESIZE",cssClass:"editor-icon editor-icon-same-size",action:"FLOWABLE.TOOLBAR.ACTIONS.sameSize",enabledAction:"element",enabled:!1,disableInForm:!0,minSelectionCount:2},{type:"separator",title:"TOOLBAR.ACTION.SAVE",cssClass:"toolbar-separator",disableInForm:!0},{type:"button",title:"TOOLBAR.ACTION.ZOOMIN",cssClass:"editor-icon editor-icon-zoom-in",action:"FLOWABLE.TOOLBAR.ACTIONS.zoomIn"},{type:"button",title:"TOOLBAR.ACTION.ZOOMOUT",cssClass:"editor-icon editor-icon-zoom-out",action:"FLOWABLE.TOOLBAR.ACTIONS.zoomOut"},{type:"button",title:"TOOLBAR.ACTION.ZOOMACTUAL",cssClass:"editor-icon editor-icon-zoom-actual",action:"FLOWABLE.TOOLBAR.ACTIONS.zoomActual"},{type:"button",title:"TOOLBAR.ACTION.ZOOMFIT",cssClass:"editor-icon editor-icon-zoom-fit",action:"FLOWABLE.TOOLBAR.ACTIONS.zoomFit"},{type:"separator",title:"TOOLBAR.ACTION.SAVE",cssClass:"toolbar-separator",disableInForm:!0},{type:"button",title:"TOOLBAR.ACTION.BENDPOINT.ADD",cssClass:"editor-icon editor-icon-bendpoint-add",action:"FLOWABLE.TOOLBAR.ACTIONS.addBendPoint",id:"add-bendpoint-button",disableInForm:!0},{type:"button",title:"TOOLBAR.ACTION.BENDPOINT.REMOVE",cssClass:"editor-icon editor-icon-bendpoint-remove",action:"FLOWABLE.TOOLBAR.ACTIONS.removeBendPoint",id:"remove-bendpoint-button",disableInForm:!0},{type:"separator",title:"",cssClass:"toolbar-separator",disableInForm:!0},{type:"button",title:"TOOLBAR.ACTION.HELP",cssClass:"glyphicon glyphicon-question-sign",action:"FLOWABLE.TOOLBAR.ACTIONS.help"}],secondaryItems:[]};var FLOWABLE=FLOWABLE||{};FLOWABLE.PROPERTY_CONFIG={string:{readModeTemplateUrl:"views/properties/default-value-display-template.html",writeModeTemplateUrl:"views/properties/string-property-write-mode-template.html"},"boolean":{templateUrl:"views/properties/boolean-property-template.html"},text:{readModeTemplateUrl:"views/properties/default-value-display-template.html",writeModeTemplateUrl:"views/properties/text-property-write-template.html"},"flowable-multiinstance":{readModeTemplateUrl:"views/properties/default-value-display-template.html",writeModeTemplateUrl:"views/properties/multiinstance-property-write-template.html"},"flowable-multiinstance1":{readModeTemplateUrl:"views/properties/default-value-display-template.html",writeModeTemplateUrl:"views/properties/multiinstance-property-write-template1.html"},"flowable-ordering":{readModeTemplateUrl:"views/properties/default-value-display-template.html",writeModeTemplateUrl:"views/properties/ordering-property-write-template.html"},"oryx-formproperties-complex":{readModeTemplateUrl:"views/properties/form-properties-display-template.html",writeModeTemplateUrl:"views/properties/form-properties-write-template.html"},"oryx-executionlisteners-multiplecomplex":{readModeTemplateUrl:"views/properties/execution-listeners-display-template.html",writeModeTemplateUrl:"views/properties/execution-listeners-write-template.html"},"oryx-tasklisteners-multiplecomplex":{readModeTemplateUrl:"views/properties/task-listeners-display-template.html",writeModeTemplateUrl:"views/properties/task-listeners-write-template.html"},"oryx-eventlisteners-multiplecomplex":{readModeTemplateUrl:"views/properties/event-listeners-display-template.html",writeModeTemplateUrl:"views/properties/event-listeners-write-template.html"},"oryx-usertaskassignment-complex":{readModeTemplateUrl:"views/properties/assignment-display-template.html",writeModeTemplateUrl:"views/properties/assignment-write-template.html"},"oryx-readusertaskassignment-complex":{readModeTemplateUrl:"views/properties/assignment-display-template2.html",writeModeTemplateUrl:"views/properties/assignment-write-template2.html"},"oryx-servicetaskfields-complex":{readModeTemplateUrl:"views/properties/fields-display-template.html",writeModeTemplateUrl:"views/properties/fields-write-template.html"},"oryx-callactivityinparameters-complex":{readModeTemplateUrl:"views/properties/in-parameters-display-template.html",writeModeTemplateUrl:"views/properties/in-parameters-write-template.html"},"oryx-callactivityoutparameters-complex":{readModeTemplateUrl:"views/properties/out-parameters-display-template.html",writeModeTemplateUrl:"views/properties/out-parameters-write-template.html"},"oryx-subprocessreference-subprocess-link":{readModeTemplateUrl:"views/properties/subprocess-reference-display-template.html",writeModeTemplateUrl:"views/properties/subprocess-reference-write-template.html"},"oryx-formkeydefinition-string2":{readModeTemplateUrl:"views/properties/form-reference-display-template.html",writeModeTemplateUrl:"views/properties/form-reference-write-template.html"},"oryx-process_potentialstarteruser-string2":{readModeTemplateUrl:"views/properties/form-reference-display-template1.html",writeModeTemplateUrl:"views/properties/form-reference-write-template1.html"},"oryx-process_potentialstartergroup-string2":{readModeTemplateUrl:"views/properties/assignment-display-template1.html",writeModeTemplateUrl:"views/properties/assignment-write-template1.html"},"oryx-formreference-complex":{readModeTemplateUrl:"views/properties/form-reference-display-template.html",writeModeTemplateUrl:"views/properties/form-reference-write-template.html"},"oryx-sequencefloworder-complex":{readModeTemplateUrl:"views/properties/sequenceflow-order-display-template.html",writeModeTemplateUrl:"views/properties/sequenceflow-order-write-template.html"},"oryx-conditionsequenceflow-complex":{readModeTemplateUrl:"views/properties/condition-expression-display-template.html",writeModeTemplateUrl:"views/properties/condition-expression-write-template.html"},"oryx-signaldefinitions-multiplecomplex":{readModeTemplateUrl:"views/properties/signal-definitions-display-template.html",writeModeTemplateUrl:"views/properties/signal-definitions-write-template.html"},"oryx-signalref-string":{readModeTemplateUrl:"views/properties/default-value-display-template.html",writeModeTemplateUrl:"views/properties/signal-property-write-template.html"},"oryx-messagedefinitions-multiplecomplex":{readModeTemplateUrl:"views/properties/message-definitions-display-template.html",writeModeTemplateUrl:"views/properties/message-definitions-write-template.html"},"oryx-messageref-string":{readModeTemplateUrl:"views/properties/default-value-display-template.html",writeModeTemplateUrl:"views/properties/message-property-write-template.html"},"oryx-duedatedefinition-complex":{readModeTemplateUrl:"views/properties/duedate-display-template.html",writeModeTemplateUrl:"views/properties/duedate-write-template.html"},"oryx-decisiontaskdecisiontablereference-complex":{readModeTemplateUrl:"views/properties/decisiontable-reference-display-template.html",writeModeTemplateUrl:"views/properties/decisiontable-reference-write-template.html"}};var FLOWABLE=FLOWABLE||{};FLOWABLE.eventBus={EVENT_TYPE_EDITOR_READY:"event-type-editor-ready",EVENT_TYPE_EDITOR_BOOTED:"event-type-editor-booted",EVENT_TYPE_SELECTION_CHANGE:"event-type-selection-change",EVENT_TYPE_TOOLBAR_BUTTON_CLICKED:"event-type-toolbar-button-clicked",EVENT_TYPE_ITEM_DROPPED:"event-type-item-dropped",EVENT_TYPE_PROPERTY_VALUE_CHANGED:"event-type-property-value-changed",EVENT_TYPE_DOUBLE_CLICK:"event-type-double-click",EVENT_TYPE_MOUSE_OUT:"event-type-mouse-out",EVENT_TYPE_MOUSE_OVER:"event-type-mouse-over",EVENT_TYPE_MODEL_SAVED:"event-type-model-saved",EVENT_TYPE_HIDE_SHAPE_BUTTONS:"event-type-hide-shape-buttons",EVENT_TYPE_SHOW_VALIDATION_POPUP:"event-type-show-validation-popup",EVENT_TYPE_NAVIGATE_TO_PROCESS:"event-type-navigate-to-process",EVENT_TYPE_UNDO_REDO_RESET:"event-type-undo-redo-reset",listeners:{},editor:null,addListener:function(e,t,i){"undefined"!=typeof this.listeners[e]?this.listeners[e].push({scope:i,callback:t}):this.listeners[e]=[{scope:i,callback:t}]},removeListener:function(e,t,i){if("undefined"!=typeof this.listeners[e]){for(var n=this.listeners[e].length,s=[],a=0;a<n;a++){var o=this.listeners[e][a];o.scope===i&&o.callback===t||s.push(o)}this.listeners[e]=s}},hasListener:function(e,t,i){if("undefined"!=typeof this.listeners[e]){var n=this.listeners[e].length;if(void 0===t&&void 0===i)return n>0;for(var s=0;s<n;s++){var a=this.listeners[e][s];if(a.scope==i&&a.callback==t)return!0}}return!1},dispatch:function(e,t){if("undefined"!=typeof this.listeners[e])for(var i=this.listeners[e].length,n=0;n<i;n++){var s=this.listeners[e][n];s&&s.callback&&s.callback.apply(s.scope,[t])}},dispatchOryxEvent:function(e,t){FLOWABLE.eventBus.editor.handleEvents(e,t)}};var FLOWABLE_EDITOR_TOUR={gettingStarted:function(e,t,i,n){var s="user";i.all([t("TOUR.WELCOME-TITLE",{userName:s}),t("TOUR.WELCOME-CONTENT"),t("TOUR.PALETTE-TITLE"),t("TOUR.PALETTE-CONTENT"),t("TOUR.CANVAS-TITLE"),t("TOUR.CANVAS-CONTENT"),t("TOUR.DRAGDROP-TITLE"),t("TOUR.DRAGDROP-CONTENT"),t("TOUR.PROPERTIES-TITLE"),t("TOUR.PROPERTIES-CONTENT"),t("TOUR.TOOLBAR-TITLE"),t("TOUR.TOOLBAR-CONTENT"),t("TOUR.END-TITLE"),t("TOUR.END-CONTENT")]).then(function(e){var t=["body","#paletteHelpWrapper","#canvasHelpWrapper","#propertiesHelpWrapper","#editor-header"],i=new Tour({name:"activitiEditorTour",storage:!!n&&window.localStorage,container:"body",backdrop:!0,keyboard:!0,steps:[{orphan:!0,title:e[0],content:e[1],template:FLOWABLE_EDITOR_TOUR._buildStepTemplate(!1,!0,!1,300),onNext:FLOWABLE_EDITOR_TOUR._buildOnNextFunction(t[0])},{element:t[1],title:e[2],content:e[3],template:FLOWABLE_EDITOR_TOUR._buildStepTemplate(!1,!0,!1,400,"images/tour/open-group.gif"),onNext:FLOWABLE_EDITOR_TOUR._buildOnNextFunction(t[1])},{element:t[2],title:e[4],content:e[5],placement:"left",template:FLOWABLE_EDITOR_TOUR._buildStepTemplate(!1,!0,!1),onNext:FLOWABLE_EDITOR_TOUR._buildOnNextFunction(t[2])},{orphan:!0,title:e[6],content:e[7],template:FLOWABLE_EDITOR_TOUR._buildStepTemplate(!1,!0,!1,720,"images/tour/tour-dnd.gif"),onNext:FLOWABLE_EDITOR_TOUR._buildOnNextFunction(t[0])},{element:t[3],title:e[8],content:e[9],placement:"left",template:FLOWABLE_EDITOR_TOUR._buildStepTemplate(!1,!0,!1,400),onNext:FLOWABLE_EDITOR_TOUR._buildOnNextFunction(t[3])},{element:t[4],title:e[10],content:e[11],placement:"bottom",template:FLOWABLE_EDITOR_TOUR._buildStepTemplate(!1,!0,!1,400),onNext:FLOWABLE_EDITOR_TOUR._buildOnNextFunction(t[4])},{orphan:!0,title:e[12],content:e[13],template:FLOWABLE_EDITOR_TOUR._buildStepTemplate(!1,!1,!0,400),onNext:FLOWABLE_EDITOR_TOUR._buildOnNextFunction(t[0])}],onEnd:FLOWABLE_EDITOR_TOUR._buildOnEndFunction(t)});i.init(),i.start()})},sequenceFlowBendpoint:function(e,t,i,n){i.all([t("FEATURE-TOUR.BENDPOINT.TITLE"),t("FEATURE-TOUR.BENDPOINT.DESCRIPTION")]).then(function(e){var t=["body"],i=new Tour({name:"bendpointTour",storage:!!n&&window.localStorage,container:"body",backdrop:!0,keyboard:!0,steps:[{orphan:!0,title:e[0],content:e[1],template:FLOWABLE_EDITOR_TOUR._buildStepTemplate(!1,!1,!0,500,"images/tour/sequenceflow-bendpoint.gif"),onNext:FLOWABLE_EDITOR_TOUR._buildOnNextFunction(t[0])}],onEnd:FLOWABLE_EDITOR_TOUR._buildOnEndFunction(t)});i.init(),i.start()})},_buildStepTemplate:function(e,t,i,n,s){var a=200;n&&(a=n);var o="<div class='popover tour' style='max-width:"+a+"px'><div class='arrow'></div><h3 class='popover-title'></h3><div class='popover-content'></div><div class='popover-navigation'>";return s&&(o=o+"<div><img src='"+s+"' style='border 1px solid black;margin:5px 0 5px 0;'></img></div>"),e&&(o+="<button class='btn btn-sm btn-default ' data-role='prev'>« 上一步</button>"),t&&(o+="<button class='btn btn-sm btn-default' data-role='next' style='float:right'\">下一步 »</button>"),i&&(o+="<button class='btn btn-warning btn-sm' data-role='end' style='float:right'\">知道了!</button>"),o+="</div></nav></div>"},_buildOnNextFunction:function(e){return function(){jQuery(e).each(function(e,t){t.style.display="block"})}},_buildOnEndFunction:function(e){return function(){for(var t=0;t<e.length;t++)jQuery(e[t]).each(function(e,t){t.style.display="block"})}}},EDITOR=EDITOR||{};EDITOR.UTIL={getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=t.exec(location.search);return null==i?"":decodeURIComponent(i[1].replace(/\+/g," "))},collectPropertiesFromPrecedingElements:function(e,t){var i=[],n=[];return EDITOR.UTIL._visitElementAndCollectProperty(e,t,i,n),n},collectElementsFromPrecedingElements:function(e,t){var i=[],n=[],s=e.getIncomingShapes();if(s)for(var a=0;a<s.length;a++){var o=s[a];i.indexOf(o.id)<0&&EDITOR.UTIL._visitElementAndCollectElement(o,t,i,n)}return n},collectShapes:function(e,t){var i=[];if(e&&e.length>0)for(var n=0;n<e.length;n++)EDITOR.UTIL._visitShapeAndCollectShape(e[n],t,i);return i},collectSortedElementsFromPrecedingElements:function(e){var t=[],i=[],n=e.getIncomingShapes();if(n)for(var s=0;s<n.length;s++){var a=n[s];t.indexOf(a.id)<0&&EDITOR.UTIL._visitElementAndCollectAllElement(a,t,i)}return i.reverse()},_visitShapeAndCollectShape:function(e,t,i){if(e.childShapes&&e.childShapes.length>0)for(var n=0;n<e.childShapes.length;n++)EDITOR.UTIL._visitShapeAndCollectShape(e.childShapes[n],t,i);e.stencil&&e.stencil.id===t&&i.push(e)},_visitElementAndCollectProperty:function(e,t,i,n){i.push(e.id);var s=e.properties[t];s&&n.push(s);var a=e.getIncomingShapes();if(a)for(var o=0;o<a.length;o++){var l=a[o];i.indexOf(l.id)<0&&EDITOR.UTIL._visitElementAndCollectProperty(l,t,i,n)}var r=e.getChildShapes();if(r)for(var o=0;o<r.length;o++){var d=r[o];i.indexOf(d.id)<0&&EDITOR.UTIL._visitElementAndCollectProperty(d,t,i,n)}},_visitElementAndCollectElement:function(e,t,i,n){i.push(e.id);var s=e.getStencil().id();s&&s.indexOf(t)>=0&&n.push(e);var a=e.getIncomingShapes();if(a)for(var o=0;o<a.length;o++){var l=a[o];i.indexOf(l.id)<0&&EDITOR.UTIL._visitElementAndCollectElement(l,t,i,n)}var r=e.getChildShapes();if(r)for(var o=0;o<r.length;o++){var d=r[o];i.indexOf(d.id)<0&&EDITOR.UTIL._visitElementAndCollectElement(d,t,i,n)}},_visitElementAndCollectAllElement:function(e,t,i){t.push(e.id);var n=e.getStencil().id();n&&i.push(e);var s=e.getIncomingShapes();if(s)for(var a=0;a<s.length;a++){var o=s[a];t.indexOf(o.id)<0&&EDITOR.UTIL._visitElementAndCollectAllElement(o,t,i)}var l=e.getChildShapes();if(l)for(var a=0;a<l.length;a++){var r=l[a];t.indexOf(r.id)<0&&EDITOR.UTIL._visitElementAndCollectAllElement(r,t,i)}var d=e.getParentShape();if(d)try{var p=d.getIncomingShapes();if(p)for(var a=0;a<p.length;a++){var c=p[a];t.indexOf(c.id)<0&&EDITOR.UTIL._visitElementAndCollectAllElement(c,t,i)}}catch(u){}},getPropertyFromParent:function(e,t){return e.parent?EDITOR.UTIL._getPropertyFromParent(e.parent,t):void 0},_getPropertyFromParent:function(e,t){var i=e.properties[t];return i?i:e.parent?EDITOR.UTIL._getPropertyFromParent(e.parent,t):void 0},extractSortedStepsOfType:function(e,t){var i=[],n=EDITOR.UTIL.extractSortedSteps(e);if(n&&n.length>0)for(var s=0;s<n.length;s++)n[s].stencil&&n[s].stencil.id===t&&i.push(n[s]);return i},extractSortedSteps:function(e){var t={},i=[];if(e&&e.length>0){for(var n=0;n<e.length;n++)t[e[n].resourceId]=e[n];EDITOR.UTIL.getOutgoingElements(e[0],t,i,!0)}return i},getOutgoingElements:function(e,t,i,n){if(e&&t)if(e.outgoing&&e.outgoing.length>0)for(var s=0;s<e.outgoing.length;s++)n&&EDITOR.UTIL._elementIsStep(e)?(e.id=e.resourceId,i.push(e)):n||(e.id=e.resourceId,i.push(e)),EDITOR.UTIL.getOutgoingElements(t[e.outgoing[s].resourceId],t,i);else n&&EDITOR.UTIL._elementIsStep(e)?(e.id=e.resourceId,i.push(e)):n||(e.id=e.resourceId,i.push(e))},_elementIsStep:function(e){var t=!1;return e&&e.stencil&&"SequenceFlow"!=e.stencil.id&&(t=!0),t}},angular.module("flowableModeler").service("UserService",["$http","$q","$window",function(e,t,i){var n=function(i){var n=t.defer();return e(i).success(function(e,t,i,s){n.resolve(e)}).error(function(e,t,i,s){n.reject(e)}),n.promise};this.getFilteredUsers=function(e,t,i){console.log("用户的的");var s={filter:e};return t&&(s.excludeTaskId=t),i&&(s.exclusdeProcessId=i),n({method:"GET",url:FLOWABLE.CONFIG.contextRoot2+"/users",params:s})}}]),angular.module("flowableModeler").service("GroupService",["$http","$q",function(e,t){var i=function(i){var n=t.defer();return e(i).success(function(e,t,i,s){n.resolve(e)}).error(function(e,t,i,s){n.reject(e)}),n.promise};this.getFilteredGroups=function(e){console.log("组的");var t;return e&&(t={filter:e}),i({method:"GET",url:FLOWABLE.CONFIG.contextRoot2+"/groupChild",params:t})}}]),angular.module("flowableModeler").factory("editorManager",["$http",function(e){var t=Class.create({initialize:function(){this.treeFilteredElements=["SubProcess","CollapsedSubProcess"],this.canvasTracker=new Hash,this.structualIcons={SubProcess:"expanded.subprocess.png",CollapsedSubProcess:"subprocess.png",EventSubProcess:"event.subprocess.png"},this.current=this.modelId,this.loading=!0},getToken:function(){return this.token},setToken:function(e){this.token=e},getModelId:function(){return this.modelId},setModelId:function(e){this.modelId=e},getCurrentModelId:function(){return this.current},setStencilData:function(e){this.stencilData=jQuery.extend(!0,{},e)},getStencilData:function(){return this.stencilData},getSelection:function(){return this.editor.selection},getSubSelection:function(){return this.editor._subSelection},handleEvents:function(e){this.editor.handleEvents(e)},setSelection:function(e){this.editor.setSelection(e)},registerOnEvent:function(e,t){this.editor.registerOnEvent(e,t)},getChildShapeByResourceId:function(e){return this.editor.getCanvas().getChildShapeByResourceId(e)},getJSON:function(){return this.editor.getJSON()},getStencilSets:function(){return this.editor.getStencilSets()},getEditor:function(){return this.editor},executeCommands:function(e){this.editor.executeCommands(e)},getCanvas:function(){return this.editor.getCanvas()},getRules:function(){return this.editor.getRules()},eventCoordinates:function(e){return this.editor.eventCoordinates(e)},eventCoordinatesXY:function(e,t){return this.editor.eventCoordinatesXY(e,t)},updateSelection:function(){this.editor.updateSelection()},getBaseModelData:function(){return this.modelData},edit:function(e){this.syncCanvasTracker(),this.loading=!0;var t=this.getCanvas().getChildren();t.each(function(e){this.editor.deleteShape(e)}.bind(this)),t=this.canvasTracker.get(e),t||(t=JSON.stringify([])),this.editor.loadSerialized({childShapes:t}),this.getCanvas().update(),this.current=e,this.loading=!1,FLOWABLE.eventBus.dispatch("EDITORMANAGER-EDIT-ACTION",{}),FLOWABLE.eventBus.dispatch(FLOWABLE.eventBus.EVENT_TYPE_UNDO_REDO_RESET,{})},getTree:function(){var e=new Hash,t=this.getModel();e.set("name",t.properties.name||"没有填写名称"),e.set("id",this.modelId),e.set("type","root"),e.set("current",this.current===this.modelId);var i=t.childShapes,n=this._buildTreeChildren(i);return e.set("children",n),e.toObject()},_buildTreeChildren:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],s=n.stencil.id;if(s&&this.treeFilteredElements.indexOf(s)>-1){var a=new Hash;a.set("name",n.properties.name||"没有填写名称"),a.set("id",n.resourceId),a.set("type",s),a.set("current",n.resourceId===this.current),"CollapsedSubProcess"===s?(0===n.childShapes.length?a.set("children",[]):a.set("children",this._buildTreeChildren(n.childShapes)),a.set("editable",!0)):(a.set("children",this._buildTreeChildren(n.childShapes)),a.set("editable",!1)),a.set("icon",this.structualIcons[s]),t.push(a.toObject())}}return t},syncCanvasTracker:function(){var e=this.getCanvas().getChildren(),t=[];e.each(function(e){t.push(e.toJSON())}),this.canvasTracker.set(this.current,JSON.stringify(t))},getModel:function(){this.syncCanvasTracker();var e=this.editor.getJSON(),t={modelId:this.modelId,bounds:e.bounds,properties:e.properties,childShapes:JSON.parse(this.canvasTracker.get(this.modelId)),stencil:{id:"BPMNDiagram"},stencilset:{namespace:"http://b3mn.org/stencilset/bpmn2.0#",url:"../editor/stencilsets/bpmn2.0/bpmn2.0.json"}};return this._mergeCanvasToChild(t),t},bootEditor:function(e){this.canvasTracker=new Hash;var t=jQuery.extend(!0,{},e.data);t.model.childShapes||(t.model.childShapes=[]),this.findAndRegisterCanvas(t.model.childShapes),this.canvasTracker.set(t.modelId,JSON.stringify(t.model.childShapes)),this.modelData=e.data,this.editor=new ORYX.Editor(t),this.current=this.editor.id,this.loading=!1,FLOWABLE.eventBus.editor=this.editor,FLOWABLE.eventBus.dispatch("ORYX-EDITOR-LOADED",{}),FLOWABLE.eventBus.dispatch(FLOWABLE.eventBus.EVENT_TYPE_EDITOR_BOOTED,{})},findAndRegisterCanvas:function(e){for(var t=0;t<e.length;t++){var i=e[t];"CollapsedSubProcess"===i.stencil.id&&(i.childShapes.length>0?(this.findAndRegisterCanvas(i.childShapes),this.canvasTracker.set(i.resourceId,JSON.stringify(i.childShapes)),i.childShapes=[]):this.canvasTracker.set(i.resourceId,"[]"))}},_mergeCanvasToChild:function(e){for(var t=0;t<e.childShapes.length;t++){var i=e.childShapes[t];if("CollapsedSubProcess"===i.stencil.id){var n=this.canvasTracker.get(i.resourceId);n=n?JSON.parse(n):[],i.childShapes=n,this._mergeCanvasToChild(i)}else"SubProcess"===i.stencil.id&&this._mergeCanvasToChild(i)}},dispatchOryxEvent:function(e){FLOWABLE.eventBus.dispatchOryxEvent(e)},isLoading:function(){return this.loading},navigateTo:function(e){this.syncCanvasTracker();var t=!1;this.canvasTracker.each(function(i){var n=i.key,s=JSON.parse(i.value),a=this._findTarget(s,e);if(!t&&a){this.edit(n);var o=this.getCanvas().getChildShapeByResourceId(a);this.setSelection([o],[],!0),t=!0}},this)},_findTarget:function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.resourceId===t)return n.resourceId;if(n.properties&&n.properties.overrideid===t)return n.resourceId;var s=this._findTarget(n.childShapes,t);if(s)return s}return!1}});return new t}]),angular.module("flowableModeler").directive("loading",["$translate",function(e){return{restrict:"E",template:"<div class='loading pull-right' ng-show='status.loading'><div class='l1'></div><div class='l2'></div><div class='l2'></div></div>"}}]),angular.module("flowableModeler").directive("loadingLeftPull",["$translate",function(e){return{restrict:"E",template:"<div class='loading pull-left' ng-show='status.loading'><div class='l1'></div><div class='l2'></div><div class='l2'></div></div>"}}]),angular.module("flowableModeler").directive("activitiFixDropdownBug",function(){return{restrict:"AEC",link:function(e,t,i){t.hasClass("btn-group")||(t=t.parent()),t.on("hidden.bs.dropdown\t",function(){t.show()})}}}),angular.module("flowableModeler").controller("EditorController",["$rootScope","$scope","$http","$q","$routeParams","$timeout","$location","$translate","$modal","editorManager",function(e,t,i,n,s,a,o,l,r,d){function p(){var i=jQuery("#canvasSection");i.scroll(function(){var i=d.getSelection(),n=d.getSubSelection();t.selectedElements=i,t.subSelectionElements=n,i&&i.length>0&&(e.selectedElementBeforeScrolling=i[0]),jQuery(".Oryx_button").each(function(e,i){t.orginalOryxButtonStyle=i.style.display,i.style.display="none"}),jQuery(".resizer_southeast").each(function(e,i){t.orginalResizerSEStyle=i.style.display,i.style.display="none"}),jQuery(".resizer_northwest").each(function(e,i){t.orginalResizerNWStyle=i.style.display,i.style.display="none"}),d.handleEvents({type:ORYX.CONFIG.EVENT_CANVAS_SCROLL})}),i.scrollStopped(function(){function e(e){jQuery(e).position().top>0?e.style.display="block":e.style.display="none"}d.setSelection([]),d.setSelection(t.selectedElements,t.subSelectionElements),t.selectedElements=void 0,t.subSelectionElements=void 0,jQuery(".Oryx_button").each(function(t,i){e(i)}),jQuery(".resizer_southeast").each(function(t,i){e(i)}),jQuery(".resizer_northwest").each(function(t,i){e(i)})})}e.editorFactory=n.defer(),e.forceSelectionRefresh=!1,e.ignoreChanges=!1,e.validationErrors=[],e.staticIncludeVersion=Date.now(),e.editorInitialized||(e.safeApply=function(e){if(this.$root){var t=this.$root.$$phase;"$apply"==t||"$digest"==t?e&&"function"==typeof e&&e():this.$apply(e)}else this.$apply(e)},e.addHistoryItem=function(t){var i=d.getBaseModelData(),n={id:i.modelId,name:i.name,key:i.key,stepId:t,type:"bpmnmodel"};d.getCurrentModelId()!=d.getModelId()&&(n.subProcessId=d.getCurrentModelId()),e.editorHistory.push(n)},e.editorFactory.promise.then(function(){e.formItems=void 0,FLOWABLE.eventBus.editor=e.editor;var t=[{oryxType:ORYX.CONFIG.EVENT_SELECTION_CHANGED,flowableType:FLOWABLE.eventBus.EVENT_TYPE_SELECTION_CHANGE},{oryxType:ORYX.CONFIG.EVENT_DBLCLICK,flowableType:FLOWABLE.eventBus.EVENT_TYPE_DOUBLE_CLICK},{oryxType:ORYX.CONFIG.EVENT_MOUSEOUT,flowableType:FLOWABLE.eventBus.EVENT_TYPE_MOUSE_OUT},{oryxType:ORYX.CONFIG.EVENT_MOUSEOVER,flowableType:FLOWABLE.eventBus.EVENT_TYPE_MOUSE_OVER},{oryxType:ORYX.CONFIG.EVENT_EDITOR_INIT_COMPLETED,flowableType:FLOWABLE.eventBus.EVENT_TYPE_EDITOR_READY},{oryxType:ORYX.CONFIG.EVENT_PROPERTY_CHANGED,flowableType:FLOWABLE.eventBus.EVENT_TYPE_PROPERTY_VALUE_CHANGED}];t.forEach(function(e){d.registerOnEvent(e.oryxType,function(t){FLOWABLE.eventBus.dispatch(e.flowableType,t)})})}),jQuery(window).resize(function(){var i=jQuery("#editor-header").height(),n=jQuery("#paletteHelpWrapper"),s=jQuery("#propertiesHelpWrapper"),a=jQuery("#canvasSection");if(void 0!=i&&null!==i&&void 0!==a&&null!==a){if(e.editor){var o=d.getSelection(),l=d.getSelection();t.selectedElements=o,t.subSelectionElements=l,o&&o.length>0&&(e.selectedElementBeforeScrolling=o[0],d.setSelection([]),d.setSelection(t.selectedElements,t.subSelectionElements),t.selectedElements=void 0,t.subSelectionElements=void 0)}var r=jQuery(window).height()-i;a.height(r),s.height(r),n.height(r);var p=jQuery("#paletteHeader").height(),c=jQuery("#process-treeview-wrapper").height();jQuery("#paletteSection").height(r-c-p);var u=jQuery("#propertyHeader").height();jQuery(".selected-item-body").height(r-u);var g=null;a&&a[0].children[1]&&(g=a[0].children[1]);var m=a.position().top,v=a.position().left,E=a[0].clientHeight,f=a[0].clientWidth,h=8,O=0,b=0;g&&(b=g.clientWidth||g.parentNode.clientWidth),b<a[0].clientWidth&&(O=b-a[0].clientWidth,v-=O/2,f+=O);var T=17,y=20,R=jQuery("#canvas-grow-N");R.css("top",m+y+"px"),R.css("left",v-10+(f-T)/2+"px");var S=jQuery("#canvas-grow-S");S.css("top",m+E-y-h+"px"),S.css("left",v-10+(f-T)/2+"px");var I=jQuery("#canvas-grow-E");I.css("top",m-10+(E-T)/2+"px"),I.css("left",v+f-y-h+"px");var P=jQuery("#canvas-grow-W");P.css("top",m-10+(E-T)/2+"px"),P.css("left",v+y+"px"),R=jQuery("#canvas-shrink-N"),R.css("top",m+y+"px"),R.css("left",v+10+(f-T)/2+"px"),S=jQuery("#canvas-shrink-S"),S.css("top",m+E-y-h+"px"),S.css("left",v+10+(f-T)/2+"px"),I=jQuery("#canvas-shrink-E"),I.css("top",m+10+(E-T)/2+"px"),I.css("left",v+f-y-h+"px"),P=jQuery("#canvas-shrink-W"),P.css("top",m+10+(E-T)/2+"px"),P.css("left",v+y+"px")}}),jQuery(window).trigger("resize"),jQuery.fn.scrollStopped=function(e){
jQuery(this).scroll(function(){var t=this,i=jQuery(t);i.data("scrollTimeout")&&clearTimeout(i.data("scrollTimeout")),i.data("scrollTimeout",setTimeout(e,50,t))})},FLOWABLE.eventBus.addListener("ORYX-EDITOR-LOADED",function(){this.editorFactory.resolve(),this.editorInitialized=!0,this.modelData=d.getBaseModelData()},e),FLOWABLE.eventBus.addListener(FLOWABLE.eventBus.EVENT_TYPE_EDITOR_READY,function(){var e=window.location.href,t=new RegExp("[?&]subProcessId(=([^&#]*)|&|#|$)"),i=t.exec(e);i&&i[2]&&d.edit(decodeURIComponent(i[2].replace(/\+/g," ")))})),t.$on("$locationChangeStart",function(i,n,s){if(e.editor&&!e.ignoreChanges){for(var a,l=e.editor.loadedPlugins,d=0;d<l.length;d++)if("ORYX.Plugins.Save"==l[d].type){a=l[d];break}if(a&&a.hasChanges()&&(i.preventDefault(),!t.unsavedChangesModalInstance)){var p=function(i){t.unsavedChangesModalInstance=void 0,i?(e.ignoreChanges=!0,o.url(n.substring(n.indexOf("/#")+2))):(e.ignoreChanges=!1,e.setMainPageById("processes"))};t.handleResponseFunction=p,_internalCreateModal({template:"views/popups/unsaved-changes.html",scope:t},r,t)}}}),p();var c=s.modelId;d.setModelId(c),d.setToken(s.token),i.get(FLOWABLE.URL.getStencilSet()).then(function(e){var t="http://b3mn.org/stencilset/";d.setStencilData(e.data);var n=new ORYX.Core.StencilSet.StencilSet(t,e.data);return ORYX.Core.StencilSet.loadStencilSet(t,n,c),i.get(ORYX.CONFIG.PLUGINS_CONFIG)}).then(function(e){return ORYX._loadPlugins(e.data),i({method:"GET",ignoreErrors:!0,headers:{Token:d.getToken()},url:FLOWABLE.URL.getModel(c)})}).then(function(e){d.bootEditor(e)})["catch"](function(e){console.log(e)}),jQuery(window).focus()}]),angular.module("flowableModeler").controller("EditorUnsavedChangesPopupCtrl",["$rootScope","$scope","$http","$location","$window",function(e,t,i,n,s){t.discard=function(){t.handleResponseFunction&&(t.handleResponseFunction(!0),s.onbeforeunload=void 0),t.$hide()},t.save=function(){t.handleResponseFunction&&t.handleResponseFunction(!1),t.$hide()},t.cancel=function(){t.handleResponseFunction&&t.handleResponseFunction(null),t.$hide()}}]),angular.module("flowableModeler").controller("StencilController",["$rootScope","$scope","$http","$modal","$timeout","$window","editorManager",function(e,t,i,n,s,a,o){t.paletteCollapsed=!1,t.propertiesCollapsed=!1,t.headerConfig=FLOWABLE.HEADER_CONFIG,t.editorFactory.promise.then(function(){for(var i=[],s=function(e,t){for(var i=0;i<t.length;i++)if(t[i].name===e)return t[i];return null},l=function(e,t){var i={name:e,items:[],paletteItems:[],groups:[],visible:!0};return t.push(i),i},r=o.getStencilData(),d=["UserTask","EndNoneEvent","ExclusiveGateway","CatchTimerEvent","ThrowNoneEvent","TextAnnotation","SequenceFlow","Association"],p=["SequenceFlow","MessageFlow","Association","DataAssociation","DataStore","SendTask"],c=[],u=[],g=0;g<r.rules.morphingRules.length;g++){var m=r.rules.morphingRules[g].role,v={role:m,morphOptions:[]};u.push(v)}for(var E=0;E<r.stencils.length;E++){var f=r.stencils[E].groups[0];if("Diagram"!==f&&"Form"!==f){var h=!1;r.stencils[E].removed&&(h=!0);var O=void 0;if(!h&&null!==f&&void 0!==f&&f.length>0){O=s(f,i),null===O&&(O=l(f,i));for(var b=1;b<r.stencils[E].groups.length;b++){var T=r.stencils[E].groups[b],y=s(T,O.groups);null===y&&(y=l(T,O.groups)),O=y}}var R={id:r.stencils[E].id,name:r.stencils[E].title,description:r.stencils[E].description,icon:r.stencils[E].icon,type:r.stencils[E].type,roles:r.stencils[E].roles,removed:h,customIcon:!1,canConnect:!1,canConnectTo:!1,canConnectAssociation:!1};r.stencils[E].customIconId&&r.stencils[E].customIconId>0&&(R.customIcon=!0,R.icon=r.stencils[E].customIconId),h||d.indexOf(R.id)>=0&&(c[d.indexOf(R.id)]=R),"TextAnnotation"!==R.id&&"BoundaryCompensationEvent"!==R.id||(R.canConnectAssociation=!0);for(var g=0;g<r.stencils[E].roles.length;g++){var S=r.stencils[E].roles[g];"sequence_start"===S?R.canConnect=!0:"sequence_end"===S&&(R.canConnectTo=!0);for(var I=0;I<u.length;I++)if(S===u[I].role){h||u[I].morphOptions.push(R),R.morphRole=u[I].role;break}}O?(O.items.push(R),p.indexOf(R.id)<0&&O.paletteItems.push(R)):h||i.push(R)}}for(var g=0;g<i.length;g++)i[g].paletteItems&&0==i[g].paletteItems.length&&(i[g].visible=!1);t.stencilItemGroups=i;for(var P=[],g=0;g<r.rules.containmentRules.length;g++){var A=r.rules.containmentRules[g];P.push(A)}t.containmentRules=P;for(var L=[],g=0;g<c.length;g++)c[g]&&(L[L.length]=c[g]);t.quickMenuItems=L,t.morphRoles=u,o.registerOnEvent(ORYX.CONFIG.EVENT_SELECTION_CHANGED,function(i){var n=i.elements,s=!1;if(n&&0==n.length&&(n=[o.getCanvas()],s=!0),n&&n.length>0){var a=n.first(),l=a.getStencil();if(e.selectedElementBeforeScrolling&&l.id().indexOf("BPMNDiagram")!==-1)return;if(e.selectedElementBeforeScrolling&&e.selectedElementBeforeScrolling.getId()===a.getId())return void(e.selectedElementBeforeScrolling=null);if(t.previousSelectedShape=t.selectedShape,void 0!==t.selectedShape&&t.selectedShape.getId()===a.getId()){if(!e.forceSelectionRefresh)return;e.forceSelectionRefresh=!1}var r={title:"",properties:[]};s&&(r.auditData={author:t.modelData.createdByUser,createDate:t.modelData.createDate});for(var d=l.properties(),p=0;p<d.length;p++){var c=d[p];if(0!=c.popular()){var u=c.prefix()+"-"+c.id();"oryx-name"===u&&(r.title=a.properties.get(u));var g=FLOWABLE.PROPERTY_CONFIG[u+"-"+c.type()];if(void 0!==g&&null!==g||(g=FLOWABLE.PROPERTY_CONFIG[c.type()]),void 0===g||null===g)console.log("WARNING: no property configuration defined for "+u+" of type "+c.type());else{if("true"===a.properties.get(u)&&a.properties.set(u,!0),0==FLOWABLE.UI_CONFIG.showRemovedProperties&&c.isHidden())continue;var m={key:u,title:c.title(),description:c.description(),type:c.type(),mode:"read",hidden:c.isHidden(),value:a.properties.get(u)};if(("complex"===m.type||"multiplecomplex"===m.type)&&m.value&&m.value.length>0)try{m.value=JSON.parse(m.value)}catch(v){}void 0!==g.readModeTemplateUrl&&null!==g.readModeTemplateUrl&&(m.readModeTemplateUrl=g.readModeTemplateUrl),null!==g.writeModeTemplateUrl&&null!==g.writeModeTemplateUrl&&(m.writeModeTemplateUrl=g.writeModeTemplateUrl),void 0!==g.templateUrl&&null!==g.templateUrl?(m.templateUrl=g.templateUrl,m.hasReadWriteMode=!1):m.hasReadWriteMode=!0,void 0!==m.value&&null!==m.value&&0!=m.value.length||(m.noValue=!0),r.properties.push(m)}}}t.safeApply(function(){t.selectedItem=r,t.selectedShape=a})}else t.safeApply(function(){t.selectedItem={},t.selectedShape=null})}),o.registerOnEvent(ORYX.CONFIG.EVENT_SELECTION_CHANGED,function(e){FLOWABLE.eventBus.dispatch(FLOWABLE.eventBus.EVENT_TYPE_HIDE_SHAPE_BUTTONS);var i=e.elements;if(i&&1==i.length){var n=i.first(),s=o.getCanvas().node.getScreenCTM(),a=n.absoluteXY();a.x*=s.a,a.y*=s.d;var l=1;if(!isNaN(screen.logicalXDPI)&&!isNaN(screen.systemXDPI)){var r=navigator.userAgent;if(r.indexOf("MSIE")>=0){var d=Math.round(screen.deviceXDPI/screen.logicalXDPI*100);100!==d&&(l=d/100)}}if(1===l)a.y=a.y-jQuery("#canvasSection").offset().top+5,a.x=a.x-jQuery("#canvasSection").offset().left;else{var p=jQuery("#canvasSection").offset().left,c=jQuery("#canvasSection").scrollLeft(),u=jQuery("#canvasSection").scrollTop(),g=s.e-p*l,m=0;g>10&&(m=g/l-g),a.y=a.y-jQuery("#canvasSection").offset().top*l+5+(u*l-u),a.x=a.x-p*l+m+(c*l-c)}var v=new ORYX.Core.Bounds(s.e+a.x,s.f+a.y,s.e+a.x+s.a*n.bounds.width(),s.f+a.y+s.d*n.bounds.height()),E=v.upperLeft(),f=t.getStencilItemById(n.getStencil().idWithoutNs()),h=[];if(f&&f.morphRole)for(var O=0;O<t.morphRoles.length;O++)t.morphRoles[O].role===f.morphRole&&(h=t.morphRoles[O].morphOptions);var b=E.x;if(v.width()<48&&(b-=24),h&&h.length>0){var T=document.getElementById("morph-button");T.style.display="block",T.style.left=b+24+"px",T.style.top=E.y+v.height()+2+"px"}var y=document.getElementById("delete-button");y.style.display="block",y.style.left=b+"px",y.style.top=E.y+v.height()+2+"px";var R=n._stencil._jsonStencil.id.endsWith("CollapsedSubProcess"),S=document.getElementById("edit-button");if(R?(S.style.display="block",h&&h.length>0?S.style.left=b+24+24+"px":S.style.left=b+24+"px",S.style.top=E.y+v.height()+2+"px"):S.style.display="none",f&&(f.canConnect||f.canConnectAssociation)){var I=0,P=E.x+v.width()+5,A=E.y;jQuery(".Oryx_button").each(function(e,t){"morph-button"!==t.id&&"delete-button"!=t.id&&"edit-button"!==t.id&&(I++,I>3?(P=E.x+v.width()+5,A+=24,I=1):I>1&&(P+=24),t.style.display="block",t.style.left=P+"px",t.style.top=A+"px")})}}}),e.stencilInitialized||(FLOWABLE.eventBus.addListener(FLOWABLE.eventBus.EVENT_TYPE_HIDE_SHAPE_BUTTONS,function(e){jQuery(".Oryx_button").each(function(e,t){t.style.display="none"})}),FLOWABLE.eventBus.addListener(FLOWABLE.eventBus.EVENT_TYPE_PROPERTY_VALUE_CHANGED,function(e){e.property&&e.property.key&&("oryx-name"===e.property.key&&void 0!==t.selectedItem&&null!==t.selectedItem&&(t.selectedItem.title=e.newValue),e.property.noValue=void 0===e.property.value||null===e.property.value||0==e.property.value.length)}),FLOWABLE.eventBus.addListener(FLOWABLE.eventBus.EVENT_TYPE_SHOW_VALIDATION_POPUP,function(t){var i=function(){e.currentValidationId=t.validationId,e.isOnProcessLevel=t.onProcessLevel,_internalCreateModal({template:"views/popups/validation-errors.html"},n,e)};i()}),FLOWABLE.eventBus.addListener(FLOWABLE.eventBus.EVENT_TYPE_NAVIGATE_TO_PROCESS,function(t){var i=o.getBaseModelData();e.editorHistory.push({id:i.modelId,name:i.name,type:"bpmnmodel"}),a.location.href="../editor/#/editor/"+t.processId}),e.stencilInitialized=!0),t.morphShape=function(){t.safeApply(function(){var i=o.getSelection();if(i&&1==i.length){e.currentSelectedShape=i.first();for(var s=t.getStencilItemById(e.currentSelectedShape.getStencil().idWithoutNs()),a=[],l=0;l<t.morphRoles.length;l++)t.morphRoles[l].role===s.morphRole&&(a=t.morphRoles[l].morphOptions.slice());var r=function(){e.morphShapes=a,_internalCreateModal({backdrop:!1,keyboard:!0,template:"views/popups/select-shape.html"},n,e)};r()}})},t.deleteShape=function(){FLOWABLE.TOOLBAR.ACTIONS.deleteItem({$scope:t,editorManager:o})},t.quickAddItem=function(i){t.safeApply(function(){var n=o.getSelection();if(n&&1==n.length){e.currentSelectedShape=n.first();for(var s=void 0,a=o.getStencilSets().values(),l=0;l<a.length;l++)for(var r=a[l],d=r.nodes(),p=0;p<d.length;p++)if(d[p].idWithoutNs()===i){s=d[p];break}if(!s)return;var c={type:t.currentSelectedShape.getStencil().namespace()+i,namespace:t.currentSelectedShape.getStencil().namespace()};c.connectedShape=e.currentSelectedShape,c.parent=e.currentSelectedShape.parent,c.containedStencil=s;var u={sourceShape:e.currentSelectedShape,targetStencil:s},g=o.getRules().connectMorph(u);if(!g)return;c.connectingType=g.id();var m=new FLOWABLE.CreateCommand(c,(void 0),(void 0),o.getEditor());o.executeCommands([m])}})},t.editShape=function(){o.edit(t.selectedShape.resourceId)}}),t.propertyClicked=function(e){t.selectedItem.properties[e].hidden||(t.selectedItem.properties[e].mode="write")},t.getPropertyTemplateUrl=function(e){return t.selectedItem.properties[e].templateUrl},t.getPropertyReadModeTemplateUrl=function(e){return t.selectedItem.properties[e].readModeTemplateUrl},t.getPropertyWriteModeTemplateUrl=function(e){return t.selectedItem.properties[e].writeModeTemplateUrl},t.updatePropertyInModel=function(e,i){var n=t.selectedShape;if(i&&(n=n.id!=i&&t.previousSelectedShape&&t.previousSelectedShape.id==i?t.previousSelectedShape:null),n){var s=e.key,a=e.value,l=n.properties.get(s);if(a!=l){var r=ORYX.Core.Command.extend({construct:function(){this.key=s,this.oldValue=l,this.newValue=a,this.shape=n,this.facade=o.getEditor()},execute:function(){this.shape.setProperty(this.key,this.newValue),this.facade.getCanvas().update(),this.facade.updateSelection()},rollback:function(){this.shape.setProperty(this.key,this.oldValue),this.facade.getCanvas().update(),this.facade.updateSelection()}}),d=new r;o.executeCommands([d]),o.handleEvents({type:ORYX.CONFIG.EVENT_PROPWINDOW_PROP_CHANGED,elements:[n],key:s}),e.mode="read";var p={type:FLOWABLE.eventBus.EVENT_TYPE_PROPERTY_VALUE_CHANGED,property:e,oldValue:l,newValue:a};FLOWABLE.eventBus.dispatch(p.type,p)}else e.mode="read"}},t.findStencilItemInGroup=function(e,i){for(var n,s=0;s<i.items.length;s++)if(n=i.items[s],n.id===e)return n;if(i.groups&&i.groups.length>0)for(var a=0;a<i.groups.length;a++)if(n=t.findStencilItemInGroup(e,i.groups[a]))return n},t.getStencilItemById=function(e){for(var i=0;i<t.stencilItemGroups.length;i++){var n=t.stencilItemGroups[i];if(null!==n.items&&void 0!==n.items){var s=t.findStencilItemInGroup(e,n);if(s)return s}else if(n.id===e)return n}},t.dropCallback=function(e,i){if(o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE,highlightId:"shapeRepo.attached"}),o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE,highlightId:"shapeRepo.added"}),o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE,highlightId:"shapeMenu"}),FLOWABLE.eventBus.dispatch(FLOWABLE.eventBus.EVENT_TYPE_HIDE_SHAPE_BUTTONS),t.dragCanContain){var n=t.getStencilItemById(i.draggable[0].id),s={x:e.pageX,y:e.pageY},a=1;if(!isNaN(screen.logicalXDPI)&&!isNaN(screen.systemXDPI)){var l=navigator.userAgent;if(l.indexOf("MSIE")>=0){var r=Math.round(screen.deviceXDPI/screen.logicalXDPI*100);100!==r&&(a=r/100)}}var d=o.getCanvas().node.getScreenCTM();s.x-=d.e/a,s.y-=d.f/a,s.x/=d.a,s.y/=d.d,s.x-=document.documentElement.scrollLeft,s.y-=document.documentElement.scrollTop;var p=t.dragCurrentParent.absoluteXY();s.x-=p.x,s.y-=p.y;for(var c=void 0,u=o.getStencilSets().values(),g=0;g<u.length;g++){for(var m=u[g],v=m.nodes(),E=0;E<v.length;E++)if(v[E].idWithoutNs()===i.draggable[0].id){c=v[E];break}if(!c)for(var f=m.edges(),E=0;E<f.length;E++)if(f[E].idWithoutNs()===i.draggable[0].id){c=f[E];break}}if(!c)return;if(t.quickMenu){var h=o.getSelection();if(h&&1==h.length){var O=h.first(),b={};if(b.type=O.getStencil().namespace()+i.draggable[0].id,b.namespace=O.getStencil().namespace(),b.connectedShape=O,b.parent=t.dragCurrentParent,b.containedStencil=c,!e.ctrlKey){var T=O.bounds.center();20>Math.abs(T.x-s.x)&&(s.x=T.x),20>Math.abs(T.y-s.y)&&(s.y=T.y)}if(b.position=s,"SequenceFlow"!==c.idWithoutNs()&&"Association"!==c.idWithoutNs()&&"MessageFlow"!==c.idWithoutNs()&&"DataAssociation"!==c.idWithoutNs()){var y={sourceShape:O,targetStencil:c},R=o.getRules().connectMorph(y);if(!R)return;b.connectingType=R.id()}var S=new FLOWABLE.CreateCommand(b,t.dropTargetElement,s,o.getEditor());o.executeCommands([S])}}else{var I=!1;"BoundaryErrorEvent"!==c.idWithoutNs()&&"BoundaryTimerEvent"!==c.idWithoutNs()&&"BoundarySignalEvent"!==c.idWithoutNs()&&"BoundaryMessageEvent"!==c.idWithoutNs()&&"BoundaryCancelEvent"!==c.idWithoutNs()&&"BoundaryCompensationEvent"!==c.idWithoutNs()||(s=o.eventCoordinates(e),I=!0);var b={};b.type=t.modelData.model.stencilset.namespace+n.id,b.namespace=t.modelData.model.stencilset.namespace,b.position=s,b.parent=t.dragCurrentParent;var P=ORYX.Core.Command.extend({construct:function(e,t,i,n,s){this.option=e,this.docker=null,this.dockedShape=t,this.dockedShapeParent=t.parent||s.getCanvas(),this.position=n,this.facade=s,this.selection=this.facade.getSelection(),this.shape=null,this.parent=null,this.canAttach=i},execute:function(){this.shape?this.parent&&this.parent.add(this.shape):(this.shape=this.facade.createShape(b),this.parent=this.shape.parent),this.canAttach&&this.shape.dockers&&this.shape.dockers.length&&(this.docker=this.shape.dockers[0],this.dockedShapeParent.add(this.docker.parent),this.docker.setDockedShape(void 0),this.docker.bounds.centerMoveTo(this.position),this.dockedShape!==this.facade.getCanvas()&&this.docker.setDockedShape(this.dockedShape),this.facade.setSelection([this.docker.parent])),this.facade.getCanvas().update(),this.facade.updateSelection()},rollback:function(){this.shape&&(this.facade.setSelection(this.selection.without(this.shape)),this.facade.deleteShape(this.shape)),this.canAttach&&this.docker&&this.docker.setDockedShape(void 0),this.facade.getCanvas().update(),this.facade.updateSelection()}}),S=new P(b,t.dragCurrentParent,I,s,o.getEditor());o.executeCommands([S]);var A={type:FLOWABLE.eventBus.EVENT_TYPE_ITEM_DROPPED,droppedItem:n,position:s};FLOWABLE.eventBus.dispatch(A.type,A)}}t.dragCurrentParent=void 0,t.dragCurrentParentId=void 0,t.dragCurrentParentStencil=void 0,t.dragCanContain=void 0,t.quickMenu=void 0,t.dropTargetElement=void 0},t.overCallback=function(e,i){t.dragModeOver=!0},t.outCallback=function(e,i){t.dragModeOver=!1},t.startDragCallback=function(e,i){t.dragModeOver=!1,t.quickMenu=!1,i.helper.hasClass("stencil-item-dragged")||i.helper.addClass("stencil-item-dragged")},t.startDragCallbackQuickMenu=function(e,i){t.dragModeOver=!1,t.quickMenu=!0},t.dragCallback=function(e,i){if(0!=t.dragModeOver){var n=o.eventCoordinatesXY(e.pageX,e.pageY),s=1;if(!isNaN(screen.logicalXDPI)&&!isNaN(screen.systemXDPI)){var a=navigator.userAgent;if(a.indexOf("MSIE")>=0){var l=Math.round(screen.deviceXDPI/screen.logicalXDPI*100);100!==l&&(s=l/100)}}1!==s&&(n.x=n.x/s,n.y=n.y/s);var r=o.getCanvas().getAbstractShapesAtPosition(n);if(r.length<=0&&e.helper)return t.dragCanContain=!1,!1;if(r[0]instanceof ORYX.Core.Canvas&&o.getCanvas().setHightlightStateBasedOnX(n.x),1==r.length&&r[0]instanceof ORYX.Core.Canvas){var d=t.getStencilItemById(e.target.id),p=r[0];return"Lane"===d.id||"BoundaryErrorEvent"===d.id||"BoundaryMessageEvent"===d.id||"BoundarySignalEvent"===d.id||"BoundaryTimerEvent"===d.id||"BoundaryCancelEvent"===d.id||"BoundaryCompensationEvent"===d.id?(t.dragCanContain=!1,o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_SHOW,highlightId:"shapeRepo.added",elements:[p],style:ORYX.CONFIG.SELECTION_HIGHLIGHT_STYLE_RECTANGLE,color:ORYX.CONFIG.SELECTION_INVALID_COLOR})):(t.dragCanContain=!0,t.dragCurrentParent=p,t.dragCurrentParentId=p.id,o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE,highlightId:"shapeRepo.added"})),o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE,highlightId:"shapeRepo.attached"}),!1}var d=t.getStencilItemById(e.target.id),p=r.reverse().find(function(e){return e instanceof ORYX.Core.Canvas||e instanceof ORYX.Core.Node||e instanceof ORYX.Core.Edge});if(!p)return t.dragCanContain=!1,!1;if("node"===d.type){var c=!1,u=p.getStencil().id();if(t.dragCurrentParentId&&t.dragCurrentParentId===p.id)return!1;var g=t.getStencilItemById(p.getStencil().idWithoutNs());if(g.roles.indexOf("Activity")>-1?d.roles.indexOf("IntermediateEventOnActivityBoundary")>-1&&(c=!0):"Pool"===p.getStencil().idWithoutNs()&&"Lane"===d.id&&(c=!0),c)o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_SHOW,highlightId:"shapeRepo.attached",elements:[p],style:ORYX.CONFIG.SELECTION_HIGHLIGHT_STYLE_RECTANGLE,color:ORYX.CONFIG.SELECTION_VALID_COLOR}),o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE,highlightId:"shapeRepo.added"});else{for(var m=0;m<t.containmentRules.length;m++){var v=t.containmentRules[m];if(v.role===g.id){for(var E=0;E<v.contains.length;E++)if(d.roles.indexOf(v.contains[E])>-1){c=!0;break}if(c)break}}o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_SHOW,highlightId:"shapeRepo.added",elements:[p],color:c?ORYX.CONFIG.SELECTION_VALID_COLOR:ORYX.CONFIG.SELECTION_INVALID_COLOR}),o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE,highlightId:"shapeRepo.attached"})}t.dragCurrentParent=p,t.dragCurrentParentId=p.id,t.dragCurrentParentStencil=u,t.dragCanContain=c}else{var f=o.getCanvas(),h=!1,O=t.getStencilItemById(p.getStencil().idWithoutNs());if(O){var b=!1;"Association"!==stencil.idWithoutNs()||"TextAnnotation"!==curCan.getStencil().idWithoutNs()&&"BoundaryCompensationEvent"!==curCan.getStencil().idWithoutNs()?"DataAssociation"===stencil.idWithoutNs()&&"DataStore"===curCan.getStencil().idWithoutNs()&&(b=!0):b=!0,(O.canConnectTo||b)&&(h=!0)}t.dragCurrentParent=f,t.dragCurrentParentId=f.id,t.dragCurrentParentStencil=f.getStencil().id(),t.dragCanContain=h,o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_SHOW,highlightId:"shapeRepo.added",elements:[f],color:ORYX.CONFIG.SELECTION_VALID_COLOR}),o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_HIDE,highlightId:"shapeRepo.attached"})}}},t.dragCallbackQuickMenu=function(e,i){if(0!=t.dragModeOver){var n=o.eventCoordinatesXY(e.pageX,e.pageY),s=1;if(!isNaN(screen.logicalXDPI)&&!isNaN(screen.systemXDPI)){var a=navigator.userAgent;if(a.indexOf("MSIE")>=0){var l=Math.round(screen.deviceXDPI/screen.logicalXDPI*100);100!==l&&(s=l/100)}}1!==s&&(n.x=n.x/s,n.y=n.y/s);var r=o.getCanvas().getAbstractShapesAtPosition(n);if(r.length<=0&&e.helper)return t.dragCanContain=!1,!1;r[0]instanceof ORYX.Core.Canvas&&o.getCanvas().setHightlightStateBasedOnX(n.x);for(var d=void 0,p=o.getStencilSets().values(),c=0;c<p.length;c++){for(var u=p[c],g=u.nodes(),m=0;m<g.length;m++)if(g[m].idWithoutNs()===e.target.id){d=g[m];break}if(!d)for(var v=u.edges(),m=0;m<v.length;m++)if(v[m].idWithoutNs()===e.target.id){d=v[m];break}}var E=r.last(),f=!1;if("node"===d.type()){var h=o.getRules().canContain({containingShape:E,containedStencil:d}),O=r.reverse().find(function(e){return e instanceof ORYX.Core.Canvas||e instanceof ORYX.Core.Node||e instanceof ORYX.Core.Edge});if(!O)return t.dragCanContain=!1,!1;t.dragCurrentParent=O,t.dragCurrentParentId=O.id,t.dragCurrentParentStencil=O.getStencil().id(),t.dragCanContain=h,t.dropTargetElement=O,f=h}else{var b=o.getSelection();if(b&&1==b.length){var T=b.first(),y=E,R=!1,S=t.getStencilItemById(y.getStencil().idWithoutNs());if(S){var I=!1;if("Association"!==d.idWithoutNs()||"TextAnnotation"!==y.getStencil().idWithoutNs()&&"BoundaryCompensationEvent"!==y.getStencil().idWithoutNs()?"DataAssociation"===d.idWithoutNs()&&"DataStore"===y.getStencil().idWithoutNs()&&(I=!0):I=!0,S.canConnectTo||I)for(;!R&&y&&!(y instanceof ORYX.Core.Canvas);)E=y,R=o.getRules().canConnect({sourceShape:T,edgeStencil:d,targetShape:y}),y=y.parent}var O=o.getCanvas();f=R,t.dragCurrentParent=O,t.dragCurrentParentId=O.id,t.dragCurrentParentStencil=O.getStencil().id(),t.dragCanContain=R,t.dropTargetElement=E}}o.handleEvents({type:ORYX.CONFIG.EVENT_HIGHLIGHT_SHOW,highlightId:"shapeMenu",elements:[E],color:f?ORYX.CONFIG.SELECTION_VALID_COLOR:ORYX.CONFIG.SELECTION_INVALID_COLOR})}}}]);var FLOWABLE=FLOWABLE||{};FLOWABLE.CreateCommand=ORYX.Core.Command.extend({construct:function(e,t,i,n){this.option=e,this.currentReference=t,this.position=i,this.facade=n,this.shape,this.edge,this.targetRefPos,this.sourceRefPos,this.connectedShape=e.connectedShape,this.connectingType=e.connectingType,this.namespace=e.namespace,this.type=e.type,this.containedStencil=e.containedStencil,this.parent=e.parent,this.currentReference=t,this.shapeOptions=e.shapeOptions},execute:function(){if(this.shape?this.shape instanceof ORYX.Core.Node?(this.parent.add(this.shape),this.edge&&(this.facade.getCanvas().add(this.edge),this.edge.dockers.first().setDockedShape(this.connectedShape),this.edge.dockers.first().setReferencePoint(this.sourceRefPos),this.edge.dockers.last().setDockedShape(this.shape),this.edge.dockers.last().setReferencePoint(this.targetRefPos)),this.facade.setSelection([this.shape])):this.shape instanceof ORYX.Core.Edge&&(this.facade.getCanvas().add(this.shape),this.shape.dockers.first().setDockedShape(this.connectedShape),this.shape.dockers.first().setReferencePoint(this.sourceRefPos)):(this.shape=this.facade.createShape(this.option),this.edge=this.shape instanceof ORYX.Core.Edge?void 0:this.shape.getIncomingShapes().first()),this.currentReference&&this.position)if(this.shape instanceof ORYX.Core.Edge){if(this.currentReference instanceof ORYX.Core.Canvas)this.shape.dockers.last().bounds.centerMoveTo(this.position);else if(this.shape.dockers.last().setDockedShape(this.currentReference),"TextAnnotation"===this.currentReference.getStencil().idWithoutNs()){var e={};e.x=0,e.y=this.currentReference.bounds.height()/2,this.shape.dockers.last().setReferencePoint(e)}else this.shape.dockers.last().setReferencePoint(this.currentReference.bounds.midPoint());this.sourceRefPos=this.shape.dockers.first().referencePoint,this.targetRefPos=this.shape.dockers.last().referencePoint}else this.edge&&(this.sourceRefPos=this.edge.dockers.first().referencePoint,this.targetRefPos=this.edge.dockers.last().referencePoint);else{var t=this.containedStencil,i=this.connectedShape,n=i.bounds,s=this.shape.bounds,a=n.center();"north"===t.defaultAlign()?a.y-=n.height()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET+s.height()/2:"northeast"===t.defaultAlign()?(a.x+=n.width()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET_CORNER+s.width()/2,a.y-=n.height()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET_CORNER+s.height()/2):"southeast"===t.defaultAlign()?(a.x+=n.width()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET_CORNER+s.width()/2,a.y+=n.height()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET_CORNER+s.height()/2):"south"===t.defaultAlign()?a.y+=n.height()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET+s.height()/2:"southwest"===t.defaultAlign()?(a.x-=n.width()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET_CORNER+s.width()/2,a.y+=n.height()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET_CORNER+s.height()/2):"west"===t.defaultAlign()?a.x-=n.width()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET+s.width()/2:"northwest"===t.defaultAlign()?(a.x-=n.width()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET_CORNER+s.width()/2,a.y-=n.height()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET_CORNER+s.height()/2):a.x+=n.width()/2+ORYX.CONFIG.SHAPEMENU_CREATE_OFFSET+s.width()/2,this.shape.bounds.centerMoveTo(a),this.shape instanceof ORYX.Core.Node&&(this.shape.dockers||[]).each(function(e){e.bounds.centerMoveTo(a)}),this.position=a,this.edge&&(this.sourceRefPos=this.edge.dockers.first().referencePoint,this.targetRefPos=this.edge.dockers.last().referencePoint)}this.facade.getCanvas().update(),this.facade.updateSelection()},rollback:function(){this.facade.deleteShape(this.shape),this.edge&&this.facade.deleteShape(this.edge),this.facade.setSelection(this.facade.getSelection().without(this.shape,this.edge))}}),angular.module("flowableModeler").controller("ToolbarController",["$scope","$http","$modal","$q","$rootScope","$translate","$location","editorManager",function(e,t,i,n,s,a,o,l){e.editorFactory.promise.then(function(){var t=FLOWABLE.TOOLBAR_CONFIG.items;e.items=[];for(var i=0;i<t.length;i++)"form"===s.modelData.model.modelType?t[i].disableInForm||e.items.push(t[i]):e.items.push(t[i])}),e.secondaryItems=FLOWABLE.TOOLBAR_CONFIG.secondaryItems;var r=function(e,t){for(var i=Array.prototype.slice.call(arguments).splice(2),n=e.split("."),s=n.pop(),a=0;a<n.length;a++)t=t[n[a]];return t[s].apply(this,i)};e.toolbarButtonClicked=function(o){var d=e.items[o],p={$scope:e,$rootScope:s,$http:t,$modal:i,$q:n,$translate:a,editorManager:l};r(d.action,window,p);var c={type:FLOWABLE.eventBus.EVENT_TYPE_TOOLBAR_BUTTON_CLICKED,toolbarItem:d};FLOWABLE.eventBus.dispatch(c.type,c)},e.toolbarSecondaryButtonClicked=function(s){var d=e.secondaryItems[s],p={$scope:e,$http:t,$modal:i,$q:n,$translate:a,$location:o,editorManager:l};r(d.action,window,p)},Mousetrap.bind("mod+z",function(o){var r={$scope:e,$rootScope:s,$http:t,$modal:i,$q:n,$translate:a,editorManager:l};return FLOWABLE.TOOLBAR.ACTIONS.undo(r),!1}),Mousetrap.bind("mod+y",function(o){var r={$scope:e,$rootScope:s,$http:t,$modal:i,$q:n,$translate:a,editorManager:l};return FLOWABLE.TOOLBAR.ACTIONS.redo(r),!1}),Mousetrap.bind("mod+c",function(o){var r={$scope:e,$rootScope:s,$http:t,$modal:i,$q:n,$translate:a,editorManager:l};return FLOWABLE.TOOLBAR.ACTIONS.copy(r),!1}),Mousetrap.bind("mod+v",function(o){var r={$scope:e,$rootScope:s,$http:t,$modal:i,$q:n,$translate:a,editorManager:l};return FLOWABLE.TOOLBAR.ACTIONS.paste(r),!1}),Mousetrap.bind(["del"],function(o){var r={$scope:e,$rootScope:s,$http:t,$modal:i,$q:n,$translate:a,editorManager:l};return FLOWABLE.TOOLBAR.ACTIONS.deleteItem(r),!1}),e.undoStack=[],e.redoStack=[],FLOWABLE.eventBus.addListener(FLOWABLE.eventBus.EVENT_TYPE_UNDO_REDO_RESET,function(e){if(this.undoStack=[],this.redoStack=[],this.items)for(var t=0;t<this.items.length;t++){var i=this.items[t];"FLOWABLE.TOOLBAR.ACTIONS.undo"!==i.action&&"FLOWABLE.TOOLBAR.ACTIONS.redo"!==i.action||(i.enabled=!1)}},e),e.editorFactory.promise.then(function(){l.registerOnEvent(ORYX.CONFIG.EVENT_EXECUTE_COMMANDS,function(t){if(t.commands){e.undoStack.push(t.commands),e.redoStack=[];for(var i=0;i<e.items.length;i++){var n=e.items[i];"FLOWABLE.TOOLBAR.ACTIONS.undo"===n.action?n.enabled=!0:"FLOWABLE.TOOLBAR.ACTIONS.redo"===n.action&&(n.enabled=!1)}l.getCanvas().update(),l.updateSelection()}})}),e.editorFactory.promise.then(function(){l.registerOnEvent(ORYX.CONFIG.EVENT_SELECTION_CHANGED,function(t){for(var i=t.elements,n=0;n<e.items.length;n++){var s=e.items[n];if(s.enabledAction&&"element"===s.enabledAction){var a=1;s.minSelectionCount&&(a=s.minSelectionCount),i.length>=a&&!s.enabled?e.safeApply(function(){s.enabled=!0}):0==i.length&&s.enabled&&e.safeApply(function(){s.enabled=!1})}}})})}]),angular.module("flowableModeler").controller("HeaderController",["$rootScope","$scope","$http","$timeout",function(e,t,i,n){t.headerConfig=FLOWABLE.HEADER_CONFIG}]),angular.module("flowableModeler").controller("FlowableBpmShapeSelectionCtrl",["$rootScope","$scope","$timeout","$translate","editorManager",function(e,t,i,n,s){t.currentSelectedMorph=void 0,t.availableMorphShapes=[];for(var a=0;a<t.morphShapes.length;a++)t.morphShapes[a].id!=t.currentSelectedShape.getStencil().idWithoutNs()&&t.availableMorphShapes.push(t.morphShapes[a]);t.gridOptions={data:t.availableMorphShapes,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"objectId",displayName:"Icon",width:50,cellTemplate:"views/popups/icon-template.html"},{field:"name",displayName:"Name",cellTemplate:'<div class="ui-grid-cell-contents">{{"" + row.entity[col.field] | translate}}</div>'}]},t.gridOptions.onRegisterApi=function(e){t.gridApi=e,e.selection.on.rowSelectionChanged(t,function(e){e.isSelected?t.currentSelectedMorph=e.entity:t.currentSelectedMorph=void 0})},t.select=function(){if(t.currentSelectedMorph){var e=ORYX.Core.Command.extend({construct:function(e,t,i){this.shape=e,this.stencil=t,this.facade=i},execute:function(){var e=this.shape,t=this.stencil,i=e.resourceId,n=e.serialize();t.properties().each(function(e){e.readonly()&&(n=n.reject(function(t){return t.name==e.id()}))}.bind(this)),this.newShape?(newShape=this.newShape,this.facade.getCanvas().add(newShape)):newShape=this.facade.createShape({type:t.id(),namespace:t.namespace(),resourceId:i});var s=n.find(function(e){return"oryx"===e.prefix&&"bounds"===e.name}),a=null;if(this.facade.getRules().preserveBounds(e.getStencil())){var o=e.bounds.height(),l=e.bounds.width();newShape.minimumSize&&(e.bounds.height()<newShape.minimumSize.height&&(o=newShape.minimumSize.height),e.bounds.width()<newShape.minimumSize.width&&(l=newShape.minimumSize.width)),newShape.maximumSize&&(e.bounds.height()>newShape.maximumSize.height&&(o=newShape.maximumSize.height),e.bounds.width()>newShape.maximumSize.width&&(l=newShape.maximumSize.width)),a={a:{x:e.bounds.a.x,y:e.bounds.a.y},b:{x:e.bounds.a.x+l,y:e.bounds.a.y+o}}}else{var r=s.value.split(",");if(parseInt(r[0],10)>parseInt(r[2],10)){var d=r[0];r[0]=r[2],r[2]=d,d=r[1],r[1]=r[3],r[3]=d}r[2]=parseInt(r[0],10)+newShape.bounds.width(),r[3]=parseInt(r[1],10)+newShape.bounds.height(),s.value=r.join(",")}var p=e.bounds.center();null!==a&&newShape.bounds.set(a),this.setRelatedDockers(e,newShape);var c=e.node.parentNode,u=e.node.nextSibling;this.facade.deleteShape(e),newShape.deserialize(n),e.getStencil().property("oryx-bgcolor")&&e.properties["oryx-bgcolor"]&&e.getStencil().property("oryx-bgcolor").value().toUpperCase()==e.properties["oryx-bgcolor"].toUpperCase()&&newShape.getStencil().property("oryx-bgcolor")&&newShape.setProperty("oryx-bgcolor",newShape.getStencil().property("oryx-bgcolor").value()),null!==a&&newShape.bounds.set(a),"edge"!==newShape.getStencil().type()&&0!=newShape.dockers.length&&newShape.dockers[0].getDockedShape()||newShape.bounds.centerMoveTo(p),"node"!==newShape.getStencil().type()||0!=newShape.dockers.length&&newShape.dockers[0].getDockedShape()||this.setRelatedDockers(newShape,newShape),
u?c.insertBefore(newShape.node,u):c.appendChild(newShape.node),this.facade.setSelection([newShape]),this.facade.getCanvas().update(),this.facade.updateSelection(),this.newShape=newShape},rollback:function(){this.shape&&this.newShape&&this.newShape.parent&&(this.newShape.parent.add(this.shape),this.setRelatedDockers(this.newShape,this.shape),this.facade.deleteShape(this.newShape),this.facade.setSelection([this.shape]),this.facade.getCanvas().update(),this.facade.updateSelection())},setRelatedDockers:function(e,t){"node"===e.getStencil().type()?((e.incoming||[]).concat(e.outgoing||[]).each(function(i){i.dockers.each(function(n){if(n.getDockedShape()==e){var s=Object.clone(n.referencePoint),a={x:s.x*t.bounds.width()/e.bounds.width(),y:s.y*t.bounds.height()/e.bounds.height()};if(n.setDockedShape(t),n.setReferencePoint(a),i instanceof ORYX.Core.Edge)n.bounds.centerMoveTo(a);else{var o=e.absoluteXY();n.bounds.centerMoveTo({x:a.x+o.x,y:a.y+o.y})}}})}),e.dockers.length>0&&e.dockers.first().getDockedShape()&&(t.dockers.first().setDockedShape(e.dockers.first().getDockedShape()),t.dockers.first().setReferencePoint(Object.clone(e.dockers.first().referencePoint)))):(t.dockers.first().setDockedShape(e.dockers.first().getDockedShape()),t.dockers.first().setReferencePoint(e.dockers.first().referencePoint),t.dockers.last().setDockedShape(e.dockers.last().getDockedShape()),t.dockers.last().setReferencePoint(e.dockers.last().referencePoint))}}),i=void 0,n=s.getStencilSets().values(),a=t.currentSelectedMorph.id;t.currentSelectedMorph.genericTaskId&&(a=t.currentSelectedMorph.genericTaskId);for(var o=0;o<n.length;o++)for(var l=n[o],r=l.nodes(),d=0;d<r.length;d++)if(r[d].idWithoutNs()===a){i=r[d];break}if(!i)return;var p=new e(t.currentSelectedShape,i,s.getEditor());s.executeCommands([p])}t.close()},t.cancel=function(){t.$hide()},t.close=function(){t.$hide()}}]);var FlowableDefineDataCtrl=["$rootScope","$scope","dialog","$timeout","$translate",function(e,t,i,n,s){t.definedDataItems=[],t.selectedDataItems=[],t.gridOptions={data:"definedDataItems",enableRowSelection:!0,headerRowHeight:28,multiSelect:!1,keepLastSelected:!1,selectedItems:t.selectedDataItems,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"name",displayName:"Name"},{field:"value",displayName:"Value"}]},t.addNewDataItem=function(){t.definedDataItems.push({name:"",value:""})},t.removeDataItem=function(){if(t.selectedDataItems.length>0){var e=t.definedDataItems.indexOf(t.selectedDataItems[0]);t.gridOptions.selectItem(e,!1),t.definedDataItems.splice(e,1),t.selectedDataItems.length=0,e<t.definedDataItems.length?t.gridOptions.selectItem(e+1,!0):t.definedDataItems.length>0&&t.gridOptions.selectItem(e-1,!0)}},t.moveDataItemUp=function(){if(t.selectedParameters.length>0){var e=t.definedDataItems.indexOf(t.selectedDataItems[0]);if(0!=e){var i=t.definedDataItems[e];t.definedDataItems.splice(e,1),n(function(){t.definedDataItems.splice(e+-1,0,i)},100)}}},t.moveDataItemDown=function(){if(t.selectedParameters.length>0){var e=t.definedDataItems.indexOf(t.selectedDataItems[0]);if(e!=t.definedDataItems.length-1){var i=t.definedDataItems[e];t.definedDataItems.splice(e,1),n(function(){t.definedDataItems.splice(e+1,0,i)},100)}}},t.save=function(){i.close()},t.cancel=function(){i.close()},t.close=function(){i.close()}}];angular.module("flowableModeler").controller("ProcessNavigatorController",["editorManager","$scope",function(e,t){function i(e){"event-type-property-value-changed"===e.type?"oryx-overrideid"!==e.property.key&&"oryx-name"!==e.property.key||n():"propertyChanged"===e.type?"oryx-overrideid"!==e.name&&"oryx-name"!==e.name||n():e.type===ORYX.CONFIG.ACTION_DELETE_COMPLETED?n():"event-type-item-dropped"===e.type&&n()}function n(){return!!t.isEditorReady&&void(e.isLoading()||(t.treeview=e.getTree()))}t.showSubProcess=function(t){var i=e.getChildShapeByResourceId(t.resourceId);e.setSelection([i],[],!0)},t.treeview={},t.isEditorReady=!1,t.edit=function(t){e.edit(t)},FLOWABLE.eventBus.addListener(FLOWABLE.eventBus.EVENT_TYPE_EDITOR_READY,function(s){t.isEditorReady=!0,n(),e.registerOnEvent(ORYX.CONFIG.ACTION_DELETE_COMPLETED,i),e.registerOnEvent(ORYX.CONFIG.EVENT_UNDO_ROLLBACK,n)}),FLOWABLE.eventBus.addListener(FLOWABLE.eventBus.EVENT_TYPE_PROPERTY_VALUE_CHANGED,i),FLOWABLE.eventBus.addListener(FLOWABLE.eventBus.EVENT_TYPE_ITEM_DROPPED,i),FLOWABLE.eventBus.addListener("EDITORMANAGER-EDIT-ACTION",function(){n()})}]);var FLOWABLE=FLOWABLE||{};FLOWABLE.TOOLBAR={ACTIONS:{saveModel:function(e){_internalCreateModal({backdrop:!0,keyboard:!0,template:"views/popups/save-model.html",scope:e.$scope},e.$modal,e.$scope)},validate:function(e){_internalCreateModal({backdrop:!0,keyboard:!0,template:"views/popups/validate-model.html",scope:e.$scope},e.$modal,e.$scope)},undo:function(e){var t=e.$scope.undoStack.pop();if(t){e.$scope.redoStack.push(t),e.$rootScope&&e.$rootScope.forceSelectionRefresh&&(e.$rootScope.forceSelectionRefresh=!0);for(var i=t.length-1;i>=0;--i)t[i].rollback();e.editorManager.handleEvents({type:ORYX.CONFIG.EVENT_UNDO_ROLLBACK,commands:t}),e.editorManager.getCanvas().update(),e.editorManager.updateSelection()}var n=!1;0==e.$scope.undoStack.length&&(n=!0);var s=!1;if(e.$scope.redoStack.length>0&&(s=!0),n||s)for(var i=0;i<e.$scope.items.length;i++){var a=e.$scope.items[i];n&&"FLOWABLE.TOOLBAR.ACTIONS.undo"===a.action?e.$scope.safeApply(function(){a.enabled=!1}):s&&"FLOWABLE.TOOLBAR.ACTIONS.redo"===a.action&&e.$scope.safeApply(function(){a.enabled=!0})}},redo:function(e){var t=e.$scope.redoStack.pop();t&&(e.$scope.undoStack.push(t),e.$rootScope&&e.$rootScope.forceSelectionRefresh&&(e.$rootScope.forceSelectionRefresh=!0),t.each(function(e){e.execute()}),e.editorManager.handleEvents({type:ORYX.CONFIG.EVENT_UNDO_EXECUTE,commands:t}),e.editorManager.getCanvas().update(),e.editorManager.updateSelection());var i=!1;e.$scope.undoStack.length>0&&(i=!0);var n=!1;if(0==e.$scope.redoStack.length&&(n=!0),i||n)for(var s=0;s<e.$scope.items.length;s++){var a=e.$scope.items[s];i&&"FLOWABLE.TOOLBAR.ACTIONS.undo"===a.action?e.$scope.safeApply(function(){a.enabled=!0}):n&&"FLOWABLE.TOOLBAR.ACTIONS.redo"===a.action&&e.$scope.safeApply(function(){a.enabled=!1})}},cut:function(e){FLOWABLE.TOOLBAR.ACTIONS._getOryxEditPlugin(e).editCut();for(var t=0;t<e.$scope.items.length;t++){var i=e.$scope.items[t];"FLOWABLE.TOOLBAR.ACTIONS.paste"===i.action&&e.$scope.safeApply(function(){i.enabled=!0})}},copy:function(e){FLOWABLE.TOOLBAR.ACTIONS._getOryxEditPlugin(e).editCopy();for(var t=0;t<e.$scope.items.length;t++){var i=e.$scope.items[t];"FLOWABLE.TOOLBAR.ACTIONS.paste"===i.action&&e.$scope.safeApply(function(){i.enabled=!0})}},paste:function(e){FLOWABLE.TOOLBAR.ACTIONS._getOryxEditPlugin(e).editPaste()},deleteItem:function(e){FLOWABLE.TOOLBAR.ACTIONS._getOryxEditPlugin(e).editDelete()},addBendPoint:function(e){FLOWABLE_EDITOR_TOUR.sequenceFlowBendpoint(e.$scope,e.$translate,e.$q,!0);var t=FLOWABLE.TOOLBAR.ACTIONS._getOryxDockerPlugin(e),i=!t.enabledAdd();t.setEnableAdd(i),i?(t.setEnableRemove(!1),document.body.style.cursor="pointer"):document.body.style.cursor="default"},removeBendPoint:function(e){FLOWABLE_EDITOR_TOUR.sequenceFlowBendpoint(e.$scope,e.$translate,e.$q,!0);var t=FLOWABLE.TOOLBAR.ACTIONS._getOryxDockerPlugin(e),i=!t.enabledRemove();t.setEnableRemove(i),i?(t.setEnableAdd(!1),document.body.style.cursor="pointer"):document.body.style.cursor="default"},_getOryxEditPlugin:function(e){var t=e.$scope,i=e.editorManager;return void 0!==t.oryxEditPlugin&&null!==t.oryxEditPlugin||(t.oryxEditPlugin=new ORYX.Plugins.Edit(i.getEditor())),t.oryxEditPlugin},zoomIn:function(e){FLOWABLE.TOOLBAR.ACTIONS._getOryxViewPlugin(e).zoom([1+ORYX.CONFIG.ZOOM_OFFSET])},zoomOut:function(e){FLOWABLE.TOOLBAR.ACTIONS._getOryxViewPlugin(e).zoom([1-ORYX.CONFIG.ZOOM_OFFSET])},zoomActual:function(e){FLOWABLE.TOOLBAR.ACTIONS._getOryxViewPlugin(e).setAFixZoomLevel(1)},zoomFit:function(e){FLOWABLE.TOOLBAR.ACTIONS._getOryxViewPlugin(e).zoomFitToModel()},alignVertical:function(e){FLOWABLE.TOOLBAR.ACTIONS._getOryxArrangmentPlugin(e).alignShapes([ORYX.CONFIG.EDITOR_ALIGN_MIDDLE])},alignHorizontal:function(e){FLOWABLE.TOOLBAR.ACTIONS._getOryxArrangmentPlugin(e).alignShapes([ORYX.CONFIG.EDITOR_ALIGN_CENTER])},sameSize:function(e){FLOWABLE.TOOLBAR.ACTIONS._getOryxArrangmentPlugin(e).alignShapes([ORYX.CONFIG.EDITOR_ALIGN_SIZE])},help:function(e){FLOWABLE_EDITOR_TOUR.gettingStarted(e.$scope,e.$translate,e.$q)},_getOryxViewPlugin:function(e){var t=e.$scope,i=e.editorManager;return void 0!==t.oryxViewPlugin&&null!==t.oryxViewPlugin||(t.oryxViewPlugin=new ORYX.Plugins.View(i.getEditor())),t.oryxViewPlugin},_getOryxArrangmentPlugin:function(e){var t=e.$scope,i=e.editorManager;return void 0!==t.oryxArrangmentPlugin&&null!==t.oryxArrangmentPlugin||(t.oryxArrangmentPlugin=new ORYX.Plugins.Arrangement(i.getEditor())),t.oryxArrangmentPlugin},_getOryxDockerPlugin:function(e){var t=e.$scope,i=e.editorManager;return void 0!==t.oryxDockerPlugin&&null!==t.oryxDockerPlugin||(t.oryxDockerPlugin=new ORYX.Plugins.AddDocker(i.getEditor())),t.oryxDockerPlugin}}},angular.module("flowableModeler").controller("SaveModelCtrl",["$rootScope","$scope","$http","$route","$location","editorManager",function(e,t,i,n,s,a){a.getCurrentModelId()!=a.getModelId()&&a.edit(a.getModelId());var o=a.getBaseModelData(),l="";o.description&&(l=o.description);var r={name:o.name,key:o.key,description:l,newVersion:!1,comment:""};t.saveDialog=r,t.status={loading:!1},t.close=function(){t.$hide()},t.saveAndClose=function(){t.save(function(){window.close()})},t.save=function(e){if(console.log("这个是保存的方法=========================="),t.saveDialog.name&&0!=t.saveDialog.name.length&&t.saveDialog.key&&0!=t.saveDialog.key.length){t.status={loading:!0},o.name=t.saveDialog.name,o.key=t.saveDialog.key,o.description=t.saveDialog.description;var n=a.getModel();console.log(n.childShapes),angular.forEach(n.childShapes,function(e){void 0!=e.properties.multiinstance_collection&&"all"==e.properties.multiinstance_variable?e.properties.multiinstance_collection="${"+e.properties.name+"}":void 0!=e.properties.multiinstance_collection&&""==e.properties.multiinstance_variable&&(e.properties.multiinstance_collection="")});var s={modeltype:o.model.modelType,jsonXml:JSON.stringify(n),name:t.saveDialog.name,key:t.saveDialog.key,description:t.saveDialog.description,newVersion:t.saveDialog.newVersion,comment:t.saveDialog.comment,lastUpdated:o.lastUpdated};t.error&&t.error.isConflict&&(s.conflictResolveAction=t.error.conflictResolveAction,"saveAs"===t.error.conflictResolveAction&&(s.saveAs=t.error.saveAs)),i({method:"POST",data:s,ignoreErrors:!0,headers:{Token:a.getToken(),Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},url:FLOWABLE.URL.putModel(o.modelId)}).success(function(i,n,l,r){a.handleEvents({type:ORYX.CONFIG.EVENT_SAVED}),t.modelData.name=t.saveDialog.name,t.modelData.key=t.saveDialog.key,t.modelData.lastUpdated=i.lastUpdated,t.status.loading=!1,t.$hide();var d={type:FLOWABLE.eventBus.EVENT_TYPE_MODEL_SAVED,model:s,modelId:o.modelId,eventType:"update-model"};FLOWABLE.eventBus.dispatch(FLOWABLE.eventBus.EVENT_TYPE_MODEL_SAVED,d),t.error=void 0,t.status.loading=!1,e&&e()}).error(function(e,i,n,s){409==i?(t.error={},t.error.isConflict=!0,t.error.userFullName=e.customData.userFullName,t.error.isNewVersionAllowed=e.customData.newVersionAllowed,t.error.saveAs=o.name+"_2"):(t.error=void 0,t.saveDialog.errorMessage=e.message),t.status.loading=!1})}},t.isOkButtonDisabled=function(){return!t.status.loading&&(!t.error||!t.error.conflictResolveAction||"saveAs"===t.error.conflictResolveAction&&(!t.error.saveAs||0==t.error.saveAs.length))},t.okClicked=function(){t.error&&("discardChanges"===t.error.conflictResolveAction?(t.close(),n.reload()):"overwrite"===t.error.conflictResolveAction||"newVersion"===t.error.conflictResolveAction?t.save():"saveAs"===t.error.conflictResolveAction&&t.save(function(){e.ignoreChanges=!0,window.close()}))}}]),angular.module("flowableModeler").controller("ValidateModelCtrl",["$scope","$http","editorManager",function(e,t,i){var n=(i.getEditor(),i.getModel());e.status={loading:!0},e.model={errors:[]},e.errorGrid={data:e.model.errors,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"activityName",displayName:"Name",width:125},{field:"defaultDescription",displayName:"Description"},{field:"warning",displayName:"Critical",cellTemplate:"views/properties/errorgrid-critical.html",width:100}]},e.errorGrid.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(t){t.isSelected&&(i.navigateTo(t.entity.activityId),e.$hide())})},t({url:FLOWABLE.URL.validateModel(),method:"POST",cache:!1,headers:{Token:i.getToken(),"Content-Type":"application/json;charset=utf-8"},data:n}).then(function(t){e.status.loading=!1,t.data.forEach(function(t){e.model.errors.push(t)})},function(e){console.log(e)})}]),angular.module("flowableModeler").controller("FlowableStringPropertyCtrl",["$scope",function(e){e.shapeId=e.selectedShape.id,e.valueFlushed=!1,e.inputBlurred=function(){e.valueFlushed=!0,e.property.value&&(e.property.value=e.property.value.replace(/(<([^>]+)>)/gi,"")),e.updatePropertyInModel(e.property)},e.enterPressed=function(t){t&&13===t.which&&(t.preventDefault(),e.inputBlurred())},e.$on("$destroy",function(){e.valueFlushed||(e.property.value&&(e.property.value=e.property.value.replace(/(<([^>]+)>)/gi,"")),e.updatePropertyInModel(e.property,e.shapeId))})}]),angular.module("flowableModeler").controller("FlowableBooleanPropertyCtrl",["$scope",function(e){e.changeValue=function(){if("oryx-defaultflow"===e.property.key&&e.property.value){var t=e.selectedShape;if(t){var i=t.getIncomingShapes();if(i&&i.length>0){var n=i[0],s=n.getOutgoingShapes();if(s&&s.length>1)for(var a=0;a<s.length;a++)if(s[a].resourceId!=t.resourceId){var o=s[a].properties.get("oryx-defaultflow");o&&s[a].setProperty("oryx-defaultflow",!1,!0)}}}}e.updatePropertyInModel(e.property)}}]),angular.module("flowableModeler").controller("FlowableTextPropertyCtrl",["$scope","$modal",function(e,t){var i={template:"views/properties/text-popup.html",scope:e};_internalCreateModal(i,t,e)}]),angular.module("flowableModeler").controller("FlowableTextPropertyPopupCtrl",["$scope",function(e){e.save=function(){e.updatePropertyInModel(e.property),e.close()},e.close=function(){e.property.mode="read",e.$hide()}}]),angular.module("flowableModeler").controller("FlowableExecutionListenersCtrl",["$scope","$modal","$timeout","$translate",function(e,t,i,n){var s={template:"views/properties/execution-listeners-popup.html",scope:e};_internalCreateModal(s,t,e)}]),angular.module("flowableModeler").controller("FlowableExecutionListenersPopupCtrl",["$scope","$q","$translate","$timeout",function(e,t,i,n){if(void 0!==e.property.value&&null!==e.property.value&&void 0!==e.property.value.executionListeners&&null!==e.property.value.executionListeners){e.property.value.executionListeners.constructor==String?e.executionListeners=JSON.parse(e.property.value.executionListeners):e.executionListeners=angular.copy(e.property.value.executionListeners);for(var s=0;s<e.executionListeners.length;s++){var a=e.executionListeners[s];void 0!==a.className&&""!==a.className?a.implementation=a.className:void 0!==a.expression&&""!==a.expression?a.implementation=a.expression:void 0!==a.delegateExpression&&""!==a.delegateExpression&&(a.implementation=a.delegateExpression)}}else e.executionListeners=[];e.selectedListener=void 0,e.selectedField=void 0,e.fields=[],e.translationsRetrieved=!1,e.labels={};var o=i("PROPERTY.EXECUTIONLISTENERS.EVENT"),l=i("PROPERTY.EXECUTIONLISTENERS.FIELDS.IMPLEMENTATION"),r=i("PROPERTY.EXECUTIONLISTENERS.FIELDS.NAME");t.all([o,l,r]).then(function(t){e.labels.eventLabel=t[0],e.labels.implementationLabel=t[1],e.labels.nameLabel=t[2],e.translationsRetrieved=!0,e.gridOptions={data:e.executionListeners,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"event",displayName:e.labels.eventLabel},{field:"implementation",displayName:e.labels.implementationLabel}]},e.gridOptions.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(t){if(e.selectedListener=t.entity,e.selectedField=void 0,e.selectedListener){var i=e.selectedListener.fields;if(void 0!==i&&null!==i)for(var n=0;n<i.length;n++){var s=i[n];void 0!==s.stringValue&&""!==s.stringValue?s.implementation=s.stringValue:void 0!==s.expression&&""!==s.expression?s.implementation=s.expression:void 0!==s.string&&""!==s.string&&(s.implementation=s.string)}else e.selectedListener.fields=[];e.fields.length=0;for(var n=0;n<e.selectedListener.fields.length;n++)e.fields.push(e.selectedListener.fields[n])}})},e.gridFieldOptions={data:e.fields,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"name",displayName:e.labels.name},{field:"implementation",displayName:e.labels.implementationLabel}]},e.gridFieldOptions.onRegisterApi=function(t){e.fieldGridApi=t,t.selection.on.rowSelectionChanged(e,function(t){e.selectedField=t.entity})}}),e.listenerDetailsChanged=function(){""!==e.selectedListener.className?e.selectedListener.implementation=e.selectedListener.className:""!==e.selectedListener.expression?e.selectedListener.implementation=e.selectedListener.expression:""!==e.selectedListener.delegateExpression?e.selectedListener.implementation=e.selectedListener.delegateExpression:e.selectedListener.implementation=""},e.addNewListener=function(){var t={event:"start",implementation:"",className:"",expression:"",delegateExpression:""};e.executionListeners.push(t),n(function(){e.gridApi.selection.toggleRowSelection(t)})},e.removeListener=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.executionListeners.indexOf(t[0]);e.gridApi.selection.toggleRowSelection(t[0]),e.executionListeners.splice(i,1),0==e.executionListeners.length&&(e.selectedListener=void 0),n(function(){e.executionListeners.length>0&&e.gridApi.selection.toggleRowSelection(e.executionListeners[0])})}},e.moveListenerUp=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.executionListeners.indexOf(t[0]);if(0!=i){var s=e.executionListeners[i];e.executionListeners.splice(i,1),n(function(){e.executionListeners.splice(i+-1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.moveListenerDown=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.executionListeners.indexOf(t[0]);if(i!=e.executionListeners.length-1){var s=e.executionListeners[i];e.executionListeners.splice(i,1),n(function(){e.executionListeners.splice(i+1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.fieldDetailsChanged=function(){""!=e.selectedField.stringValue?e.selectedField.implementation=e.selectedField.stringValue:""!=e.selectedField.expression?e.selectedField.implementation=e.selectedField.expression:""!=e.selectedField.string?e.selectedField.implementation=e.selectedField.string:e.selectedField.implementation=""},e.addNewField=function(){if(e.selectedListener){void 0==e.selectedListener.fields&&(e.selectedListener.fields=[]);var t={name:"fieldName",implementation:"",stringValue:"",expression:"",string:""};e.fields.push(t),e.selectedListener.fields.push(t),n(function(){e.fieldGridApi.selection.toggleRowSelection(t)})}},e.removeField=function(){var t=e.fieldGridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.fields.indexOf(t[0]);e.fieldGridApi.selection.toggleRowSelection(t[0]),e.fields.splice(i,1),e.selectedListener.fields.splice(i,1),0==e.fields.length&&(e.selectedField=void 0),n(function(){e.fields.length>0&&e.fieldGridApi.selection.toggleRowSelection(e.fields[0])})}},e.moveFieldUp=function(){var t=e.fieldGridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.fields.indexOf(t[0]);if(0!=i){var s=e.fields[i];e.fields.splice(i,1),e.selectedListener.fields.splice(i,1),n(function(){e.fields.splice(i+-1,0,s),e.selectedListener.fields.splice(i+-1,0,s),n(function(){e.fieldGridApi.selection.toggleRowSelection(s)})})}}},e.moveFieldDown=function(){var t=e.fieldGridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.fields.indexOf(t[0]);if(i!=e.fields.length-1){var s=e.fields[i];e.fields.splice(i,1),e.selectedListener.fields.splice(i,1),n(function(){e.fields.splice(i+1,0,s),e.selectedListener.fields.splice(i+1,0,s),n(function(){e.fieldGridApi.selection.toggleRowSelection(s)})})}}},e.save=function(){e.executionListeners.length>0?(e.property.value={},e.property.value.executionListeners=e.executionListeners):e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.$hide(),e.property.mode="read"},e.close=function(){e.$hide(),e.property.mode="read"}}]),angular.module("flowableModeler").controller("FlowableEventListenersCtrl",["$scope","$modal","$timeout","$translate",function(e,t,i,n){var s={template:"views/properties/event-listeners-popup.html",scope:e};_internalCreateModal(s,t,e)}]),angular.module("flowableModeler").controller("FlowableEventListenersPopupCtrl",["$scope","$q","$translate","$timeout",function(e,t,i,n){void 0!==e.property.value&&null!==e.property.value&&void 0!==e.property.value.eventListeners&&null!==e.property.value.eventListeners?e.property.value.eventListeners.constructor==String?e.eventListeners=JSON.parse(e.property.value.eventListeners):e.eventListeners=angular.copy(e.property.value.eventListeners):e.eventListeners=[],e.translationsRetrieved=!1,e.labels={};var s=i("PROPERTY.EXECUTIONLISTENERS.EVENT"),a=i("PROPERTY.EXECUTIONLISTENERS.FIELDS.IMPLEMENTATION"),o=i("PROPERTY.EXECUTIONLISTENERS.FIELDS.NAME");t.all([s,a,o]).then(function(t){e.labels.eventLabel=t[0],e.labels.implementationLabel=t[1],e.labels.nameLabel=t[2],e.translationsRetrieved=!0,e.gridOptions={data:e.eventListeners,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"event",displayName:e.labels.eventLabel},{field:"implementation",displayName:e.labels.implementationLabel}]},e.gridOptions.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(t){if(e.selectedListener=t.entity,e.selectedListener){var i=e.selectedListener.fields;if(void 0!==i&&null!==i)for(var n=0;n<i.length;n++){var s=i[n];void 0!==s.stringValue&&""!==s.stringValue?s.implementation=s.stringValue:void 0!==s.expression&&""!==s.expression?s.implementation=s.expression:void 0!==s.string&&""!==s.string&&(s.implementation=s.string)}else e.selectedListener.fields=[];e.selectedListener.events||(e.selectedListener.events=[{event:""}])}})}}),e.addEventValue=function(t){e.selectedListener.events.splice(t+1,0,{event:""})},e.removeEventValue=function(t){e.selectedListener.events.splice(t,1),e.listenerDetailsChanged()},e.listenerDetailsChanged=function(){var t=e.selectedListener;if(t.events){for(var i="",n=0;n<t.events.length;n++)n>0&&(i+=", "),i+=t.events[n].event;e.selectedListener.event=i}if(t.rethrowEvent){var s="";t.rethrowType&&t.rethrowType.length>0&&("error"===t.rethrowType&&""!==t.errorcode?s="Rethrow as error "+t.errorcode:"message"===t.rethrowType&&""!==t.messagename?s="Rethrow as message "+t.messagename:"signal"!==t.rethrowType&&"globalSignal"!==t.rethrowType||""===t.signalname||(s="Rethrow as signal "+t.signalname)),e.selectedListener.implementation=s}else""!==e.selectedListener.className?e.selectedListener.implementation=e.selectedListener.className:""!==e.selectedListener.delegateExpression?e.selectedListener.implementation=e.selectedListener.delegateExpression:e.selectedListener.implementation=""},e.addNewListener=function(){var t={event:"",implementation:"",className:"",delegateExpression:"",retrowEvent:!1};e.eventListeners.push(t),n(function(){e.gridApi.selection.toggleRowSelection(t)})},e.removeListener=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.eventListeners.indexOf(t[0]);e.gridApi.selection.toggleRowSelection(t[0]),e.eventListeners.splice(i,1),0==e.eventListeners.length&&(e.selectedListener=void 0),n(function(){e.eventListeners.length>0&&e.gridApi.selection.toggleRowSelection(e.eventListeners[0])})}},e.moveListenerUp=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.eventListeners.indexOf(t[0]);if(0!=i){var s=e.eventListeners[i];e.eventListeners.splice(i,1),n(function(){e.eventListeners.splice(i+-1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.moveListenerDown=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.eventListeners.indexOf(t[0]);if(i!=e.eventListeners.length-1){var s=e.eventListeners[i];e.eventListeners.splice(i,1),n(function(){e.eventListeners.splice(i+1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.save=function(){e.eventListeners.length>0?(e.property.value={},e.property.value.eventListeners=e.eventListeners):e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.property.mode="read",e.$hide()},e.close=function(){e.property.mode="read",e.$hide()}}]),angular.module("flowableModeler").controller("FlowableAssignmentCtrl",["$scope","$modal",function(e,t){var i={template:"views/properties/assignment-popup.html",scope:e};_internalCreateModal(i,t,e)}]),angular.module("flowableModeler").controller("FlowableAssignmentCtrl1",["$scope","$modal",function(e,t){var i={template:"views/properties/assignment-popup1.html",scope:e};_internalCreateModal(i,t,e)}]),angular.module("flowableModeler").controller("FlowableAssignmentCtrl2",["$scope","$modal",function(e,t){var i={template:"views/properties/assignment-popup2.html",scope:e};_internalCreateModal(i,t,e)}]),angular.module("flowableModeler").controller("FlowableAssignmentPopupCtrl",["$rootScope","$scope","$translate","$http","UserService","GroupService",function(e,t,i,n,s,a){function o(e){e.popup.assignmentObject["static"].candidateUsers&&0!=e.popup.assignmentObject["static"].candidateUsers.length||(e.popup.assignmentObject["static"].candidateUsers=[{value:""}]),e.popup.assignmentObject["static"].candidateGroups&&0!=e.popup.assignmentObject["static"].candidateGroups.length||(e.popup.assignmentObject["static"].candidateGroups=[{value:""}]),e.popup.assignmentObject["static"].candireadUsers&&0!=e.popup.assignmentObject["static"].candireadUsers.length||(e.popup.assignmentObject["static"].candireadUsers=[{value:""}])}if(void 0!==t.property.value&&null!==t.property.value&&void 0!==t.property.value.assignment&&null!==t.property.value.assignment?t.assignment=t.property.value.assignment:t.assignment={type:"idm"},t.assignment.type="static",t.popup={assignmentObject:{type:t.assignment.type,fs:"",idm:{type:void 0,assignee:void 0,candidateUsers:[],candidateGroups:[]},"static":{assignee:void 0,candidateUsers:[],candidateGroups:[],candireadUsers:[]}}},t.assignmentOptions=[{id:"initiator",title:i.instant("PROPERTY.ASSIGNMENT.IDM.DROPDOWN.INITIATOR")},{id:"user",title:i.instant("PROPERTY.ASSIGNMENT.IDM.DROPDOWN.USER")}],t.assignment.idm&&t.assignment.idm.type)for(var l=0;l<t.assignmentOptions.length;l++)if(t.assignmentOptions[l].id==t.assignment.idm.type){t.assignmentOption=t.assignmentOptions[l];break}if(null!=t.assignment.fs&&(t.popup.assignmentObject.fs=t.assignment.fs),t.assignmentOption){if(t.assignment.idm){if(t.assignment.idm.assignee&&(t.assignment.idm.assignee.id?t.popup.assignmentObject.idm.assignee=t.assignment.idm.assignee:t.popup.assignmentObject.idm.assignee={email:t.assignment.idm.assignee.email}),t.assignment.idm.candidateUsers&&t.assignment.idm.candidateUsers.length>0)for(var l=0;l<t.assignment.idm.candidateUsers.length;l++)t.popup.assignmentObject.idm.candidateUsers.push(t.assignment.idm.candidateUsers[l]);if(t.assignment.idm.candidateGroups&&t.assignment.idm.candidateGroups.length>0)for(var l=0;l<t.assignment.idm.candidateGroups.length;l++)t.popup.assignmentObject.idm.candidateGroups.push(t.assignment.idm.candidateGroups[l])}}else t.assignmentOption=t.assignmentOptions[0];if(t.assignment.assignee&&(t.popup.assignmentObject["static"].assignee=t.assignment.assignee),t.assignment.candidateUsers&&t.assignment.candidateUsers.length>0)for(var l=0;l<t.assignment.candidateUsers.length;l++)t.popup.assignmentObject["static"].candidateUsers.push(t.assignment.candidateUsers[l]);if(t.assignment.candireadUsers&&t.assignment.candireadUsers.length>0)for(var l=0;l<t.assignment.candireadUsers.length;l++)t.popup.assignmentObject["static"].candireadUsers.push(t.assignment.candireadUsers[l]);if(t.assignment.candidateGroups&&t.assignment.candidateGroups.length>0)for(var l=0;l<t.assignment.candidateGroups.length;l++)t.popup.assignmentObject["static"].candidateGroups.push(t.assignment.candidateGroups[l]);o(t),t.$watch("popup.groupFilter",function(){t.updateGroupFilter()}),t.$watch("popup.filter",function(){t.updateFilter()}),t.updateFilter=function(){void 0!=t.popup.oldFilter&&t.popup.oldFilter==t.popup.filter||(t.popup.filter?t.popup.oldFilter=t.popup.filter:t.popup.oldFilter="",s.getFilteredUsers(t.popup.filter).then(function(e){for(var i=[],n=0;n<e.data.length;n++){var s=e.data[n],a=!1;if(null!==t.popup.assignmentObject.idm.candidateUsers&&void 0!==t.popup.assignmentObject.idm.candidateUsers)for(var o=0;o<t.popup.assignmentObject.idm.candidateUsers.length;o++){var l=t.popup.assignmentObject.idm.candidateUsers[o];if(l.id===s.id){a=!0;break}}a||i.push(s)}t.popup.userResults=i,t.resetSelection()}))},t.updateGroupFilter=function(){void 0!=t.popup.oldGroupFilter&&t.popup.oldGroupFilter==t.popup.groupFilter||(t.popup.groupFilter?t.popup.oldGroupFilter=t.popup.groupFilter:t.popup.oldGroupFilter="",a.getFilteredGroups(t.popup.groupFilter).then(function(e){t.popup.groupResults=e.data,t.resetGroupSelection()}))},t.confirmUser=function(e){if(!e){var i=t.popup.userResults;t.popup.selectedIndex>=0&&t.popup.selectedIndex<i.length&&(e=i[t.popup.selectedIndex])}if(e)if("user"==t.assignmentOption.id)t.popup.assignmentObject.idm.assignee=e;else if("users"==t.assignmentOption.id){var n=!1;if(t.popup.assignmentObject.idm.candidateUsers)for(var s=0;s<t.popup.assignmentObject.idm.candidateUsers.length;s++)if(t.popup.assignmentObject.idm.candidateUsers[s].id===e.id){n=!0;break}n||t.addCandidateUser(e)}},t.confirmEmail=function(){if("user"==t.assignmentOption.id)t.popup.assignmentObject.idm.assignee={email:t.popup.email},console.log("---------"),console.log(t.popup.assignmentObject.idm.assignee);else if("users"==t.assignmentOption.id){var e=!1;if(t.popup.assignmentObject.idm.candidateUsers)for(var i=0;i<t.popup.assignmentObject.idm.candidateUsers.length;i++)if(t.popup.assignmentObject.idm.candidateUsers[i].id){if(t.popup.assignmentObject.idm.candidateUsers[i].id===user.id){e=!0;break}}else if(t.popup.assignmentObject.idm.candidateUsers[i].email&&t.popup.assignmentObject.idm.candidateUsers[i].email===t.popup.email){e=!0;break}e||t.addCandidateUser({email:t.popup.email})}},t.confirmGroup=function(e){if(!e){var i=t.popup.groupResults;t.popup.selectedGroupIndex>=0&&t.popup.selectedGroupIndex<i.length&&(e=i[t.popup.selectedGroupIndex])}if(e){var n=!1;if(t.popup.assignmentObject.idm.candidateGroups)for(var s=0;s<t.popup.assignmentObject.idm.candidateGroups.length;s++)if(t.popup.assignmentObject.idm.candidateGroups[s].id===e.id){n=!0;break}n||t.addCandidateGroup(e)}},t.addCandidateUser=function(e){t.popup.assignmentObject.idm.candidateUsers.push(e)},t.removeCandidateUser=function(e){for(var i=t.popup.assignmentObject.idm.candidateUsers,n=-1,s=0;s<i.length;s++)if(e.id){if(e.id===i[s].id){n=s;break}}else if(e.email===i[s].email){
n=s;break}n>=0&&i.splice(n,1)},t.addCandidateGroup=function(e){t.popup.assignmentObject.idm.candidateGroups.push(e)},t.removeCandidateGroup=function(e){for(var i=t.popup.assignmentObject.idm.candidateGroups,n=-1,s=0;s<i.length;s++)if(e.id==i[s].id){n=s;break}n>=0&&i.splice(n,1)},t.resetSelection=function(){t.popup.userResults&&t.popup.userResults.length>0?t.popup.selectedIndex=0:t.popup.selectedIndex=-1},t.nextUser=function(){var e=t.popup.userResults;e&&e.length>0&&t.popup.selectedIndex<e.length-1&&(t.popup.selectedIndex+=1)},t.previousUser=function(){var e=t.popup.userResults;e&&e.length>0&&t.popup.selectedIndex>0&&(t.popup.selectedIndex-=1)},t.resetGroupSelection=function(){t.popup.groupResults&&t.popup.groupResults.length>0?t.popup.selectedGroupIndex=0:t.popup.selectedGroupIndex=-1},t.nextGroup=function(){var e=t.popup.groupResults;e&&e.length>0&&t.popup.selectedGroupIndex<e.length-1&&(t.popup.selectedGroupIndex+=1)},t.previousGroup=function(){var e=t.popup.groupResults;e&&e.length>0&&t.popup.selectedGroupIndex>0&&(t.popup.selectedGroupIndex-=1)},t.removeAssignee=function(){t.popup.assignmentObject.idm.assignee=void 0},t.addCandireadUserValue=function(e){t.popup.assignmentObject["static"].candireadUsers.splice(e+1,0,{value:""})},t.removeCandireadUserValue=function(e){t.popup.assignmentObject["static"].candireadUsers.splice(e,1)},t.addCandidateUserValue=function(e){t.popup.assignmentObject["static"].candidateUsers.splice(e+1,0,{value:""})},t.removeCandidateUserValue=function(e){t.popup.assignmentObject["static"].candidateUsers.splice(e,1)},t.addCandidateGroupValue=function(e){t.popup.assignmentObject["static"].candidateGroups.splice(e+1,0,{value:""})},t.removeCandidateGroupValue=function(e){t.popup.assignmentObject["static"].candidateGroups.splice(e,1)},t.setSearchType=function(){t.popup.assignmentObject.assignmentSourceType="search"},console.log("----------"),console.log(t.property),t.save=function(){if(r(t.popup.assignmentObject["static"]),t.assignment.type=t.popup.assignmentObject.type,"idm"===t.popup.assignmentObject.type){t.popup.assignmentObject["static"]=void 0;var e={type:t.assignmentOption.id};"user"==e.type?t.popup.assignmentObject.idm.assignee&&(e.assignee=t.popup.assignmentObject.idm.assignee,console.log("测试==="),console.log(t.popup.assignmentObject.idm.assignee)):"users"==e.type?(t.popup.assignmentObject.idm.candidateUsers&&t.popup.assignmentObject.idm.candidateUsers.length>0&&(e.candidateUsers=t.popup.assignmentObject.idm.candidateUsers),console.log("像静态一样赋值"),t.assignment.fs=t.popup.assignmentObject.fs):"groups"==e.type&&t.popup.assignmentObject.idm.candidateGroups&&t.popup.assignmentObject.idm.candidateGroups.length>0&&(e.candidateGroups=t.popup.assignmentObject.idm.candidateGroups),t.assignment.idm=e,t.assignment.assignee=void 0,"initiator"==e.type&&(console.log("这个是默认开启人的。"),t.assignment.assignee="#{userId}",t.assignment.idm=void 0,t.assignment.type="static"),"users"==e.type&&("all"==t.assignment.fs?t.assignment.assignee="${all}":(t.assignment.assignee="",t.assignment.fs=""),console.log(t.assignment)),t.assignment.candidateUsers=void 0,t.assignment.candidateGroups=void 0}"static"===t.popup.assignmentObject.type&&(t.popup.assignmentObject.idm=void 0,t.assignment.idm=void 0,t.assignment.assignee=t.popup.assignmentObject["static"].assignee,t.assignment.candidateUsers=t.popup.assignmentObject["static"].candidateUsers,t.assignment.candidateGroups=t.popup.assignmentObject["static"].candidateGroups,t.assignment.candireadUsers=t.popup.assignmentObject["static"].candireadUsers,t.assignment.fs=t.popup.assignmentObject.fs,"all"==t.assignment.fs?t.assignment.assignee="${all}":(t.assignment.assignee="",t.assignment.fs="")),t.property.value={},t.property.value.assignment=t.assignment,console.log("最后赋值"),console.log(t.assignment),t.updatePropertyInModel(t.property),t.close(),t.property.key="oryx-multiinstance_variable",t.property.value=t.assignment.fs,t.updatePropertyInModel(t.property),console.log("测试成功"),console.log(t.property)},t.close=function(){t.property.mode="read",t.$hide()};var r=function(e){function t(e){return void 0===e||null===e||0===e.trim().length}t(e.assignee)&&(e.assignee=void 0);var i,n=0,s=0;if(e.candidateUsers){for(i=[],s=0;s<e.candidateUsers.length;s++)t(e.candidateUsers[s].value)&&(i[i.length]=s);if(i.length==e.candidateUsers.length)e.candidateUsers=void 0;else for(n=0,s=0;s<i.length;s++)e.candidateUsers.splice(i[s]-n,1),n++}if(e.candidateGroups){for(i=[],s=0;s<e.candidateGroups.length;s++)t(e.candidateGroups[s].value)&&(i[i.length]=s);if(i.length==e.candidateGroups.length)e.candidateGroups=void 0;else for(n=0,s=0;s<i.length;s++)e.candidateGroups.splice(i[s]-n,1),n++}}}]),angular.module("flowableModeler").controller("FlowableAssignmentPopupCtrl1",["$rootScope","$scope","$translate","$http","UserService","GroupService","$modal","editorManager",function(e,t,i,n,s,a,o,l){function r(e){e.popup.assignmentObject["static"].candidateUsers&&0!=e.popup.assignmentObject["static"].candidateUsers.length||(e.popup.assignmentObject["static"].candidateUsers=[{value:""}]),e.popup.assignmentObject["static"].candidateGroups&&0!=e.popup.assignmentObject["static"].candidateGroups.length||(e.popup.assignmentObject["static"].candidateGroups=[{value:""}])}if(void 0!==t.property.value&&null!==t.property.value&&void 0!==t.property.value.assignment&&null!==t.property.value.assignment?t.assignment=t.property.value.assignment:t.assignment={type:"idm"},t.assignment.type="static",t.popup={assignmentObject:{type:t.assignment.type,idm:{type:void 0,assignee:void 0,candidateUsers:[],candidateGroups:[]},"static":{assignee:void 0,candidateUsers:[],candidateGroups:[]}}},t.assignmentOptions=[],t.assignment.idm&&t.assignment.idm.type)for(var d=0;d<t.assignmentOptions.length;d++)if(t.assignmentOptions[d].id==t.assignment.idm.type){t.assignmentOption=t.assignmentOptions[d];break}if(t.assignmentOption){if(t.assignment.idm){if(t.assignment.idm.assignee&&(t.assignment.idm.assignee.id?t.popup.assignmentObject.idm.assignee=t.assignment.idm.assignee:t.popup.assignmentObject.idm.assignee={email:t.assignment.idm.assignee.email}),t.assignment.idm.candidateUsers&&t.assignment.idm.candidateUsers.length>0)for(var d=0;d<t.assignment.idm.candidateUsers.length;d++)t.popup.assignmentObject.idm.candidateUsers.push(t.assignment.idm.candidateUsers[d]);if(t.assignment.idm.candidateGroups&&t.assignment.idm.candidateGroups.length>0)for(var d=0;d<t.assignment.idm.candidateGroups.length;d++)t.popup.assignmentObject.idm.candidateGroups.push(t.assignment.idm.candidateGroups[d])}}else t.assignmentOption=t.assignmentOptions[0];if(t.assignment.assignee&&(t.popup.assignmentObject["static"].assignee=t.assignment.assignee),t.assignment.candidateUsers&&t.assignment.candidateUsers.length>0)for(var d=0;d<t.assignment.candidateUsers.length;d++)t.popup.assignmentObject["static"].candidateUsers.push(t.assignment.candidateUsers[d]);if(t.assignment.candidateGroups&&t.assignment.candidateGroups.length>0)for(var d=0;d<t.assignment.candidateGroups.length;d++)t.popup.assignmentObject["static"].candidateGroups.push(t.assignment.candidateGroups[d]);r(t),t.$watch("popup.groupFilter",function(){t.updateGroupFilter()}),t.$watch("popup.filter",function(){t.updateFilter()}),t.updateFilter=function(){void 0!=t.popup.oldFilter&&t.popup.oldFilter==t.popup.filter||(t.popup.filter?t.popup.oldFilter=t.popup.filter:t.popup.oldFilter="",s.getFilteredUsers(t.popup.filter).then(function(e){for(var i=[],n=0;n<e.data.length;n++){var s=e.data[n],a=!1;if(null!==t.popup.assignmentObject.idm.candidateUsers&&void 0!==t.popup.assignmentObject.idm.candidateUsers)for(var o=0;o<t.popup.assignmentObject.idm.candidateUsers.length;o++){var l=t.popup.assignmentObject.idm.candidateUsers[o];if(l.id===s.id){a=!0;break}}a||i.push(s)}t.popup.userResults=i,console.log(t.popup),console.log(t.popup.userResults),t.resetSelection()}))},t.updateGroupFilter=function(){void 0!=t.popup.oldGroupFilter&&t.popup.oldGroupFilter==t.popup.groupFilter||(t.popup.groupFilter?t.popup.oldGroupFilter=t.popup.groupFilter:t.popup.oldGroupFilter="",a.getFilteredGroups(t.popup.groupFilter).then(function(e){t.popup.groupResults=e.data,t.resetGroupSelection()}))},t.confirmUser=function(e){if(!e){var i=t.popup.userResults;t.popup.selectedIndex>=0&&t.popup.selectedIndex<i.length&&(e=i[t.popup.selectedIndex])}if(e)if("user"==t.assignmentOption.id)t.popup.assignmentObject.idm.assignee=e;else if("users"==t.assignmentOption.id){var n=!1;if(t.popup.assignmentObject.idm.candidateUsers)for(var s=0;s<t.popup.assignmentObject.idm.candidateUsers.length;s++)if(t.popup.assignmentObject.idm.candidateUsers[s].id===e.id){n=!0;break}n||t.addCandidateUser(e)}},t.confirmEmail=function(){if("user"==t.assignmentOption.id)t.popup.assignmentObject.idm.assignee={email:t.popup.email},console.log("---------"),console.log(t.popup.assignmentObject.idm.assignee);else if("users"==t.assignmentOption.id){var e=!1;if(t.popup.assignmentObject.idm.candidateUsers)for(var i=0;i<t.popup.assignmentObject.idm.candidateUsers.length;i++)if(t.popup.assignmentObject.idm.candidateUsers[i].id){if(t.popup.assignmentObject.idm.candidateUsers[i].id===user.id){e=!0;break}}else if(t.popup.assignmentObject.idm.candidateUsers[i].email&&t.popup.assignmentObject.idm.candidateUsers[i].email===t.popup.email){e=!0;break}e||t.addCandidateUser({email:t.popup.email})}},t.confirmGroup=function(e){if(!e){var i=t.popup.groupResults;t.popup.selectedGroupIndex>=0&&t.popup.selectedGroupIndex<i.length&&(e=i[t.popup.selectedGroupIndex])}if(e){var n=!1;if(t.popup.assignmentObject.idm.candidateGroups)for(var s=0;s<t.popup.assignmentObject.idm.candidateGroups.length;s++)if(t.popup.assignmentObject.idm.candidateGroups[s].id===e.id){n=!0;break}n||t.addCandidateGroup(e)}},t.addCandidateUser=function(e){t.popup.assignmentObject.idm.candidateUsers.push(e)},t.removeCandidateUser=function(e){for(var i=t.popup.assignmentObject.idm.candidateUsers,n=-1,s=0;s<i.length;s++)if(e.id){if(e.id===i[s].id){n=s;break}}else if(e.email===i[s].email){n=s;break}n>=0&&i.splice(n,1)},t.addCandidateGroup=function(e){t.popup.assignmentObject.idm.candidateGroups.push(e)},t.removeCandidateGroup=function(e){for(var i=t.popup.assignmentObject.idm.candidateGroups,n=-1,s=0;s<i.length;s++)if(e.id==i[s].id){n=s;break}n>=0&&i.splice(n,1)},t.resetSelection=function(){t.popup.userResults&&t.popup.userResults.length>0?t.popup.selectedIndex=0:t.popup.selectedIndex=-1},t.nextUser=function(){var e=t.popup.userResults;e&&e.length>0&&t.popup.selectedIndex<e.length-1&&(t.popup.selectedIndex+=1)},t.previousUser=function(){var e=t.popup.userResults;e&&e.length>0&&t.popup.selectedIndex>0&&(t.popup.selectedIndex-=1)},t.resetGroupSelection=function(){t.popup.groupResults&&t.popup.groupResults.length>0?t.popup.selectedGroupIndex=0:t.popup.selectedGroupIndex=-1},t.nextGroup=function(){var e=t.popup.groupResults;e&&e.length>0&&t.popup.selectedGroupIndex<e.length-1&&(t.popup.selectedGroupIndex+=1)},t.previousGroup=function(){var e=t.popup.groupResults;e&&e.length>0&&t.popup.selectedGroupIndex>0&&(t.popup.selectedGroupIndex-=1)},t.removeAssignee=function(){t.popup.assignmentObject.idm.assignee=void 0},t.addCandidateUserValue=function(e){t.popup.assignmentObject["static"].candidateUsers.splice(e+1,0,{value:""})},t.removeCandidateUserValue=function(e){t.popup.assignmentObject["static"].candidateUsers.splice(e,1)},t.addCandidateGroupValue=function(e){t.popup.assignmentObject["static"].candidateGroups.splice(e+1,0,{value:""})},t.removeCandidateGroupValue=function(e){t.popup.assignmentObject["static"].candidateGroups.splice(e,1)},t.setSearchType=function(){t.popup.assignmentObject.assignmentSourceType="search"};var p={template:"views/properties/form-reference-popup2.html",scope:t};t.open=function(){_internalCreateModal(p,o,t),console.log("打开------------------------------"),console.log(t.popup.assignmentObject.idm.candidateUsers)},t.save=function(){if(console.log("保存的测试-----------"),c(t.popup.assignmentObject["static"]),t.assignment.type=t.popup.assignmentObject.type,"idm"===t.popup.assignmentObject.type){t.popup.assignmentObject["static"]=void 0;var e={type:t.assignmentOption.id};"user"==e.type?t.popup.assignmentObject.idm.assignee&&(e.assignee=t.popup.assignmentObject.idm.assignee,console.log("测试==="),console.log(t.popup.assignmentObject.idm.assignee)):"users"==e.type?t.popup.assignmentObject.idm.candidateUsers&&t.popup.assignmentObject.idm.candidateUsers.length>0&&(e.candidateUsers=t.popup.assignmentObject.idm.candidateUsers):"groups"==e.type&&t.popup.assignmentObject.idm.candidateGroups&&t.popup.assignmentObject.idm.candidateGroups.length>0&&(e.candidateGroups=t.popup.assignmentObject.idm.candidateGroups),t.assignment.idm=e,t.assignment.assignee=void 0,"initiator"==e.type&&(console.log("这个是默认开启人的。"),t.assignment.assignee="#{userId}",t.assignment.idm=void 0,t.assignment.type="static"),t.assignment.candidateUsers=void 0,t.assignment.candidateGroups=void 0}"static"===t.popup.assignmentObject.type&&(t.popup.assignmentObject.idm=void 0,t.assignment.idm=void 0,t.assignment.assignee=t.popup.assignmentObject["static"].assignee,t.assignment.candidateUsers=t.popup.assignmentObject["static"].candidateUsers,t.assignment.candidateGroups=t.popup.assignmentObject["static"].candidateGroups),t.property.value={},t.property.value.assignment=t.assignment,console.log("我想要其他地方拿到这个值怎么拿？？？"),console.log(t.property.value),console.log("最后赋值-------------------  这个是他的值"),console.log(t.property.value.assignment.candidateGroups),t.updatePropertyInModel(t.property),console.log("一次保存成功？？"),console.log(t.property),t.close(),t.property.key="oryx-process_potentialstarteruser",t.value1=t.property.value.assignment.candidateGroups,t.property.value="",angular.forEach(t.value1,function(e,i){n.get(FLOWABLE.CONFIG.contextRoot2+"/groups/"+e.value+"/users").success(function(e){t.forms=e,angular.forEach(t.forms,function(e,i){t.property.value+=e.id+",",t.updatePropertyInModel(t.property)}),console.log(e)})}),t.close()},t.close=function(){t.property.mode="read",t.$hide()};var c=function(e){function t(e){return void 0===e||null===e||0===e.trim().length}t(e.assignee)&&(e.assignee=void 0);var i,n=0,s=0;if(e.candidateUsers){for(i=[],s=0;s<e.candidateUsers.length;s++)t(e.candidateUsers[s].value)&&(i[i.length]=s);if(i.length==e.candidateUsers.length)e.candidateUsers=void 0;else for(n=0,s=0;s<i.length;s++)e.candidateUsers.splice(i[s]-n,1),n++}if(e.candidateGroups){for(i=[],s=0;s<e.candidateGroups.length;s++)t(e.candidateGroups[s].value)&&(i[i.length]=s);if(i.length==e.candidateGroups.length)e.candidateGroups=void 0;else for(n=0,s=0;s<i.length;s++)e.candidateGroups.splice(i[s]-n,1),n++}}}]),angular.module("flowableModeler").controller("FlowableAssignmentPopupCtrl2",["$rootScope","$scope","$translate","$http","UserService","GroupService","$modal","editorManager",function(e,t,i,n,s,a,o,l){null==t.property.value||""==t.property.value||void 0==t.property.value?console.log("为空不执行"):t.property.value=angular.fromJson(t.property.value)}]),angular.module("flowableModeler").controller("FlowableAssignmentPopupCtrl3",["$rootScope","$scope","$translate","$http","UserService","GroupService","$modal","editorManager",function(e,t,i,n,s,a,o,l){function r(e){e.popup.assignmentObject["static"].candidateUsers&&0!=e.popup.assignmentObject["static"].candidateUsers.length||(e.popup.assignmentObject["static"].candidateUsers=[{value:""}]),e.popup.assignmentObject["static"].candidateGroups&&0!=e.popup.assignmentObject["static"].candidateGroups.length||(e.popup.assignmentObject["static"].candidateGroups=[{value:""}])}if(console.log(t.property.value),void 0!==t.property.value&&null!==t.property.value&&(console.log(t.property.value),t.init={},t.init.assignment={type:"staitc",candidateUsers:[]},t.initvalue=t.property.value.split(","),angular.forEach(t.initvalue,function(e,i){if(t.initvalue.length==i+1);else{var n={value:e};t.init.assignment.candidateUsers.push(n)}})),void 0!==t.property.value&&null!==t.property.value&&void 0!==t.property.value.assignment&&null!==t.property.value.assignment?t.assignment=t.property.value.assignment:t.assignment={type:"idm"},t.popup={assignmentObject:{type:"static",idm:{type:void 0,assignee:void 0,candidateUsers:[],candidateGroups:[]},"static":{assignee:void 0,candidateUsers:[],candidateGroups:[]}}},t.init.assignment.candidateUsers&&t.init.assignment.candidateUsers.length>0)for(var d=0;d<t.init.assignment.candidateUsers.length;d++)t.popup.assignmentObject["static"].candidateUsers.push(t.init.assignment.candidateUsers[d]);if(t.assignment.candidateUsers&&t.assignment.candidateUsers.length>0)for(var d=0;d<t.assignment.candidateUsers.length;d++)t.popup.assignmentObject["static"].candidateUsers.push(t.assignment.candidateUsers[d]);if(t.assignment.candidateGroups&&t.assignment.candidateGroups.length>0)for(var d=0;d<t.assignment.candidateGroups.length;d++)t.popup.assignmentObject["static"].candidateGroups.push(t.assignment.candidateGroups[d]);r(t),t.$watch("popup.groupFilter",function(){t.updateGroupFilter()}),t.$watch("popup.filter",function(){t.updateFilter()}),t.updateFilter=function(){void 0!=t.popup.oldFilter&&t.popup.oldFilter==t.popup.filter||(t.popup.filter?t.popup.oldFilter=t.popup.filter:t.popup.oldFilter="",s.getFilteredUsers(t.popup.filter).then(function(e){for(var i=[],n=0;n<e.data.length;n++){var s=e.data[n],a=!1;if(null!==t.popup.assignmentObject.idm.candidateUsers&&void 0!==t.popup.assignmentObject.idm.candidateUsers)for(var o=0;o<t.popup.assignmentObject.idm.candidateUsers.length;o++){var l=t.popup.assignmentObject.idm.candidateUsers[o];if(l.id===s.id){a=!0;break}}a||i.push(s)}t.popup.userResults=i,t.resetSelection()}))},t.updateGroupFilter=function(){void 0!=t.popup.oldGroupFilter&&t.popup.oldGroupFilter==t.popup.groupFilter||(t.popup.groupFilter?t.popup.oldGroupFilter=t.popup.groupFilter:t.popup.oldGroupFilter="",a.getFilteredGroups(t.popup.groupFilter).then(function(e){t.popup.groupResults=e.data,t.resetGroupSelection()}))},t.resetSelection=function(){t.popup.userResults&&t.popup.userResults.length>0?t.popup.selectedIndex=0:t.popup.selectedIndex=-1},t.resetGroupSelection=function(){t.popup.groupResults&&t.popup.groupResults.length>0?t.popup.selectedGroupIndex=0:t.popup.selectedGroupIndex=-1},t.removeAssignee=function(){t.popup.assignmentObject.idm.assignee=void 0},t.addCandidateUserValue=function(e){t.popup.assignmentObject["static"].candidateUsers.splice(e+1,0,{value:""})},t.removeCandidateUserValue=function(e){t.popup.assignmentObject["static"].candidateUsers.splice(e,1)},t.setSearchType=function(){t.popup.assignmentObject.assignmentSourceType="search"},t.save=function(){console.log("保存的测试-----------"),p(t.popup.assignmentObject["static"]),t.assignment.type=t.popup.assignmentObject.type,"static"===t.popup.assignmentObject.type&&(t.popup.assignmentObject.idm=void 0,t.assignment.idm=void 0,t.assignment.assignee=t.popup.assignmentObject["static"].assignee,t.assignment.candidateUsers=t.popup.assignmentObject["static"].candidateUsers,t.assignment.candidateGroups=t.popup.assignmentObject["static"].candidateGroups),console.log(t.assignment),t.value1=t.assignment.candidateUsers,console.log("循环==================================="),t.property.value="",angular.forEach(t.value1,function(e,i){t.property.value+=e.value+",",t.updatePropertyInModel(t.property)}),console.log(t.property),t.close(),t.close()},t.close=function(){t.property.mode="read",t.$hide()};var p=function(e){function t(e){return void 0===e||null===e||0===e.trim().length}t(e.assignee)&&(e.assignee=void 0);var i,n=0,s=0;if(e.candidateUsers){for(i=[],s=0;s<e.candidateUsers.length;s++)t(e.candidateUsers[s].value)&&(i[i.length]=s);if(i.length==e.candidateUsers.length)e.candidateUsers=void 0;else for(n=0,s=0;s<i.length;s++)e.candidateUsers.splice(i[s]-n,1),n++}if(e.candidateGroups){for(i=[],s=0;s<e.candidateGroups.length;s++)t(e.candidateGroups[s].value)&&(i[i.length]=s);if(i.length==e.candidateGroups.length)e.candidateGroups=void 0;else for(n=0,s=0;s<i.length;s++)e.candidateGroups.splice(i[s]-n,1),n++}}}]),angular.module("flowableModeler").controller("FlowableAssignmentPopupCtrl4",["$rootScope","$scope","$translate","$http","UserService","GroupService","$modal","editorManager",function(e,t,i,n,s,a,o,l){void 0!==t.property.value&&null!==t.property.value&&(t.init={},t.init.assignment={type:"staitc",candidateUsers:[]},t.initvalue=t.property.value.split(","),angular.forEach(t.initvalue,function(e,i){if(t.initvalue.length==i+1);else{var n={value:e};t.init.assignment.candidateUsers.push(n)}}))}]),angular.module("flowableModeler").controller("FlowableFieldsCtrl",["$scope","$modal","$timeout","$translate",function(e,t,i,n){var s={template:"views/properties/fields-popup.html",scope:e};_internalCreateModal(s,t,e)}]),angular.module("flowableModeler").controller("FlowableFieldsPopupCtrl",["$scope","$q","$translate","$timeout",function(e,t,i,n){if(void 0!==e.property.value&&null!==e.property.value&&void 0!==e.property.value.fields&&null!==e.property.value.fields){e.fields=angular.copy(e.property.value.fields);for(var s=0;s<e.fields.length;s++){var a=e.fields[s];void 0!==a.stringValue&&""!==a.stringValue?a.implementation=a.stringValue:void 0!==a.expression&&""!==a.expression?a.implementation=a.expression:void 0!==a.string&&""!==a.string&&(a.implementation=a.string)}}else e.fields=[];e.translationsRetrieved=!1,e.labels={};var o=i("PROPERTY.FIELDS.NAME"),l=i("PROPERTY.FIELDS.IMPLEMENTATION");t.all([o,l]).then(function(t){e.labels.nameLabel=t[0],e.labels.implementationLabel=t[1],e.translationsRetrieved=!0,e.gridOptions={data:e.fields,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"name",displayName:e.labels.nameLabel},{field:"implementation",displayName:e.labels.implementationLabel}]},e.gridOptions.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(t){e.selectedField=t.entity})}}),e.fieldDetailsChanged=function(){""!=e.selectedField.stringValue?e.selectedField.implementation=e.selectedField.stringValue:""!=e.selectedField.expression?e.selectedField.implementation=e.selectedField.expression:""!=e.selectedField.string?e.selectedField.implementation=e.selectedField.string:e.selectedField.implementation=""},e.addNewField=function(){var t={name:"fieldName",implementation:"",stringValue:"",expression:"",string:""};e.fields.push(t),n(function(){e.gridApi.selection.toggleRowSelection(t)})},e.removeField=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.fields.indexOf(t[0]);e.gridApi.selection.toggleRowSelection(t[0]),e.fields.splice(i,1),0==e.fields.length&&(e.selectedField=void 0),n(function(){e.fields.length>0&&e.gridApi.selection.toggleRowSelection(e.fields[0])})}},e.moveFieldUp=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.fields.indexOf(t[0]);if(0!=i){var s=e.fields[i];e.fields.splice(i,1),n(function(){e.fields.splice(i+-1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.moveFieldDown=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.fields.indexOf(t[0]);if(i!=e.fields.length-1){var s=e.fields[i];e.fields.splice(i,1),n(function(){e.fields.splice(i+1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.save=function(){e.fields.length>0?(e.property.value={},e.property.value.fields=e.fields):e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.$hide()},e.close=function(){e.property.mode="read",e.$hide()}}]),angular.module("flowableModeler").controller("FlowableFormPropertiesCtrl",["$scope","$modal","$timeout","$translate",function(e,t,i,n){var s={template:"views/properties/form-properties-popup.html",scope:e};_internalCreateModal(s,t,e)}]),angular.module("flowableModeler").controller("FlowableFormPropertiesPopupCtrl",["$scope","$q","$translate","$timeout",function(e,t,i,n){if(void 0!==e.property.value&&null!==e.property.value&&void 0!==e.property.value.formProperties&&null!==e.property.value.formProperties){e.formProperties=angular.copy(e.property.value.formProperties);for(var s=0;s<e.formProperties.length;s++){var a=e.formProperties[s];if(a.enumValues&&a.enumValues.length>0)for(var o=0;o<a.enumValues.length;o++){var l=a.enumValues[o];l.id||l.name||!l.value||(l.id=l.value,l.name=l.value)}}}else e.formProperties=[];e.selectedProperties=[],e.selectedEnumValues=[],e.translationsRetrieved=!1,e.labels={};var r=i("PROPERTY.FORMPROPERTIES.ID"),d=i("PROPERTY.FORMPROPERTIES.NAME"),p=i("PROPERTY.FORMPROPERTIES.TYPE");t.all([r,d,p]).then(function(t){e.labels.idLabel=t[0],e.labels.nameLabel=t[1],e.labels.typeLabel=t[2],e.translationsRetrieved=!0,e.gridOptions={data:e.formProperties,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"id",displayName:e.labels.idLabel},{field:"name",displayName:e.labels.nameLabel},{field:"type",displayName:e.labels.typeLabel}]},e.enumGridOptions={data:"selectedProperties[0].enumValues",enableRowReordering:!0,headerRowHeight:28,multiSelect:!1,keepLastSelected:!1,selectedItems:e.selectedEnumValues,columnDefs:[{field:"id",displayName:e.labels.idLabel},{field:"name",displayName:e.labels.nameLabel}]},e.gridOptions.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(t){e.selectedProperty=t.entity})}}),e.propertyTypeChanged=function(){"date"===e.selectedProperty.type?e.selectedProperty.datePattern="MM-dd-yyyy hh:mm":delete e.selectedProperty.datePattern,"enum"===e.selectedProperty.type?e.selectedProperties[0].enumValues=[{id:"value1",name:"Value 1"},{id:"value2",name:"Value 2"}]:delete e.selectedProperty.enumValues};var c=1;e.addNewProperty=function(){var t={id:"new_property_"+c++,name:"",type:"string",readable:!0,writable:!0};e.formProperties.push(t),n(function(){e.gridApi.selection.toggleRowSelection(t)})},e.removeProperty=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.formProperties.indexOf(t[0]);e.gridApi.selection.toggleRowSelection(t[0]),e.formProperties.splice(i,1),0==e.formProperties.length&&(e.selectedProperty=void 0),n(function(){e.formProperties.length>0&&e.gridApi.selection.toggleRowSelection(e.formProperties[0])})}},e.movePropertyUp=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.formProperties.indexOf(t[0]);if(0!=i){var s=e.formProperties[i];e.formProperties.splice(i,1),n(function(){e.formProperties.splice(i+-1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.movePropertyDown=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.formProperties.indexOf(t[0]);if(i!=e.formProperties.length-1){var s=e.formProperties[i];e.formProperties.splice(i,1),n(function(){e.formProperties.splice(i+1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.addNewEnumValue=function(){e.selectedProperties.length>0&&e.selectedProperties[0].enumValues.push({id:"",name:""}),n(function(){e.enumGridOptions.selectItem(e.selectedProperties[0].enumValues.length-1,!0)})},e.removeEnumValue=function(){if(e.selectedProperties.length>0&&e.selectedEnumValues.length>0){var t=e.selectedProperties[0].enumValues.indexOf(e.selectedEnumValues[0]);e.enumGridOptions.selectItem(t,!1),e.selectedProperties[0].enumValues.splice(t,1),e.selectedEnumValues.length=0,t<e.selectedProperties[0].enumValues.length?n(function(){e.enumGridOptions.selectItem(t+1,!0)}):e.selectedProperties[0].enumValues.length>0&&n(function(){e.enumGridOptions.selectItem(t-1,!0)})}},e.moveEnumValueUp=function(){if(e.selectedProperties.length>0&&e.selectedEnumValues.length>0){var t=e.selectedProperties[0].enumValues.indexOf(e.selectedEnumValues[0]);if(0!=t){var i=e.selectedProperties[0].enumValues[t];e.selectedProperties[0].enumValues.splice(t,1),n(function(){e.selectedProperties[0].enumValues.splice(t+-1,0,i)})}}},e.moveEnumValueDown=function(){if(e.selectedProperties.length>0&&e.selectedEnumValues.length>0){var t=e.selectedProperties[0].enumValues.indexOf(e.selectedEnumValues[0]);if(t!=e.selectedProperties[0].enumValues.length-1){var i=e.selectedProperties[0].enumValues[t];e.selectedProperties[0].enumValues.splice(t,1),n(function(){e.selectedProperties[0].enumValues.splice(t+1,0,i)})}}},e.save=function(){e.formProperties.length>0?(e.property.value={},e.property.value.formProperties=e.formProperties):e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.$hide(),e.property.mode="read"},e.close=function(){e.$hide(),e.property.mode="read"}}]),angular.module("flowableModeler").controller("FlowableInParametersCtrl",["$scope","$modal","$timeout","$translate",function(e,t,i,n){var s={template:"views/properties/in-parameters-popup.html",scope:e};_internalCreateModal(s,t,e)}]),angular.module("flowableModeler").controller("FlowableInParametersPopupCtrl",["$scope","$q","$translate","$timeout",function(e,t,i,n){void 0!==e.property.value&&null!==e.property.value&&void 0!==e.property.value.inParameters&&null!==e.property.value.inParameters?e.parameters=angular.copy(e.property.value.inParameters):e.parameters=[],e.translationsRetrieved=!1,e.labels={};var s=i("PROPERTY.PARAMETER.SOURCE"),a=i("PROPERTY.PARAMETER.SOURCEEXPRESSION"),o=i("PROPERTY.PARAMETER.TARGET");t.all([s,a,o]).then(function(t){e.labels.sourceLabel=t[0],e.labels.sourceExpressionLabel=t[1],e.labels.targetLabel=t[2],e.translationsRetrieved=!0,e.gridOptions={data:e.parameters,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"source",displayName:e.labels.sourceLabel},{field:"sourceExpression",displayName:e.labels.sourceExpressionLabel},{field:"target",displayName:e.labels.targetLabel}]},e.gridOptions.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(t){e.selectedParameter=t.entity})}}),e.addNewParameter=function(){var t={source:"",sourceExpression:"",target:""};e.parameters.push(t),n(function(){e.gridApi.selection.toggleRowSelection(t)})},e.removeParameter=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.parameters.indexOf(t[0]);e.gridApi.selection.toggleRowSelection(t[0]),e.parameters.splice(i,1),0==e.parameters.length&&(e.selectedParameter=void 0),n(function(){e.parameters.length>0&&e.gridApi.selection.toggleRowSelection(e.parameters[0])})}},e.moveParameterUp=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.parameters.indexOf(t[0]);if(0!=i){var s=e.parameters[i];e.parameters.splice(i,1),n(function(){e.parameters.splice(i+-1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.moveParameterDown=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.parameters.indexOf(t[0]);if(i!=e.parameters.length-1){var s=e.parameters[i];e.parameters.splice(i,1),n(function(){e.parameters.splice(i+1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.save=function(){e.parameters.length>0?(e.property.value={},e.property.value.inParameters=e.parameters):e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.close()},e.close=function(){e.property.mode="read",e.$hide()}}]),angular.module("flowableModeler").controller("FlowableMultiInstanceCtrl",["$scope","$http",function(e,t){e.category=null,void 0==e.property.value&&null==e.property.value&&(e.property.value=""),t.get(FLOWABLE.CONFIG.contextRoot2+"//moduleTypes/parentId/1").success(function(t){e.category=t,console.log(e.category)}),e.multiInstanceChanged=function(){e.updatePropertyInModel(e.property)}}]),angular.module("flowableModeler").controller("FlowableOrderingCtrl",["$scope",function(e){
void 0==e.property.value&&null==e.property.value&&(e.property.value="Parallel"),e.orderingChanged=function(){e.updatePropertyInModel(e.property)}}]),angular.module("flowableModeler").controller("FlowableOutParametersCtrl",["$scope","$modal","$timeout","$translate",function(e,t,i,n){var s={template:"views/properties/out-parameters-popup.html",scope:e};_internalCreateModal(s,t,e)}]),angular.module("flowableModeler").controller("FlowableOutParametersPopupCtrl",["$scope","$q","$translate","$timeout",function(e,t,i,n){void 0!==e.property.value&&null!==e.property.value&&void 0!==e.property.value.outParameters&&null!==e.property.value.outParameters?e.parameters=angular.copy(e.property.value.outParameters):e.parameters=[],e.translationsRetrieved=!1,e.labels={};var s=i("PROPERTY.PARAMETER.SOURCE"),a=i("PROPERTY.PARAMETER.SOURCEEXPRESSION"),o=i("PROPERTY.PARAMETER.TARGET");t.all([s,a,o]).then(function(t){e.labels.sourceLabel=t[0],e.labels.sourceExpressionLabel=t[1],e.labels.targetLabel=t[2],e.translationsRetrieved=!0,e.gridOptions={data:e.parameters,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"source",displayName:e.labels.sourceLabel},{field:"sourceExpression",displayName:e.labels.sourceExpressionLabel},{field:"target",displayName:e.labels.targetLabel}]},e.gridOptions.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(t){e.selectedParameter=t.entity})}}),e.addNewParameter=function(){var t={source:"",sourceExpression:"",target:""};e.parameters.push(t),n(function(){e.gridApi.selection.toggleRowSelection(t)})},e.removeParameter=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.parameters.indexOf(t[0]);e.gridApi.selection.toggleRowSelection(t[0]),e.parameters.splice(i,1),0==e.parameters.length&&(e.selectedParameter=void 0),n(function(){e.parameters.length>0&&e.gridApi.selection.toggleRowSelection(e.parameters[0])})}},e.moveParameterUp=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.parameters.indexOf(t[0]);if(0!=i){var s=e.parameters[i];e.parameters.splice(i,1),n(function(){e.parameters.splice(i+-1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.moveParameterDown=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.parameters.indexOf(t[0]);if(i!=e.parameters.length-1){var s=e.parameters[i];e.parameters.splice(i,1),n(function(){e.parameters.splice(i+1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.save=function(){e.parameters.length>0?(e.property.value={},e.property.value.outParameters=e.parameters):e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.close()},e.close=function(){e.property.mode="read",e.$hide()}}]),angular.module("flowableModeler").controller("FlowableTaskListenersCtrl",["$scope","$modal","$timeout","$translate",function(e,t,i,n){var s={template:"views/properties/task-listeners-popup.html",scope:e};_internalCreateModal(s,t,e)}]),angular.module("flowableModeler").controller("FlowableTaskListenersPopupCtrl",["$scope","$q","$translate","$timeout",function(e,t,i,n){if(void 0!==e.property.value&&null!==e.property.value&&void 0!==e.property.value.taskListeners&&null!==e.property.value.taskListeners){e.property.value.taskListeners.constructor==String?e.taskListeners=JSON.parse(e.property.value.taskListeners):e.taskListeners=angular.copy(e.property.value.taskListeners);for(var s=0;s<e.taskListeners.length;s++){var a=e.taskListeners[s];void 0!==a.className&&""!==a.className?a.implementation=a.className:void 0!==a.expression&&""!==a.expression?a.implementation=a.expression:void 0!==a.delegateExpression&&""!==a.delegateExpression&&(a.implementation=a.delegateExpression)}}else e.taskListeners=[];e.selectedListener=void 0,e.selectedField=void 0,e.fields=[],e.translationsRetrieved=!1,e.labels={};var o=i("PROPERTY.TASKLISTENERS.EVENT"),l=i("PROPERTY.TASKLISTENERS.FIELDS.IMPLEMENTATION"),r=i("PROPERTY.TASKLISTENERS.FIELDS.NAME");t.all([o,l,r]).then(function(t){e.labels.eventLabel=t[0],e.labels.implementationLabel=t[1],e.labels.nameLabel=t[2],e.translationsRetrieved=!0,e.gridOptions={data:e.taskListeners,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"event",displayName:e.labels.eventLabel},{field:"implementation",displayName:e.labels.implementationLabel}]},e.gridOptions.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(t){if(e.selectedListener=t.entity,e.selectedField=void 0,e.selectedListener){var i=e.selectedListener.fields;if(void 0!==i&&null!==i)for(var n=0;n<i.length;n++){var s=i[n];void 0!==s.stringValue&&""!==s.stringValue?s.implementation=s.stringValue:void 0!==s.expression&&""!==s.expression?s.implementation=s.expression:void 0!==s.string&&""!==s.string&&(s.implementation=s.string)}else e.selectedListener.fields=[];e.fields.length=0;for(var n=0;n<e.selectedListener.fields.length;n++)e.fields.push(e.selectedListener.fields[n])}})},e.gridFieldOptions={data:e.fields,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,columnDefs:[{field:"name",displayName:e.labels.name},{field:"implementation",displayName:e.labels.implementationLabel}]},e.gridFieldOptions.onRegisterApi=function(t){e.fieldGridApi=t,t.selection.on.rowSelectionChanged(e,function(t){e.selectedField=t.entity})}}),e.listenerDetailsChanged=function(){""!==e.selectedListener.className?e.selectedListener.implementation=e.selectedListener.className:""!==e.selectedListener.expression?e.selectedListener.implementation=e.selectedListener.expression:""!==e.selectedListener.delegateExpression?e.selectedListener.implementation=e.selectedListener.delegateExpression:e.selectedListener.implementation=""},e.addNewListener=function(){var t={event:"create",implementation:"",className:"",expression:"",delegateExpression:""};e.taskListeners.push(t),n(function(){e.gridApi.selection.toggleRowSelection(t)})},e.removeListener=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.taskListeners.indexOf(t[0]);e.gridApi.selection.toggleRowSelection(t[0]),e.taskListeners.splice(i,1),0==e.taskListeners.length&&(e.selectedListener=void 0),n(function(){e.taskListeners.length>0&&e.gridApi.selection.toggleRowSelection(e.taskListeners[0])})}},e.moveListenerUp=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.taskListeners.indexOf(t[0]);if(0!=i){var s=e.taskListeners[i];e.taskListeners.splice(i,1),n(function(){e.taskListeners.splice(i+-1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.moveListenerDown=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.taskListeners.indexOf(t[0]);if(i!=e.taskListeners.length-1){var s=e.taskListeners[i];e.taskListeners.splice(i,1),n(function(){e.taskListeners.splice(i+1,0,s),n(function(){e.gridApi.selection.toggleRowSelection(s)})})}}},e.fieldDetailsChanged=function(){""!=e.selectedField.stringValue?e.selectedField.implementation=e.selectedField.stringValue:""!=e.selectedField.expression?e.selectedField.implementation=e.selectedField.expression:""!=e.selectedField.string?e.selectedField.implementation=e.selectedField.string:e.selectedField.implementation=""},e.addNewField=function(){if(e.selectedListener){void 0==e.selectedListener.fields&&(e.selectedListener.fields=[]);var t={name:"fieldName",implementation:"",stringValue:"",expression:"",string:""};e.fields.push(t),e.selectedListener.fields.push(t),n(function(){e.fieldGridApi.selection.toggleRowSelection(t)})}},e.removeField=function(){var t=e.fieldGridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.fields.indexOf(t[0]);e.fieldGridApi.selection.toggleRowSelection(t[0]),e.fields.splice(i,1),e.selectedListener.fields.splice(i,1),0==e.fields.length&&(e.selectedField=void 0),n(function(){e.fields.length>0&&e.fieldGridApi.selection.toggleRowSelection(e.fields[0])})}},e.moveFieldUp=function(){var t=e.fieldGridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.fields.indexOf(t[0]);if(0!=i){var s=e.fields[i];e.fields.splice(i,1),e.selectedListener.fields.splice(i,1),n(function(){e.fields.splice(i+-1,0,s),e.selectedListener.fields.splice(i+-1,0,s),n(function(){e.fieldGridApi.selection.toggleRowSelection(s)})})}}},e.moveFieldDown=function(){var t=e.fieldGridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.fields.indexOf(t[0]);if(i!=e.fields.length-1){var s=e.fields[i];e.fields.splice(i,1),e.selectedListeners.fields.splice(i,1),n(function(){e.fields.splice(i+1,0,s),e.selectedListener.fields.splice(i+1,0,s),n(function(){e.fieldGridApi.selection.toggleRowSelection(s)})})}}},e.save=function(){e.taskListeners.length>0?(e.property.value={},e.property.value.taskListeners=e.taskListeners):e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.close()},e.close=function(){e.property.mode="read",e.$hide()}}]),angular.module("flowableModeler").controller("FlowableCollapsedSubprocessReferenceCtrl",["$scope","$modal","$http",function(e,t,i){var n={template:"views/properties/subprocess-reference-popup.html",scope:e};_internalCreateModal(n,t,e)}]),angular.module("flowableModeler").controller("FlowableCollapsedSubprocessReferencePopupCtrl",["$scope","$http",function(e,t){e.state={loadingSubprocesses:!0,error:!1},e.close=function(){e.property.mode="read",e.$hide()},e.selectSubProcess=function(t,i){i.stopPropagation(),e.selectedSubProcess&&e.selectedSubProcess.id&&t.id==e.selectedSubProcess.id?e.selectedSubProcess=null:e.selectedSubProcess=t},e.save=function(){e.selectedSubProcess?e.property.value={id:e.selectedSubProcess.id,name:e.selectedSubProcess.name}:e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.loadProcesses=function(){t.get(FLOWABLE.CONFIG.contextRoot+"/app/rest/models?filter=myprocesses").success(function(t){e.state.loadingSubprocesses=!1,e.state.subprocessError=!1,e.subProcesses=t.data}).error(function(t,i,n,s){e.state.loadingSubprocesses=!1,e.state.subprocessError=!0})},e.property&&e.property.value&&e.property.value.id&&(e.selectedSubProcess=e.property.value),e.loadProcesses()}]),angular.module("flowableModeler").controller("FlowableFormReferenceDisplayCtrl",["$scope","$modal","$http",function(e,t,i){e.property&&e.property.value&&i.get(FLOWABLE.CONFIG.contextRoot1+"/form-definition?key="+e.property.value).success(function(t){e.form=t.data[0]})}]),angular.module("flowableModeler").controller("FlowableFormReferenceDisplayCtrl1",["$scope","$modal","$http",function(e,t,i){console.log("-----------------------用户"),e.users=[],e.value=e.property.value.split(","),e.property&&e.property.value&&angular.forEach(e.value,function(t){i.get(FLOWABLE.CONFIG.contextRoot2+"/users/"+t).success(function(t){e.users.push(t)})})}]),angular.module("flowableModeler").controller("FlowableFormReferenceCtrl",["$scope","$modal","$http",function(e,t,i){var n={template:"views/properties/form-reference-popup.html",scope:e};_internalCreateModal(n,t,e)}]),angular.module("flowableModeler").controller("FlowableFormReferenceCtrl1",["$scope","$modal","$http",function(e,t,i){var n={template:"views/properties/form-reference-popup2.html",scope:e};_internalCreateModal(n,t,e)}]),angular.module("flowableModeler").controller("FlowableFormReferencePopupCtrl",["$rootScope","$scope","$http","$location","editorManager",function(e,t,i,n,s){t.state={loadingForms:!0,formError:!1},t.popup={state:"formReference"},t.foldersBreadCrumbs=[],t.close=function(){t.property.mode="read",t.$hide()},t.selectForm=function(e,i){i.stopPropagation(),t.selectedForm&&t.selectedForm.id&&e.id==t.selectedForm.id?t.selectedForm=null:t.selectedForm=e},t.save=function(){t.selectedForm?t.property.value={id:t.selectedForm.id,name:t.selectedForm.name,key:t.selectedForm.key}:t.property.value=null,t.property.value=t.selectedForm,t.updatePropertyInModel(t.property),t.close()},t.open=function(){if(t.selectedForm){t.property.value={id:t.selectedForm.id,name:t.selectedForm.name,key:t.selectedForm.key},t.property.value=t.selectedForm.key,console.log("修改成功：  key为"),console.log(t.property),t.updatePropertyInModel(t.property);var n=s.getBaseModelData(),a=s.getModel();a=JSON.stringify(a);var o={modeltype:n.model.modelType,jsonXml:a,name:n.name,key:n.key,description:n.description,newversion:!1,comment:"",lastUpdated:n.lastUpdated};i({method:"POST",data:o,ignoreErrors:!0,headers:{Token:s.getToken(),Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},url:FLOWABLE.URL.putModel(n.modelId)}).success(function(i,n,a,o){s.handleEvents({type:ORYX.CONFIG.EVENT_SAVED});EDITOR.UTIL.collectSortedElementsFromPrecedingElements(t.selectedShape);e.addHistoryItem(t.selectedShape.resourceId)}).error(function(e,t,i,n){}),t.close()}},t.newForm=function(){t.popup.state="newForm";s.getBaseModelData();t.model={loading:!1,form:{name:"",key:"",description:"",modelType:2}}},t.createForm=function(){t.model.form.name&&0!=t.model.form.name.length&&t.model.form.key&&0!=t.model.form.key.length&&(t.model.loading=!0,i({method:"POST",url:FLOWABLE.CONFIG.contextRoot+"/app/rest/models",data:t.model.form}).success(function(a,o,l,r){var d=a.id;t.property.value={id:d,name:a.name,key:a.key},t.updatePropertyInModel(t.property);var p=s.getBaseModelData(),c=s.getModel();c=JSON.stringify(c);var u={modeltype:p.model.modelType,json_xml:c,name:p.name,key:p.key,description:p.description,newversion:!1};i({method:"POST",data:u,ignoreErrors:!0,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:function(e){var t=[];for(var i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")},url:FLOWABLE.URL.putModel(p.modelId)}).success(function(i,a,o,l){s.handleEvents({type:ORYX.CONFIG.EVENT_SAVED}),t.model.loading=!1,t.$hide();EDITOR.UTIL.collectSortedElementsFromPrecedingElements(t.selectedShape);e.addHistoryItem(t.selectedShape.resourceId),n.path("form-editor/"+d)}).error(function(e,i,n,s){t.model.loading=!1,t.$hide()})}).error(function(e,i,n,s){t.model.loading=!1,t.model.errorMessage=e.message}))},t.cancel=function(){t.close()},t.loadForms=function(){s.getBaseModelData();i.get(FLOWABLE.CONFIG.contextRoot1+"/form-definition").success(function(e){t.state.loadingForms=!1,t.state.formError=!1,t.forms=e.data}).error(function(e,i,n,s){t.state.loadingForms=!1,t.state.formError=!0})},t.property&&t.property.value&&t.property.value.id&&(t.selectedForm=t.property.value),t.loadForms()}]),angular.module("flowableModeler").controller("FlowableFormReferencePopupCtrl1",["$rootScope","$scope","$http","$location","editorManager",function(e,t,i,n,s){t.state={loadingForms:!0,formError:!1},t.popup={state:"formReference"},t.close=function(){t.property.mode="read",t.$hide()},t.open=function(){if(t.selectedForm){t.property.value={id:t.selectedForm.id,name:t.selectedForm.name},t.property.value=t.selectedForm.id,console.log("修改成功:id为"),console.log(t.property),console.log(t.property.value),t.updatePropertyInModel(t.property);var n=s.getBaseModelData(),a=s.getModel();a=JSON.stringify(a);var o={modeltype:n.model.modelType,jsonXml:a,name:n.name,key:n.key,description:n.description,newversion:!1,comment:"",lastUpdated:n.lastUpdated};i({method:"POST",data:o,ignoreErrors:!0,headers:{Token:s.getToken(),Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},url:FLOWABLE.URL.putModel(n.modelId)}).success(function(i,n,a,o){s.handleEvents({type:ORYX.CONFIG.EVENT_SAVED}),e.addHistoryItem(t.selectedShape.resourceId)}).error(function(e,t,i,n){}),t.close()}},t.selectForm=function(e,i){i.stopPropagation(),t.selectedForm&&t.selectedForm.id&&e.id==t.selectedForm.id?t.selectedForm=null:t.selectedForm=e},t.cancel=function(){t.close()},t.loadForms=function(){s.getBaseModelData();i.get(FLOWABLE.CONFIG.contextRoot2+"/users").success(function(e){t.state.loadingForms=!1,t.state.formError=!1,t.forms=e.data}).error(function(e,i,n,s){t.state.loadingForms=!1,t.state.formError=!0})},t.loadForms()}]),angular.module("flowableModeler").controller("FlowableFormReferencePopupCtrl2",["$rootScope","$scope","$http","$location","editorManager",function(e,t,i,n,s){t.state={loadingForms:!0,formError:!1},t.popup={state:"formReference"},t.close=function(){t.property.mode="read",t.$hide()},t.open=function(){if(t.selected){console.log(t.selected),t.value="",angular.forEach(t.selected,function(e,i){t.selected.length==i+1?t.value+=e.id:t.value+=e.id+","}),t.property.value=t.value,console.log("修改成功:id为"),console.log(t.property),console.log(t.property.value),t.updatePropertyInModel(t.property);var n=s.getBaseModelData(),a=s.getModel();a=JSON.stringify(a);var o={modeltype:n.model.modelType,jsonXml:a,name:n.name,key:n.key,description:n.description,newversion:!1,comment:"",lastUpdated:n.lastUpdated};i({method:"POST",data:o,ignoreErrors:!0,headers:{Token:s.getToken(),Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},url:FLOWABLE.URL.putModel(n.modelId)}).success(function(i,n,a,o){s.handleEvents({type:ORYX.CONFIG.EVENT_SAVED}),e.addHistoryItem(t.selectedShape.resourceId)}).error(function(e,t,i,n){}),t.close()}},t.selected=[],t.selectForm=function(e,i){i.stopPropagation();var n=i.target;if(void 0!=n.checked){var s=n.checked?"add":"remove";if("add"==s&&t.selected.indexOf(e)==-1&&t.selected.push(e),"remove"==s&&t.selected.indexOf(e)!=-1){var a=t.selected.indexOf(e);t.selected.splice(a,1)}}t.selectedForm&&t.selectedForm.id&&e.id==t.selectedForm.id},t.isselect=function(e){var i=!1;return angular.forEach(t.selected,function(t){e==t.id&&(i=!0)}),i},t.cancel=function(){t.close()},console.log(t),console.log(t.property.value),null==t.property.value&&""==t.property.value||(t.checked_user=t.property.value.split(",")),t.loadForms=function(){s.getBaseModelData();return i.get(FLOWABLE.CONFIG.contextRoot2+"/users").success(function(e){t.state.loadingForms=!1,t.state.formError=!1,t.forms=e.data,angular.forEach(t.forms,function(e){angular.forEach(t.checked_user,function(i){e.id==i&&t.selected.push(e)})}),console.log(e)}).error(function(e,i,n,s){t.state.loadingForms=!1,t.state.formError=!0}),t.forms},t.loadForms()}]),angular.module("flowableModeler").controller("FlowableSequenceFlowOrderCtrl",["$scope","$modal","$timeout","$translate",function(e,t,i,n){var s={template:"views/properties/sequenceflow-order-popup.html",scope:e};_internalCreateModal(s,t,e)}]),angular.module("flowableModeler").controller("FlowableSequenceFlowOrderPopupCtrl",["$scope","$translate",function(e,t){var i=[],n=e.selectedShape;if(n){for(var s=n.getOutgoingShapes(),a=0;a<s.length;a++)if("SequenceFlow"===s[a].getStencil().idWithoutNs()){var o=s[a].getTarget();i.push({id:s[a].resourceId,targetTitle:o.properties.get("oryx-name"),targetType:t.instant(o.getStencil().title())})}}else console.log("Programmatic error: no selected shape found");var l=[];if(e.property.value&&e.property.value.sequenceFlowOrder){for(var r=e.property.value.sequenceFlowOrder,d=0;d<r.length;d++)for(var p=0;p<i.length;p++)if(i[p].id===r[d]){l.push(i[p]),i.splice(p,1);break}l=l.concat(i)}else l=i;e.outgoingSequenceFlow=l,e.moveUp=function(t){var i=e.outgoingSequenceFlow[t];e.outgoingSequenceFlow[t]=e.outgoingSequenceFlow[t-1],e.outgoingSequenceFlow[t-1]=i},e.moveDown=function(t){var i=e.outgoingSequenceFlow[t];e.outgoingSequenceFlow[t]=e.outgoingSequenceFlow[t+1],e.outgoingSequenceFlow[t+1]=i},e.save=function(){if(e.outgoingSequenceFlow.length>0){e.property.value={},e.property.value.sequenceFlowOrder=[];for(var t=0;t<e.outgoingSequenceFlow.length;t++)e.property.value.sequenceFlowOrder.push(e.outgoingSequenceFlow[t].id)}else e.property.value=null;e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.close()},e.close=function(){e.property.mode="read",e.$hide()}}]),angular.module("flowableModeler").controller("FlowableConditionExpressionCtrl",["$scope","$modal",function(e,t){var i={template:"views/properties/condition-expression-popup.html",scope:e};_internalCreateModal(i,t,e)}]),angular.module("flowableModeler").controller("FlowableConditionExpressionPopupCtrl",["$rootScope","$scope","$translate",function(e,t,i){void 0!==t.property.value&&null!==t.property.value&&void 0!==t.property.value.expression&&null!==t.property.value.expression?t.expression=t.property.value.expression:void 0!==t.property.value&&null!==t.property.value?t.expression={type:"static",staticValue:t.property.value}:t.expression={},t.save=function(){t.property.value={expression:t.expression},t.updatePropertyInModel(t.property),t.close()},t.close=function(){t.property.mode="read",t.$hide()}}]),angular.module("flowableModeler").controller("FlowableSignalDefinitionsCtrl",["$scope","$modal",function(e,t){var i={template:"views/properties/signal-definitions-popup.html",scope:e};_internalCreateModal(i,t,e)}]),angular.module("flowableModeler").controller("FlowableSignalDefinitionsPopupCtrl",["$scope","$q","$translate","$timeout",function(e,t,i,n){void 0!==e.property.value&&null!==e.property.value&&e.property.value.length>0?e.property.value.constructor==String?e.signalDefinitions=JSON.parse(e.property.value):e.signalDefinitions=angular.copy(e.property.value):e.signalDefinitions=[],e.selectedSignalDefinition=void 0,e.translationsRetrieved=!1,e.labels={};var s=i("PROPERTY.SIGNALDEFINITIONS.ID"),a=i("PROPERTY.SIGNALDEFINITIONS.NAME"),o=i("PROPERTY.SIGNALDEFINITIONS.SCOPE");t.all([s,a,o]).then(function(t){e.labels.idLabel=t[0],e.labels.nameLabel=t[1],e.labels.scopeLabel=t[2],e.translationsRetrieved=!0,e.gridOptions={data:e.signalDefinitions,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"id",displayName:e.labels.idLabel},{field:"name",displayName:e.labels.nameLabel},{field:"scope",displayName:e.labels.scopeLabel}]},e.gridOptions.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(t){e.selectedSignalDefinition=t.entity})}}),e.addNewSignalDefinition=function(){var t={id:"",name:"",scope:"global"};e.signalDefinitions.push(t),n(function(){e.gridApi.selection.toggleRowSelection(t)})},e.removeSignalDefinition=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.signalDefinitions.indexOf(t[0]);e.gridApi.selection.toggleRowSelection(t[0]),e.signalDefinitions.splice(i,1),0==e.signalDefinitions.length&&(e.selectedSignalDefinition=void 0),n(function(){e.signalDefinitions.length>0&&e.gridApi.selection.toggleRowSelection(e.signalDefinitions[0])})}},e.scopeOptions=[{value:"global",translationId:"PROPERTY.SIGNALDEFINITIONS.SCOPE-GLOBAL"},{value:"processInstance",translationId:"PROPERTY.SIGNALDEFINITIONS.SCOPE-PROCESSINSTANCE"}],e.save=function(){e.signalDefinitions.length>0?e.property.value=e.signalDefinitions:e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.property.mode="read",e.$hide()},e.close=function(){e.property.mode="read",e.$hide()}}]),angular.module("flowableModeler").controller("FlowableSignalRefCtrl",["$scope",function(e){for(var t=void 0,i=e.selectedShape;null!==i&&void 0!==i&&void 0===t;)i.properties&&i.properties.get("oryx-signaldefinitions")?t=i.properties.get("oryx-signaldefinitions"):i=i.parent;try{t=JSON.parse(t),"string"==typeof t&&(t=JSON.parse(t))}catch(n){}e.signalDefinitions=t,e.signalChanged=function(){e.updatePropertyInModel(e.property)}}]),angular.module("flowableModeler").controller("FlowableMessageDefinitionsCtrl",["$scope","$modal",function(e,t){var i={template:"views/properties/message-definitions-popup.html",scope:e};_internalCreateModal(i,t,e)}]),angular.module("flowableModeler").controller("FlowableMessageDefinitionsPopupCtrl",["$scope","$q","$translate","$timeout",function(e,t,i,n){void 0!==e.property.value&&null!==e.property.value&&e.property.value.length>0?e.property.value.constructor==String?e.messageDefinitions=JSON.parse(e.property.value):e.messageDefinitions=angular.copy(e.property.value):e.messageDefinitions=[],e.selectedMessageDefinition=void 0,e.translationsRetrieved=!1,e.labels={};var s=i("PROPERTY.MESSAGEDEFINITIONS.ID"),a=i("PROPERTY.MESSAGEDEFINITIONS.NAME");t.all([s,a]).then(function(t){e.labels.idLabel=t[0],e.labels.nameLabel=t[1],e.translationsRetrieved=!0,e.gridOptions={data:e.messageDefinitions,headerRowHeight:28,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,enableHorizontalScrollbar:0,enableColumnMenus:!1,enableSorting:!1,columnDefs:[{field:"id",displayName:e.labels.idLabel},{field:"name",displayName:e.labels.nameLabel}]},e.gridOptions.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(t){e.selectedMessageDefinition=t.entity})}}),e.addNewMessageDefinition=function(){var t={id:"",name:""};e.messageDefinitions.push(t),n(function(){e.gridApi.selection.toggleRowSelection(t)})},e.removeMessageDefinition=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&t.length>0){var i=e.messageDefinitions.indexOf(t[0]);e.gridApi.selection.toggleRowSelection(t[0]),e.messageDefinitions.splice(i,1),0==e.messageDefinitions.length&&(e.selectedMesageDefinition=void 0),n(function(){e.messageDefinitions.length>0&&e.gridApi.selection.toggleRowSelection(e.messageDefinitions[0])})}},e.save=function(){e.messageDefinitions.length>0?e.property.value=e.messageDefinitions:e.property.value=null,e.updatePropertyInModel(e.property),e.close()},e.cancel=function(){e.property.mode="read",e.$hide()},e.close=function(){e.property.mode="read",e.$hide()}}]),angular.module("flowableModeler").controller("FlowableMessageRefCtrl",["$scope",function(e){for(var t=void 0,i=e.selectedShape;null!==i&&void 0!==i&&void 0===t;)i.properties&&i.properties.get("oryx-messagedefinitions")?t=i.properties.get("oryx-messagedefinitions"):i=i.parent;try{t=JSON.parse(t),"string"==typeof t&&(t=JSON.parse(t))}catch(n){}e.messageDefinitions=t,e.messageChanged=function(){e.updatePropertyInModel(e.property)}}]),angular.module("flowableModeler").controller("BpmnEditorDueDateCtrl",["$scope","$modal",function(e,t){var i={template:"views/properties/duedate-popup.html",scope:e};_internalCreateModal(i,t,e)}]),angular.module("flowableModeler").controller("BpmnEditorDueDatePopupCtrl",["$rootScope","$scope","$translate",function(e,t,i){void 0!==t.property.value&&null!==t.property.value?void 0!==t.property.value.duedate&&null!==t.property.value.duedate?t.popup={duedate:t.property.value.duedate}:void 0!==t.property.value.duedateExpression&&null!==t.property.value.duedateExpression?t.popup={duedateExpression:t.property.value.duedateExpression}:t.popup={duedateExpression:t.property.value}:t.popup={},console.log(t.property),console.log(t.popup),t.taskDueDateOptions=[{id:"none",title:i.instant("PROPERTY.DUEDATE.TASK-DUE-DATE-OPTIONS.NO-DUEDATE")},{id:"expression",title:i.instant("PROPERTY.DUEDATE.TASK-DUE-DATE-OPTIONS.EXPRESSION")}],t.popup.duedate||t.popup.duedateExpression?t.popup.duedate?t.popup.duedate.fixed?t.popup.selectedDueDateOption=t.taskDueDateOptions[2].id:t.popup.duedate.field?t.popup.selectedDueDateOption=t.taskDueDateOptions[3].id:t.popup.selectedDueDateOption=t.taskDueDateOptions[0].id:t.popup.selectedDueDateOption=t.taskDueDateOptions[1].id:t.popup.selectedDueDateOption=t.taskDueDateOptions[0].id,t.dueDateOptionChanged=function(){"expression"===t.popup.selectedDueDateOption?t.popup.duedate=void 0:"none"===t.popup.selectedDueDateOption?(t.popup.duedate=void 0,t.popup.duedateExpression=void 0):"static"===t.popup.selectedDueDateOption?(t.popup.duedate={fixed:{}},t.popup.duedateExpression=void 0):"field"===t.popup.selectedDueDateOption&&(t.popup.duedate={field:{}},t.popup.duedateExpression=void 0)},t.setAddCalculationType=function(){t.popup.duedate.field.taskDueDateCalculationType="add"},t.setSubtractCalculationType=function(){t.popup.duedate.field.taskDueDateCalculationType="subtract"},t.allSteps=EDITOR.UTIL.collectSortedElementsFromPrecedingElements(t.selectedShape),t.save=function(){null==t.popup.duedateExpression?t.property.value=null:(console.log(t.popup.duedateExpression),t.property.value=new Date(t.popup.duedateExpression)),t.updatePropertyInModel(t.property),t.close()},t.close=function(){t.property.mode="read",t.$hide()}}]).directive("datetimePicker",function(){return{restrict:"A",link:function(e,t,i){var n=e.$eval(i.datetimePicker)||{};n.autoclose=n.autoclose||!0,n.todayBtn=n.todayBtn||!0,n.showSeconds=n.showSeconds||!0,n.format=n.format||"yyyy-mm-dd hh:ii:ss",n.language=n.language||"zh-CN",t.datetimepicker(n)}}}).directive("dateFormat",["$filter",function(e){var t=e("date");return{require:"ngModel",link:function(e,i,n,s){function a(e){return t(e,"yyyy-MM-dd HH:mm:ss")}s.$formatters.push(a)}}}]),angular.module("flowableModeler").controller("FlowableDecisionTableReferenceCtrl",["$scope","$modal","$http",function(e,t,i){var n={template:"views/properties/decisiontable-reference-popup.html",scope:e};_internalCreateModal(n,t,e)}]),angular.module("flowableModeler").controller("FlowableDecisionTableReferencePopupCtrl",["$rootScope","$scope","$http","$location","editorManager",function(e,t,i,n,s){t.state={loadingDecisionTables:!0,decisionTableError:!1},t.popup={state:"decisionTableReference"},t.foldersBreadCrumbs=[],t.$parent.$on("modal.hide.before",function(){t.close(),t.$parent.$apply()}),t.close=function(){t.property.newVariablesMapping=void 0,t.property.mode="read",t.$hide()},t.selectDecisionTable=function(e,i){i.stopPropagation(),t.selectedDecisionTable&&t.selectedDecisionTable.id&&e.id==t.selectedDecisionTable.id?t.selectedDecisionTable=null:t.selectedDecisionTable=e},t.isSelected=function(){return!(!t.selectedDecisionTable||!t.selectedDecisionTable.id)},t.save=function(){t.selectedDecisionTable?t.property.value={id:t.selectedDecisionTable.id,name:t.selectedDecisionTable.name,key:t.selectedDecisionTable.key}:t.property.value=null,t.updatePropertyInModel(t.property),t.close()},t.open=function(){if(t.selectedDecisionTable){t.property.value={id:t.selectedDecisionTable.id,name:t.selectedDecisionTable.name,key:t.selectedDecisionTable.key},t.updatePropertyInModel(t.property);var e=s.getBaseModelData(),i=s.getModel();i=JSON.stringify(i);({modeltype:e.model.modelType,json_xml:i,name:e.name,key:e.key,description:e.description,newversion:!1,lastUpdated:e.lastUpdated});t.close()}},t.newDecisionTable=function(){t.property.value.variablesmapping=[],t.popup.state="newDecisionTable";s.getBaseModelData();t.model={loading:!1,decisionTable:{name:"",key:"",description:"",modelType:4},defaultStencilSet:void 0,decisionTableStencilSets:[]}},t.createDecisionTable=function(){if(t.model.decisionTable.name&&0!=t.model.decisionTable.name.length&&t.model.decisionTable.key&&0!=t.model.decisionTable.key.length){var a=t.model.decisionTable.stencilSet;t.model.loading=!0,i({method:"POST",url:FLOWABLE.CONFIG.contextRoot+"/app/rest/models",data:t.model.decisionTable}).success(function(o,l,r,d){var p=o.id;t.property.value={id:p,name:o.name,key:o.key},t.updatePropertyInModel(t.property);var c=s.getBaseModelData(),u=s.getModel();u=JSON.stringify(u);var g={modeltype:c.model.modelType,json_xml:u,name:c.name,key:c.key,description:c.description,newversion:!1,lastUpdated:c.lastUpdated,stencilSet:a};i({method:"POST",data:g,ignoreErrors:!0,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:function(e){var t=[];for(var i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")},url:FLOWABLE.URL.putModel(c.modelId)}).success(function(i,a,o,l){s.handleEvents({type:ORYX.CONFIG.EVENT_SAVED}),t.model.loading=!1,t.$hide(),e.addHistoryItem(t.selectedShape.resourceId),
n.path("decision-table-editor/"+p)}).error(function(e,i,n,s){t.model.loading=!1,t.$hide()})}).error(function(e,i,n,s){t.model.loading=!1,t.model.errorMessage=e.message})}},t.cancel=function(){t.close()},t.resetCurrent=function(){for(var e=0,i=!1;e<t.decisionTables.length&&i===!1;e++){var n=t.decisionTables[e];n.id===t.property.value.id&&(t.selectedDecisionTable=n,i=!0)}},t.loadDecisionTables=function(){s.getBaseModelData();i.get(FLOWABLE.CONFIG.contextRoot+"/app/rest/decision-table-models").success(function(e){t.state.loadingDecisionTables=!1,t.state.decisionTableError=!1,t.decisionTables=e.data,t.resetCurrent()}).error(function(e,i,n,s){t.state.loadingDecisionTables=!1,t.state.decisionTableError=!0})},t.property&&t.property.value&&t.property.value.id&&(t.selectedDecisionTable=t.property.value,t.storedId=t.property.value.id),t.loadDecisionTables()}]),FLOWABLE.HEADER_CONFIG.showAppTitle=!1,FLOWABLE.HEADER_CONFIG.showHeaderMenu=!1,FLOWABLE.HEADER_CONFIG.showMainNavigation=!1,FLOWABLE.HEADER_CONFIG.showPageHeader=!1,FLOWABLE.TOOLBAR.ACTIONS.closeEditor=function(e){window.close()},FLOWABLE.TOOLBAR.ACTIONS.navigateToProcess=function(e){var t={type:FLOWABLE.eventBus.EVENT_TYPE_NAVIGATE_TO_PROCESS,processId:e};FLOWABLE.eventBus.dispatch(FLOWABLE.eventBus.EVENT_TYPE_NAVIGATE_TO_PROCESS,t)},FLOWABLE.TOOLBAR_CONFIG.secondaryItems.push({type:"button",title:"Close",cssClass:"glyphicon glyphicon-remove",action:"FLOWABLE.TOOLBAR.ACTIONS.closeEditor"}),angular.module("flowableModeler").run(["$templateCache",function(e){e.put("views/editor.html",'<div ng-controller="StencilController" ng-cloak=""><div class="subheader editor-toolbar" id="editor-header"><a ng-click="backToLanding()" title="{{\'GENERAL.MAIN-TITLE\' | translate}}"><img class="toolbar-logo" ng-src="{{appResourceRoot}}images/flowable-logo.png" ng-srcset="{{appResourceRoot}}images/flowable-logo.png 1x, {{appResourceRoot}}images/flowable-logo@2x.png 2x"></a><div class="btn-group"><div class="btn-toolbar pull-left" ng-controller="ToolbarController" ng-cloak=""><button id="{{item.id}}" title="{{item.title | translate}}" ng-repeat="item in items" ng-switch="" on="item.type" class="btn btn-inverse" ng-class="{\'separator\': item.type == \'separator\'}" ng-disabled="item.type == \'separator\' || item.enabled == false" ng-click="toolbarButtonClicked($index)"><i ng-switch-when="button" ng-class="item.cssClass" class="toolbar-button" data-toggle="tooltip" title="{{item.title | translate}}"></i><div ng-switch-when="separator" ng-class="item.cssClass"></div></button></div></div><div class="btn-group pull-right" ng-show="!secondaryItems.length"><div class="btn-toolbar pull-right" ng-controller="ToolbarController"><button title="{{item.title | translate}}" ng-repeat="item in secondaryItems" ng-switch="" on="item.type" class="btn btn-inverse" ng-class="{\'separator\': item.type == \'separator\'}" ng-disabled="item.type == \'separator\'" ng-click="toolbarSecondaryButtonClicked($index)" id="{{item.id}}"><i ng-switch-when="button" ng-class="item.cssClass" class="toolbar-button" data-toggle="tooltip" title="{{item.title | translate}}"></i><div ng-switch-when="separator" ng-class="item.cssClass"></div></button></div></div></div><div class="full"><div class="row row-no-gutter"><div id="paletteHelpWrapper" class="col-xs-3" ng-class="{\'paletteCollapsed\': paletteCollapsed}"><div class="nav-title" id="paletteHeader"><div class="nav-header-top"><i class="glyphicon clickable" ng-click="paletteCollapsed=!paletteCollapsed" ng-class="{\'glyphicon-chevron-right\': paletteCollapsed,\'pull-right glyphicon-chevron-left\': !paletteCollapsed}"></i> 流程组件选取</div></div><div class="stencils" id="paletteSection" ng-show="!paletteCollapsed"><div ng-if="stencilItemGroups.length > 1"><div ng-repeat="group in stencilItemGroups"><ul ng-if="group.visible && group.items" class="stencil-group" ng-class="{collapsed: !group.expanded, \'first\': $first}"><li ng-include="\'views/partials/stencil-item-template.html\'"></li></ul><div ng-if="!group.items" ng-include="\'views/partials/root-stencil-item-template.html\'"></div></div></div><div ng-if="stencilItemGroups.length == 1"><ul class="stencil-group"><li ng-repeat="item in stencilItemGroups[0].paletteItems" class="stencil-item" id="{{item.id}}" title="{{item.description | translate}}" ng-model="draggedElement" data-drag="true" jqyoui-draggable="{onStart:\'startDragCallback\', onDrag:\'dragCallback\'}" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\', opacity : 0.5}"><img ng-if="!item.customIcon" ng-src="stencilsets/bpmn2.0/icons/{{item.icon}}" width="16px;" height="16px;"> <img ng-if="item.customIcon" ng-src="{{config.contextRoot}}/app/rest/image/{{item.icon}}" width="16px;" height="16px;"> {{item.name | translate}}</li></ul></div></div><div id="process-treeview-wrapper" ng-controller="ProcessNavigatorController" ng-show="!paletteCollapsed"><div class="process-treeview-header">流程导航</div><div class="process-treeview-body" ng-show="isEditorReady"><div class="process-treeview-process-title" title="{{treeview.id}}" ng-class="{\'current-process\': treeview.current}">流程: {{treeview.name}} <img ng-show="!treeview.current" ng-src="images/pencil.png" class="pull-right" ng-click="edit(treeview.id)"></div><ul class="process-treeview-list" ng-if="treeview.children"><li ng-repeat="child in treeview.children" ng-include="\'views/partials/process-tree-list.html\'"></li></ul><div ng-if="!treeview.children || treeview.children.length == 0" style="padding-left: 5px;">没有使用子流程元素</div></div></div></div><div id="propertiesHelpWrapper" class="col-xs-3" ng-class="{\'propertiesCollapsed\': propertiesCollapsed}"><div class="propertySection" id="propertySection"><div class="clearfix" id="propertyHeader"><div class="pull-right" ng-if="selectedItem.auditData.createDate"><strong>{{\'ELEMENT.DATE_CREATED\' | translate}}:</strong> {{selectedItem.auditData.createDate}}</div><div class="pull-right" ng-if="selectedItem.auditData.author"><strong>{{\'ELEMENT.AUTHOR\' | translate}}:</strong> {{selectedItem.auditData.author}}</div><div class="nav-title"><div class="nav-header-top"><i class="glyphicon clickable" ng-click="propertiesCollapsed=!propertiesCollapsed" ng-class="{\'glyphicon-chevron-left\': propertiesCollapsed, \'glyphicon-chevron-right\': !propertiesCollapsed}"></i> <span ng-show="selectedItem.title != undefined && selectedItem.title != null && selectedItem.title.length > 0">{{selectedItem.title}}</span> <span ng-show="!selectedItem || selectedItem.title == undefined || selectedItem.title == null || selectedItem.title.length == 0">{{modelData.name}}</span></div></div></div><div class="selected-item-body" ng-show="!propertiesCollapsed"><div><div class="property-row" ng-repeat="property in selectedItem.properties" ng-click="propertyClicked($index)" ng-class="{\'clear\' : $index%2 == 0}"><span class="title" ng-if="!property.hidden">{{ property.title }}&nbsp;:</span> <span class="title-removed" ng-if="property.hidden"><i>{{ property.title }}&nbsp;({{\'PROPERTY.REMOVED\' | translate}})&nbsp;:</i></span> <span class="value"><ng-include src="getPropertyTemplateUrl($index)" ng-if="!property.hasReadWriteMode"></ng-include><ng-include src="getPropertyReadModeTemplateUrl($index)" ng-if="property.hasReadWriteMode && property.mode == \'read\'"></ng-include><ng-include src="getPropertyWriteModeTemplateUrl($index)" ng-if="property.hasReadWriteMode && property.mode == \'write\'"></ng-include></span></div></div></div></div></div><div id="contentCanvasWrapper" ng-class="{\'leftCollapsedCanvasWrapper\': paletteCollapsed,\'rightCollapsedCanvasWrapper\': propertiesCollapsed}"><div id="canvasHelpWrapper" class="col-xs-12"><div class="canvas-wrapper" id="canvasSection" ng-model="droppedElement" data-drop="true" data-jqyoui-options="" jqyoui-droppable="{onDrop:\'dropCallback\',onOver: \'overCallback\', onOut: \'outCallback\'}"><div class="canvas-message" id="model-modified-date"></div><div class="Oryx_button" id="delete-button" title="{{\'BUTTON.ACTION.DELETE.TOOLTIP\' | translate}}" ng-click="deleteShape()" style="display:none"><img src="images/delete.png"></div><div class="Oryx_button" id="morph-button" title="{{\'BUTTON.ACTION.MORPH.TOOLTIP\' | translate}}" ng-click="morphShape()" style="display:none"><img src="images/wrench.png"></div><div class="Oryx_button" id="edit-button" style="display:none" ng-click="editShape()"><img src="images/pencil.png"></div><div class="Oryx_button" ng-repeat="item in quickMenuItems" id="{{item.id}}" title="{{item.description}}" ng-click="quickAddItem(item.id)" ng-model="draggedElement" data-drag="true" jqyoui-draggable="{onStart:\'startDragCallbackQuickMenu\', onDrag:\'dragCallbackQuickMenu\'}" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\', opacity : 0.5}" style="display:none"><img ng-src="stencilsets/bpmn2.0/icons/{{item.icon}}"></div></div></div></div></div></div></div>'),e.put("views/partials/process-tree-list.html",'<div ng-click="showSubProcess(child)" class="process-treeview-list-item" ng-class="{\'current-process\': child.current}"><img ng-src="stencilsets/bpmn2.0/icons/activity/{{child.icon}}" width="16px;" height="16px;"> {{child.name}} <img ng-show="!child.current && child.type === \'CollapsedSubProcess\'" ng-src="images/pencil.png" class="pull-right" ng-click="edit(child.id)"></div><ul ng-if="child.children" class="process-treeview-list"><li ng-repeat="child in child.children" ng-include="\'views/partials/process-tree-list.html\'"></li></ul>'),e.put("views/partials/root-stencil-item-template.html",'<span class="stencil-item root-stencil-item" id="{{group.id}}" title="{{group.description | translate}}" ng-model="draggedElement" data-drag="true" jqyoui-draggable="{onStart:\'startDragCallback\', onDrag:\'dragCallback\'}" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\', opacity : 0.5}"><img ng-if="!group.customIcon" ng-src="stencilsets/bpmn2.0/icons/{{group.icon}}" width="16px;" height="16px;"> <img ng-if="group.customIcon" ng-src="{{config.contextRoot}}/app/rest/image/{{group.icon}}" width="16px;" height="16px;"> {{group.name | translate}}</span>'),e.put("views/partials/stencil-item-template.html",'<span ng-click="group.expanded = !group.expanded"><i class="glyphicon" ng-class="{\'glyphicon-chevron-right\': !group.expanded, \'glyphicon-chevron-down\': group.expanded}"></i> {{group.name | translate}}</span><ul ng-repeat="group in group.groups" class="stencil-group stencil-group-non-root" ng-class="{collapsed: !group.expanded, \'first\': $first}" ng-include="\'views/partials/stencil-item-template.html\'"></ul><ul><li ng-repeat="item in group.paletteItems" class="stencil-item" id="{{item.id}}" title="{{item.description | translate}}" ng-model="draggedElement" data-drag="true" jqyoui-draggable="{onStart:\'startDragCallback\', onDrag:\'dragCallback\'}" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\', opacity : 0.5}"><img ng-if="!item.customIcon" ng-src="stencilsets/bpmn2.0/icons/{{item.icon}}" width="16px;" height="16px;"> <img ng-if="item.customIcon" ng-src="{{config.contextRoot}}/app/rest/image/{{item.icon}}" width="16px;" height="16px;"> {{item.name | translate}}</li></ul>'),e.put("views/popups/define-data.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h3>Data definition</h3></div><div class="kis-modal-body"><div class="row-fluid"><div class="span6"><div class="kis-listener-grid" ui-grid="gridOptions"></div><div class="pull-right"><div class="btn-group"><a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="{{\'ACTION.MOVE.UP\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveDataItemUp()"><i class="icon-arrow-up"></i></a> <a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="{{\'ACTION.MOVE.DOWN\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveDataItemDown()"><i class="icon-arrow-down"></i></a></div><div class="btn-group"><a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="{{\'ACTION.ADD\' | translate:property}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewDataItem()"><i class="icon-plus"></i></a> <a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="{{\'ACTION.REMOVE\' | translate:property}}" data-placement="bottom" data-original-title="" title="" ng-click="removeDataItem()"><i class="icon-minus"></i></a></div></div></div><div class="span6"><div ng-show="selectedDataItems.length > 0"><table><tr><td class="form-property-label">Name</td><td><input type="text" ng-model="selectedDataItems[0].name" placeholder="Fill-in a name"></td></tr><tr><td class="form-property-label">Value</td><td><input type="text" ng-model="selectedDataItems[0].value" placeholder="Fill-in a value"></td></tr></table></div><div ng-show="selectedDataItems.length == 0" class="muted no-property-selected">No data item selected</div></div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div>'),e.put("views/popups/icon-template.html",'<div class="ui-grid-cell-contents"><img ng-if="!row.entity.customIcon" ng-src="stencilsets/bpmn2.0/icons/{{row.entity.icon}}"> <img ng-if="row.entity.customIcon" ng-src="{{config.contextRoot}}/app/rest/image/{{row.entity.icon}}"></div>'),e.put("views/popups/save-model.html",'<div class="modal" ng-controller="SaveModelCtrl"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h2>{{\'MODEL.SAVE.TITLE\' | translate}}</h2></div><div class="modal-body"><div ng-if="saveDialog.errorMessage && saveDialog.errorMessage.length > 0" class="alert error" style="font-size: 14px; margin-top:20px"><div class="popup-error" style="font-size: 14px"><span class="glyphicon glyphicon-remove-circle"></span> <span>{{saveDialog.errorMessage}}</span></div></div><div class="form-group"><label for="nameField">{{\'MODEL.NAME\' | translate}}</label> <input type="text" ng-disabled="status.loading || (error && error.conflictResolveAction == \'saveAs\')" id="nameField" class="form-control" ng-model="saveDialog.name" auto-focus=""></div><div class="form-group"><label for="keyField">{{\'MODEL.KEY\' | translate}}</label> <input type="text" ng-disabled="status.loading || (error && error.conflictResolveAction == \'saveAs\')" id="keyField" class="form-control" ng-model="saveDialog.key"></div><div class="form-group"><label for="docTextArea">{{\'MODEL.DESCRIPTION\' | translate}}</label> <textarea id="docTextArea" ng-disabled="status.loading" class="form-control" ng-model="saveDialog.description"></textarea></div><div class="checkbox" ng-show="!error && !error.isConflict"><label><input type="checkbox" ng-disabled="status.loading" ng-model="saveDialog.newVersion"> {{\'MODEL.SAVE.NEWVERSION\' | translate}}</label></div><div ng-if="saveDialog.validationErrors" class="alert error" style="font-size: 14px; margin-top:20px"><div class="popup-error" style="font-size: 14px"><span class="glyphicon glyphicon-remove-circle"></span> <span>{{\'MODEL.VALIDATIONERRORS\' | translate:error}}</span></div></div><div ng-if="error && error.isConflict && !status.loading" class="alert error" style="font-size: 14px; margin-top:20px"><div class="popup-error" style="font-size: 14px"><span class="glyphicon glyphicon-remove-circle"></span> <span>{{\'MODEL.CONFLICT.WRITE\' | translate:error}}</span></div><div><div style="font-size: 14px; margin-bottom: 10px">{{\'MODEL.CONFLICT.WRITE.OPTIONS\' | translate}}</div><div class="btn-group" data-toggle="buttons"><label class="btn btn-danger" ng-click="error.conflictResolveAction = \'overwrite\'"><input type="radio" name="options" id="option1"> {{\'MODEL.CONFLICT.WRITE.OPTION.OVERWRITE\' | translate}}</label> <label class="btn btn-danger" ng-click="error.conflictResolveAction = \'discardChanges\'"><input type="radio" name="options" id="option2"> {{\'MODEL.CONFLICT.WRITE.OPTION.DISCARDCHANGES\' | translate}}</label> <label class="btn btn-danger" ng-click="error.conflictResolveAction = \'saveAs\'"><input type="radio" name="options" id="option3" ng-disabled="account.type != \'enterprise\'"> {{\'MODEL.CONFLICT.WRITE.OPTION.SAVEAS\' | translate}}</label> <label class="btn btn-danger" ng-click="error.conflictResolveAction = \'newVersion\'"><input type="radio" name="options" id="optio43"> {{\'MODEL.CONFLICT.WRITE.OPTION.NEWVERSION\' | translate}}</label></div><div ng-if="error.conflictResolveAction == \'saveAs\'" style="margin-top: 10px"><span>{{\'MODEL.CONFLICT.SAVEAS\' | translate}}</span> <input type="text" ng-model="error.saveAs" style="width: 300px" auto-focus=""></div></div></div></div><div class="modal-footer"><div class="pull-right"><button type="button" class="btn" ng-click="close()" ng-disabled="status.loading" translate="">ACTION.CANCEL</button> <button class="btn btn-primary" ng-click="saveAndClose()" ng-disabled="status.loading || saveDialog.name.length == 0 || saveDialog.key.length == 0" ng-show="!error && !error.isConflict" translate="">ACTION.SAVE-AND-CLOSE</button> <button class="btn btn-primary" ng-click="save()" ng-disabled="status.loading || saveDialog.name.length == 0 || saveDialog.key.length == 0" ng-show="!error && !error.isConflict" translate="">ACTION.SAVE</button> <button class="btn btn-primary" ng-click="okClicked()" ng-disabled="isOkButtonDisabled()" ng-show="error && error.isConflict" translate="">ACTION.OK</button></div><div class="pull-right popup-error" ng-if="error && !error.isConflict"><span>{{\'MODEL.SAVE.ERROR\' | translate}}</span></div><loading></loading></div></div></div></div>'),e.put("views/popups/select-shape.html",'<div class="modal" ng-controller="FlowableBpmShapeSelectionCtrl"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>Change shape to:</h2></div><div class="modal-body"><div ng-if="gridOptions" class="kis-listener-grid" ui-grid="gridOptions" ui-grid-selection=""></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="select()" class="btn btn-primary" translate="">ACTION.SELECT</button></div></div></div></div>'),e.put("views/popups/unsaved-changes.html",'<div class="modal" ng-controller="EditorUnsavedChangesPopupCtrl"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h2 translate="EDITOR.POPUP.UNSAVED-CHANGES.TITLE"></h2></div><div class="modal-body"><p translate="EDITOR.POPUP.UNSAVED-CHANGES.DESCRIPTION"></p></div><div class="modal-footer"><div class="pull-right"><button class="btn btn-danger" ng-click="discard()" translate="EDITOR.POPUP.UNSAVED-CHANGES.ACTION.DISCARD"></button> <button class="btn btn-success" ng-click="save()" ng-show="{{yesNoCancel}}" translate="EDITOR.POPUP.UNSAVED-CHANGES.ACTION.SAVE"></button> <button class="btn btn-default" ng-click="cancel()" translate="EDITOR.POPUP.UNSAVED-CHANGES.ACTION.CONTINUE"></button></div><div class="loading pull-right" ng-show="loading"><div class="l1"></div><div class="l2"></div><div class="l2"></div></div></div></div></div></div>'),e.put("views/popups/validate-model.html",'<div class="modal" tabindex="-1" role="dialog" ng-controller="ValidateModelCtrl"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h2>{{\'MODEL.VALIDATE.TITLE\' | translate}}</h2></div><div class="modal-body"><div><div class="alert alert-success" role="alert" ng-show="model.errors.length == 0 && !status.loading">No errors detected.</div><div ng-show="errorGrid && !status.loading" class="validationGrid" ui-grid="errorGrid" ui-grid-selection=""></div></div></div><div class="modal-footer"><button type="button" ng-disabled="status.loading" class="btn btn-primary" ng-click="$hide()">Close</button></div></div></div></div>'),e.put("views/properties/assignment-display-template.html","<span ng-if=\"property.value.assignment.type != 'idm' && property.value.assignment.assignee\">{{'PROPERTY.ASSIGNMENT.ASSIGNEE_DISPLAY' | translate:property.value.assignment }}</span> <span ng-if=\"property.value.assignment.type != 'idm' && property.value.assignment.candidateUsers.length > 0\">{{'PROPERTY.ASSIGNMENT.CANDIDATE_USERS_DISPLAY' | translate:property.value.assignment.candidateUsers}}</span> <span ng-if=\"property.value.assignment.type != 'idm' && property.value.assignment.candidateGroups.length > 0\">{{'PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS_DISPLAY' | translate:property.value.assignment.candidateGroups}}</span><span ng-if=\"property.value.assignment.type == 'idm' && property.value.assignment.idm.assignee && property.value.assignment.idm.assignee.id\">{{property.value.assignment.idm.assignee.name}}</span> <span ng-if=\"property.value.assignment.type == 'idm' && property.value.assignment.idm.assignee && !property.value.assignment.idm.assignee.id\">{{'PROPERTY.ASSIGNMENT.USER_IDM_EMAIL_DISPLAY' | translate:property.value.assignment.idm.assignee }}</span> <span ng-if=\"property.value.assignment.type == 'idm' && property.value.assignment.idm.assigneeField && property.value.assignment.idm.assigneeField.id\">{{'PROPERTY.ASSIGNMENT.USER_IDM_FIELD_DISPLAY' | translate:property.value.assignment.idm.assigneeField }}</span> <span ng-if=\"property.value.assignment.type == 'idm' && property.value.assignment.idm.candidateUsers && property.value.assignment.idm.candidateUsers.length > 0 && (!property.value.assignment.idm.candidateUserFields || property.value.assignment.idm.candidateUserFields.length === 0)\">{{'PROPERTY.ASSIGNMENT.CANDIDATE_USERS_DISPLAY' | translate:property.value.assignment.idm.candidateUsers}}</span> <span ng-if=\"property.value.assignment.type == 'idm' && property.value.assignment.idm.candidateGroups && property.value.assignment.idm.candidateGroups.length > 0 && (!property.value.assignment.idm.candidateGroupFields || property.value.assignment.idm.candidateGroupFields.length === 0)\">{{'PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS_DISPLAY' | translate:property.value.assignment.idm.candidateGroups}}</span> <span ng-if=\"property.value.assignment.type == 'idm' && property.value.assignment.idm.candidateUserFields && property.value.assignment.idm.candidateUserFields.length > 0 && (!property.value.assignment.idm.candidateUsers || property.value.assignment.idm.candidateUsers.length === 0)\">{{'PROPERTY.ASSIGNMENT.CANDIDATE_USERS_DISPLAY' | translate:property.value.assignment.idm.candidateUserFields}}</span> <span ng-if=\"property.value.assignment.type == 'idm' && property.value.assignment.idm.candidateGroupFields && property.value.assignment.idm.candidateGroupFields.length > 0 && (!property.value.assignment.idm.candidateGroups || property.value.assignment.idm.candidateGroups.length === 0)\">{{'PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS_DISPLAY' | translate:property.value.assignment.idm.candidateGroupFields}}</span> <span ng-if=\"property.value.assignment.type == 'idm' && property.value.assignment.idm.candidateUserFields && property.value.assignment.idm.candidateUserFields.length > 0 && property.value.assignment.idm.candidateUsers && property.value.assignment.idm.candidateUsers.length > 0\">{{'PROPERTY.ASSIGNMENT.CANDIDATE_USERS_DISPLAY' | translate:property.value.assignment.idm.candidateUserFields.concat(property.value.assignment.idm.candidateUsers)}}</span> <span ng-if=\"property.value.assignment.type == 'idm' && property.value.assignment.idm.candidateGroupFields && property.value.assignment.idm.candidateGroupFields.length > 0 && property.value.assignment.idm.candidateGroups && property.value.assignment.idm.candidateGroups.length > 0\">{{'PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS_DISPLAY' | translate:property.value.assignment.idm.candidateGroupFields.concat(property.value.assignment.idm.candidateGroups)}}</span> <span ng-if=\"property.value.assignment.type != 'idm' && !property.value.assignment.assignee && (!property.value.assignment.candidateUsers || property.value.assignment.candidateUsers.length == 0) && (!property.value.assignment.candidateGroups || property.value.assignment.candidateGroups.length == 0)\" translate=\"\">PROPERTY.ASSIGNMENT.EMPTY</span><span ng-if=\"property.value.assignment.type == 'idm' && !property.value.assignment.idm.assignee && !property.value.assignment.idm.assigneeField && (!property.value.assignment.idm.candidateUsers || property.value.assignment.idm.candidateUsers.length == 0) && (!property.value.assignment.idm.candidateUserFields || property.value.assignment.idm.candidateUserFields.length == 0) && (!property.value.assignment.idm.candidateGroups || property.value.assignment.idm.candidateGroups.length == 0) && (!property.value.assignment.idm.candidateGroupFields || property.value.assignment.idm.candidateGroupFields.length == 0)\" translate=\"\">PROPERTY.ASSIGNMENT.IDM_EMPTY</span>"),e.put("views/properties/assignment-display-template1.html","<div ng-controller=\"FlowableAssignmentPopupCtrl2\"><span ng-if=\"property.value.assignment.type != 'idm' && property.value.assignment.assignee\">{{'PROPERTY.ASSIGNMENT.ASSIGNEE_DISPLAY' | translate:property.value.assignment }}</span> <span ng-if=\"property.value.assignment.type != 'idm' && property.value.assignment.candidateUsers.length > 0\">{{'PROPERTY.ASSIGNMENT.CANDIDATE_USERS_DISPLAY' | translate:property.value.assignment.candidateUsers}}</span> <span ng-if=\"property.value.assignment.type != 'idm' && property.value.assignment.candidateGroups.length > 0\">{{'PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS_DISPLAY' | translate:property.value.assignment.candidateGroups}}</span><span ng-if=\"property.value.assignment.type != 'idm' && !property.value.assignment.assignee && (!property.value.assignment.candidateUsers || property.value.assignment.candidateUsers.length == 0) && (!property.value.assignment.candidateGroups || property.value.assignment.candidateGroups.length == 0)\" translate=\"\">PROPERTY.ASSIGNMENT.EMPTY</span><span ng-if=\"property.value.assignment.type == 'idm' && !property.value.assignment.idm.assignee && !property.value.assignment.idm.assigneeField && (!property.value.assignment.idm.candidateUsers || property.value.assignment.idm.candidateUsers.length == 0) && (!property.value.assignment.idm.candidateUserFields || property.value.assignment.idm.candidateUserFields.length == 0) && (!property.value.assignment.idm.candidateGroups || property.value.assignment.idm.candidateGroups.length == 0) && (!property.value.assignment.idm.candidateGroupFields || property.value.assignment.idm.candidateGroupFields.length == 0)\" translate=\"\">PROPERTY.ASSIGNMENT.IDM_EMPTY</span></div>"),e.put("views/properties/assignment-display-template2.html",'<div ng-controller="FlowableAssignmentPopupCtrl4"><span ng-if="init.assignment.type != \'idm\' && init.assignment.candidateUsers.length > 0">{{\'PROPERTY.ASSIGNMENT.CANDIREAD_USERS_DISPLAY\' | translate:init.assignment.candidateUsers}}</span><span ng-if="property.value.assignment.type != \'idm\' && (init.assignment.candidateUsers.length == 0)" translate="">PROPERTY.ASSIGNMENT.EMPTY</span><span ng-if="property.value.assignment.type == \'idm\' && !property.value.assignment.idm.assignee && !property.value.assignment.idm.assigneeField && (!property.value.assignment.idm.candidateUsers || property.value.assignment.idm.candidateUsers.length == 0) && (!property.value.assignment.idm.candidateUserFields || property.value.assignment.idm.candidateUserFields.length == 0) && (!property.value.assignment.idm.candidateGroups || property.value.assignment.idm.candidateGroups.length == 0) && (!property.value.assignment.idm.candidateGroupFields || property.value.assignment.idm.candidateGroupFields.length == 0)" translate="">PROPERTY.ASSIGNMENT.IDM_EMPTY</span></div>'),e.put("views/properties/assignment-popup-gitcs.html",'<div class="modal" ng-controller="FlowableAssignmentPopupCtrl"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2 translate="">PROPERTY.ASSIGNMENT.TITLE</h2></div><div class="modal-body"><div class="detail-group clearfix"><div class="form-group clearfix"><div class="col-xs-12"><label class="col-xs-4">{{\'PROPERTY.ASSIGNMENT.TYPE\' | translate}}</label><div class="col-xs-8"><div class="btn-group btn-group-justified"><div class="btn-group"><button type="button" class="btn btn-default" ng-click="popup.assignmentObject.type = \'idm\'" ng-model="popup.assignmentObject.type" ng-class="{\'active\' : popup.assignmentObject.type == \'idm\'}">{{\'PROPERTY.ASSIGNMENT.TYPE.IDENTITYSTORE\' | translate}}</button></div><div class="btn-group"><button type="button" class="btn btn-default" ng-click="popup.assignmentObject.type = \'static\'" ng-model="popup.assignmentObject.type" ng-class="{\'active\' : popup.assignmentObject.type != \'idm\'}">{{\'PROPERTY.ASSIGNMENT.TYPE.STATIC\' | translate}}</button></div></div></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type != \'idm\'"><div class="col-xs-12"><label>{{\'PROPERTY.ASSIGNMENT.ASSIGNEE\' | translate}}</label></div><div class="col-xs-12"><input type="text" id="assigneeField" class="form-control" ng-model="popup.assignmentObject.static.assignee" placeholder="{{\'PROPERTY.ASSIGNMENT.ASSIGNEE_PLACEHOLDER\' | translate}}"></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type != \'idm\'"><div class="col-xs-12"><label>{{\'PROPERTY.ASSIGNMENT.CANDIDATE_USERS\' | translate}}</label></div><div class="col-xs-12" ng-repeat="candidateUser in popup.assignmentObject.static.candidateUsers"><input id="userField" class="form-control" type="text" ng-model="candidateUser.value"> <i ng-if="popup.assignmentObject.static.candidateUsers.length >1" class="glyphicon glyphicon-minus clickable-property" ng-click="removeCandidateUserValue($index)"></i> <i ng-if="$index == (popup.assignmentObject.static.candidateUsers.length - 1)" class="glyphicon glyphicon-plus clickable-property" ng-click="addCandidateUserValue($index)"></i></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type != \'idm\'"><div class="col-xs-12"><label>{{\'PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS\' | translate}}</label></div><div class="col-xs-12" ng-repeat="candidateGroup in popup.assignmentObject.static.candidateGroups"><input id="groupField" class="form-control" type="text" ng-model="candidateGroup.value"> <i ng-if="popup.assignmentObject.static.candidateGroups.length >1" class="glyphicon glyphicon-minus clickable-property" ng-click="removeCandidateGroupValue($index)"></i> <i ng-if="$index == (popup.assignmentObject.static.candidateGroups.length - 1)" class="glyphicon glyphicon-plus clickable-property" ng-click="addCandidateGroupValue($index)"></i></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type == \'idm\'"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROPERTY.ASSIGNMENT.IDM.TYPE\' | translate}}</label></div><div class="col-xs-8"><div class="btn-group span"><button class="selection" ng-options="option as (option.title | translate) for option in assignmentOptions" bs-select="" ng-model="assignmentOption" activiti-fix-dropdown-bug=""></button></div></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type == \'idm\' && assignmentOption.id == \'users\'"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROPERTY.ASSIGNMENT.CANDIDATE_USERS\' | translate}}</label></div><div class="col-xs-8 clearfix"><ul class="simple-list" ng-show="popup.assignmentObject.idm.candidateUsers.length || popup.assignmentObject.idm.candidateUserFields.length"><li ng-repeat="user in popup.assignmentObject.idm.candidateUsers"><i class="icon icon-user"></i> <span user-name="user"></span> {{user.name}}<div class="actions"><a ng-click="removeCandidateUser(user)"><i class="icon icon-remove"></i></a></div></li><li ng-repeat="userField in popup.assignmentObject.idm.candidateUserFields"><i class="icon icon-user"></i> <span>{{userField.name}}</span> <span class="field-type">- {{userFieldField.id}}</span><div class="actions"><a ng-click="removeCandidateUserField(userField)"><i class="icon icon-remove"></i></a></div></li></ul><div class="no-results" ng-if="(!popup.assignmentObject.idm.candidateUsers || !popup.assignmentObject.idm.candidateUsers.length) && (!popup.assignmentObject.idm.candidateUserFields || !popup.assignmentObject.idm.candidateUserFields.length)">{{\'PROPERTY.ASSIGNMENT.IDM.NO_CANDIDATE_USERS\' | translate}}</div></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type == \'idm\' && assignmentOption.id == \'groups\'"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS\' | translate}}</label></div><div class="col-xs-8 clearfix"><ul class="simple-list" ng-show="popup.assignmentObject.idm.candidateGroups.length || popup.assignmentObject.idm.candidateGroupFields.length"><li ng-repeat="group in popup.assignmentObject.idm.candidateGroups">{{group.name}}<div class="actions"><a ng-click="removeCandidateGroup(group)"><i class="icon icon-remove"></i></a></div></li><li ng-repeat="groupField in popup.assignmentObject.idm.candidateGroupFields">{{groupField.name}}<div class="actions"><a ng-click="removeCandidateGroupField(groupField)"><i class="icon icon-remove"></i></a></div></li></ul><div class="no-results" ng-if="(!popup.assignmentObject.idm.candidateGroups || !popup.assignmentObject.idm.candidateGroups.length) && (!popup.assignmentObject.idm.candidateGroupFields || !popup.assignmentObject.idm.candidateGroupFields.length)">{{\'PROPERTY.ASSIGNMENT.IDM.NO_CANDIDATE_GROUPS\' | translate}}</div></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type == \'idm\' && assignmentOption.id == \'user\'"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROPERTY.ASSIGNMENT.ASSIGNEE\' | translate}}</label></div><div class="col-xs-8"><label ng-if="!popup.assignmentObject.idm.assignee && !popup.assignmentObject.idm.assigneeField">None...</label><ul class="simple-list" ng-if="popup.assignmentObject.idm.assignee || popup.assignmentObject.idm.assigneeField"><li><i class="icon icon-user"></i><span ng-if="popup.assignmentObject.idm.assignee" user-name="popup.assignmentObject.idm.assignee.id">{{popup.assignmentObject.idm.assignee.name}}</span> <span ng-if="popup.assignmentObject.idm.assigneeField">{{popup.assignmentObject.idm.assigneeField.name}}</span> <span ng-if="popup.assignmentObject.idm.assigneeField" class="field-type">- {{popup.assignmentObject.idm.assigneeField.id}}</span><div class="actions" ng-if="popup.assignmentObject.idm.assignee || popup.assignmentObject.idm.assigneeField"><a ng-click="removeAssignee()"><i class="icon icon-remove"></i></a></div></li></ul></div></div></div><div class="form-group clearfix" ng-if="popup.assignmentObject.type == \'idm\' && (!popup.assignmentObject.assignmentSourceType || popup.assignmentObject.assignmentSourceType == \'search\') && (assignmentOption.id == \'user\' || assignmentOption.id == \'users\')"><div class="col-xs-12"><div class="col-xs-4"><label>Search:</label></div><div class="col-xs-8"><input class="form-control" type="text" id="people-select-input" placeholder="Search user" auto-focus="" custom-keys="" up-pressed="previousUser()" down-pressed="nextUser()" enter-pressed="confirmUser()" delayed-model="popup.filter" delay="200"></div></div><div class="col-xs-12"><div class="col-xs-4"><label></label></div><div class="col-xs-8"><div class="subtle" style="margin: 2px 0 2px 0"><span translate="PROPERTY.ASSIGNMENT.MATCHING"></span></div></div></div><div class="col-xs-12"><div class="col-xs-4"><label></label></div><div class="col-xs-8"><div class="inline-people-select"><ul class="simple-list"><li ng-click="confirmUser(user)" ng-repeat="user in popup.userResults" ng-class="{\'active\': $index == popup.selectedIndex}"><div user-picture="user" user-index="$index" user-name="user"></div>{{user.name}}</li></ul><div class="nothing-to-see" translate="GENERAL.MESSAGE.PEOPLE-NO-MATCHING-RESULTS" ng-show="popup.userResults.length == 0"></div></div></div></div><div class="form-group clearfix" ng-if="popup.assignmentObject.type == \'idm\' && (!popup.assignmentObject.assignmentSourceType || popup.assignmentObject.assignmentSourceType == \'search\') && ( assignmentOption.id == \'users\')"><div class="col-xs-12"><div class="col-xs-4">方式</div><div class="col-xs-4"><label><input type="radio" name="fs"> &nbsp;需全员通过</label></div><div class="col-xs-4"><label><input type="radio" name="fs"> &nbsp;只需一人通过</label></div></div></div></div><div class="form-group clearfix" ng-if="popup.assignmentObject.type == \'idm\' && (!popup.assignmentObject.assignmentSourceType || popup.assignmentObject.assignmentSourceType == \'search\') && assignmentOption.id == \'groups\'"><div class="col-xs-12"><div class="col-xs-4"><label>Search:</label></div><div class="col-xs-8"><input class="form-control" type="text" id="people-select-input" placeholder="Search group" auto-focus="" custom-keys="" up-pressed="previousGroup()" down-pressed="nextGroup()" enter-pressed="confirmGroup()" delayed-model="popup.groupFilter" delay="200"></div></div><div class="col-xs-12"><div class="col-xs-4"><label></label></div><div class="col-xs-8"><div class="subtle"><span translate="PROPERTY.ASSIGNMENT.MATCHING"></span></div></div></div><div class="col-xs-12"><div class="col-xs-4"><label></label></div><div class="col-xs-8"><div class="inline-people-select"><ul class="simple-list"><li ng-click="confirmGroup(group);" ng-repeat="group in popup.groupResults" ng-class="{\'active\': $index == popup.selectedGroupIndex}">{{group.name}}</li></ul><div class="nothing-to-see" translate="GENERAL.MESSAGE.GROUP-NO-MATCHING-RESULTS" ng-show="popup.groupResults.length == 0"></div></div></div></div><div class="form-group clearfix"><div class="col-xs-12"><div class="col-xs-4">方式</div><div class="col-xs-4"><label><input type="radio" name="fs"> &nbsp;需全员通过</label></div><div class="col-xs-4"><label><input type="radio" name="fs"> &nbsp;只需一人通过</label></div></div></div></div></div></div><div class="modal-footer"><button ng-click="close()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),
e.put("views/properties/assignment-popup.html",'<div class="modal" ng-controller="FlowableAssignmentPopupCtrl"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2 translate="">PROPERTY.ASSIGNMENT.TITLE</h2></div><div class="modal-body"><div class="detail-group clearfix"><div class="form-group clearfix"><div class="col-xs-12"><label class="col-xs-4">{{\'PROPERTY.ASSIGNMENT.TYPE\' | translate}}</label><div class="col-xs-8"><div class="btn-group btn-group-justified"><div class="btn-group"><button type="button" class="btn btn-default" ng-click="popup.assignmentObject.type = \'idm\'" ng-model="popup.assignmentObject.type" ng-class="{\'active\' : popup.assignmentObject.type == \'idm\'}">{{\'PROPERTY.ASSIGNMENT.TYPE.IDENTITYSTORE\' | translate}}</button></div><div class="btn-group"><button type="button" class="btn btn-default" ng-click="popup.assignmentObject.type = \'static\'" ng-model="popup.assignmentObject.type" ng-class="{\'active\' : popup.assignmentObject.type != \'idm\'}">{{\'PROPERTY.ASSIGNMENT.TYPE.STATIC\' | translate}}</button></div></div></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type != \'idm\'"><div class="col-xs-12"><label>{{\'PROPERTY.ASSIGNMENT.ASSIGNEE\' | translate}}</label></div><div class="col-xs-12"><input type="text" id="assigneeField" class="form-control" ng-model="popup.assignmentObject.static.assignee" placeholder="{{\'PROPERTY.ASSIGNMENT.ASSIGNEE_PLACEHOLDER\' | translate}}"></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type != \'idm\'"><div class="col-xs-12"><label>{{\'PROPERTY.ASSIGNMENT.CANDIDATE_USERS\' | translate}}</label></div><div class="col-xs-12" ng-repeat="candidateUser in popup.assignmentObject.static.candidateUsers"><select ng-model="candidateUser.value" class="form-control"><option ng-repeat="user in popup.userResults" ng-if="candidateUser.value==user.id" value="{{user.id}}" ng-selected="true">{{user.name}}</option><option ng-repeat="user in popup.userResults" value="{{user.id}}">{{user.name}}</option></select><i ng-if="popup.assignmentObject.static.candidateUsers.length >1" class="glyphicon glyphicon-minus clickable-property" ng-click="removeCandidateUserValue($index)"></i> <i ng-if="$index == (popup.assignmentObject.static.candidateUsers.length - 1)" class="glyphicon glyphicon-plus clickable-property" ng-click="addCandidateUserValue($index)"></i></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type != \'idm\'"><div class="col-xs-12"><label>{{\'PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS\' | translate}}</label></div><div class="col-xs-12" ng-repeat="candidateGroup in popup.assignmentObject.static.candidateGroups"><select ng-model="candidateGroup.value" class="form-control"><option ng-repeat="group in popup.groupResults" ng-if="candidateGroup.value==group.id" value="{{group.id}}" ng-selected="true">{{group.name}}</option><option ng-repeat="group in popup.groupResults" value="{{group.id}}">{{group.name}}</option></select><i ng-if="popup.assignmentObject.static.candidateGroups.length >1" class="glyphicon glyphicon-minus clickable-property" ng-click="removeCandidateGroupValue($index)"></i> <i ng-if="$index == (popup.assignmentObject.static.candidateGroups.length - 1)" class="glyphicon glyphicon-plus clickable-property" ng-click="addCandidateGroupValue($index)"></i></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type != \'idm\'"><div class="col-xs-12"><div class="col-xs-4">方式</div><div class="col-xs-4"><label><input type="radio" name="fs" value="" ng-model="popup.assignmentObject.fs"> &nbsp;只需一人通过</label></div><div class="col-xs-4"><label><input type="radio" name="fs" value="all" ng-model="popup.assignmentObject.fs"> &nbsp;需全员通过</label></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type == \'idm\'"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROPERTY.ASSIGNMENT.IDM.TYPE\' | translate}}</label></div><div class="col-xs-8"><div class="btn-group span"><button class="selection" ng-options="option as (option.title | translate) for option in assignmentOptions" bs-select="" ng-model="assignmentOption" activiti-fix-dropdown-bug=""></button></div></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type == \'idm\' && assignmentOption.id == \'users\'"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROPERTY.ASSIGNMENT.CANDIDATE_USERS\' | translate}}</label></div><div class="col-xs-8 clearfix"><ul class="simple-list" ng-show="popup.assignmentObject.idm.candidateUsers.length || popup.assignmentObject.idm.candidateUserFields.length"><li ng-repeat="user in popup.assignmentObject.idm.candidateUsers"><i class="icon icon-user"></i> <span user-name="user"></span> {{user.name}}<div class="actions"><a ng-click="removeCandidateUser(user)"><i class="icon icon-remove"></i></a></div></li><li ng-repeat="userField in popup.assignmentObject.idm.candidateUserFields"><i class="icon icon-user"></i> <span>{{userField.name}}</span> <span class="field-type">- {{userFieldField.id}}</span><div class="actions"><a ng-click="removeCandidateUserField(userField)"><i class="icon icon-remove"></i></a></div></li></ul><div class="no-results" ng-if="(!popup.assignmentObject.idm.candidateUsers || !popup.assignmentObject.idm.candidateUsers.length) && (!popup.assignmentObject.idm.candidateUserFields || !popup.assignmentObject.idm.candidateUserFields.length)">{{\'PROPERTY.ASSIGNMENT.IDM.NO_CANDIDATE_USERS\' | translate}}</div></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type == \'idm\' && assignmentOption.id == \'groups\'"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS\' | translate}}</label></div><div class="col-xs-8 clearfix"><ul class="simple-list" ng-show="popup.assignmentObject.idm.candidateGroups.length || popup.assignmentObject.idm.candidateGroupFields.length"><li ng-repeat="group in popup.assignmentObject.idm.candidateGroups">{{group.name}}<div class="actions"><a ng-click="removeCandidateGroup(group)"><i class="icon icon-remove"></i></a></div></li><li ng-repeat="groupField in popup.assignmentObject.idm.candidateGroupFields">{{groupField.name}}<div class="actions"><a ng-click="removeCandidateGroupField(groupField)"><i class="icon icon-remove"></i></a></div></li></ul><div class="no-results" ng-if="(!popup.assignmentObject.idm.candidateGroups || !popup.assignmentObject.idm.candidateGroups.length) && (!popup.assignmentObject.idm.candidateGroupFields || !popup.assignmentObject.idm.candidateGroupFields.length)">{{\'PROPERTY.ASSIGNMENT.IDM.NO_CANDIDATE_GROUPS\' | translate}}</div></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type == \'idm\' && assignmentOption.id == \'user\'"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROPERTY.ASSIGNMENT.ASSIGNEE\' | translate}}</label></div><div class="col-xs-8"><label ng-if="!popup.assignmentObject.idm.assignee && !popup.assignmentObject.idm.assigneeField">None...</label><ul class="simple-list" ng-if="popup.assignmentObject.idm.assignee || popup.assignmentObject.idm.assigneeField"><li><i class="icon icon-user"></i><span ng-if="popup.assignmentObject.idm.assignee" user-name="popup.assignmentObject.idm.assignee.id">{{popup.assignmentObject.idm.assignee.name}}</span> <span ng-if="popup.assignmentObject.idm.assigneeField">{{popup.assignmentObject.idm.assigneeField.name}}</span> <span ng-if="popup.assignmentObject.idm.assigneeField" class="field-type">- {{popup.assignmentObject.idm.assigneeField.id}}</span><div class="actions" ng-if="popup.assignmentObject.idm.assignee || popup.assignmentObject.idm.assigneeField"><a ng-click="removeAssignee()"><i class="icon icon-remove"></i></a></div></li></ul></div></div></div><div class="form-group clearfix" ng-if="popup.assignmentObject.type == \'idm\' && (!popup.assignmentObject.assignmentSourceType || popup.assignmentObject.assignmentSourceType == \'search\') && (assignmentOption.id == \'user\' || assignmentOption.id == \'users\')"><div class="col-xs-12"><div class="col-xs-4"><label>Search:</label></div><div class="col-xs-8"><input class="form-control" type="text" id="people-select-input" placeholder="Search user" auto-focus="" custom-keys="" up-pressed="previousUser()" down-pressed="nextUser()" enter-pressed="confirmUser()" delayed-model="popup.filter" delay="200"></div></div><div class="col-xs-12"><div class="col-xs-4"><label></label></div><div class="col-xs-8"><div class="subtle" style="margin: 2px 0 2px 0"><span translate="PROPERTY.ASSIGNMENT.MATCHING"></span></div></div></div><div class="col-xs-12"><div class="col-xs-4"><label></label></div><div class="col-xs-8"><div class="inline-people-select"><ul class="simple-list"><li ng-click="confirmUser(user)" ng-repeat="user in popup.userResults" ng-class="{\'active\': $index == popup.selectedIndex}"><div user-picture="user" user-index="$index" user-name="user"></div>{{user.name}}</li></ul><div class="nothing-to-see" translate="GENERAL.MESSAGE.PEOPLE-NO-MATCHING-RESULTS" ng-show="popup.userResults.length == 0"></div></div></div></div><div class="form-group clearfix" ng-if="popup.assignmentObject.type == \'idm\' && (!popup.assignmentObject.assignmentSourceType || popup.assignmentObject.assignmentSourceType == \'search\') && ( assignmentOption.id == \'users\')"><div class="col-xs-12"><div class="col-xs-4">方式</div><div class="col-xs-4"><label><input type="radio" name="fs" value="" ng-model="popup.assignmentObject.fs"> &nbsp;只需一人通过</label></div><div class="col-xs-4"><label><input type="radio" name="fs" value="all" ng-model="popup.assignmentObject.fs"> &nbsp;需全员通过</label></div></div></div></div><div class="form-group clearfix" ng-if="popup.assignmentObject.type == \'idm\' && (!popup.assignmentObject.assignmentSourceType || popup.assignmentObject.assignmentSourceType == \'search\') && assignmentOption.id == \'groups\'"><div class="col-xs-12"><div class="col-xs-4"><label>Search:</label></div><div class="col-xs-8"><input class="form-control" type="text" id="people-select-input" placeholder="Search group" auto-focus="" custom-keys="" up-pressed="previousGroup()" down-pressed="nextGroup()" enter-pressed="confirmGroup()" delayed-model="popup.groupFilter" delay="200"></div></div><div class="col-xs-12"><div class="col-xs-4"><label></label></div><div class="col-xs-8"><div class="subtle"><span translate="PROPERTY.ASSIGNMENT.MATCHING"></span></div></div></div><div class="col-xs-12"><div class="col-xs-4"><label></label></div><div class="col-xs-8"><div class="inline-people-select"><ul class="simple-list"><li ng-click="confirmGroup(group);" ng-repeat="group in popup.groupResults" ng-class="{\'active\': $index == popup.selectedGroupIndex}">{{group.name}}</li></ul><div class="nothing-to-see" translate="GENERAL.MESSAGE.GROUP-NO-MATCHING-RESULTS" ng-show="popup.groupResults.length == 0"></div></div></div></div><div class="form-group clearfix"><div class="col-xs-12"><div class="col-xs-4">方式</div><div class="col-xs-4"><label><input type="radio" mg="fs"> &nbsp;需全员通过</label></div><div class="col-xs-4"><label><input type="radio" name="fs"> &nbsp;只需一人通过</label></div></div></div></div></div></div><div class="modal-footer"><button ng-click="close()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/assignment-popup1.html",'<div class="modal" ng-controller="FlowableAssignmentPopupCtrl1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2 translate="">PROPERTY.ASSIGNMENT.TITLE</h2></div><div class="modal-body"><div class="detail-group clearfix"><div class="form-group clearfix"><div class="col-xs-12"><label class="col-xs-4">{{\'PROPERTY.ASSIGNMENT.TYPE\' | translate}}</label><div class="col-xs-8"><div class="btn-group btn-group-justified"><div class="btn-group"><button type="button" class="btn btn-default" ng-click="popup.assignmentObject.type = \'static\'" ng-model="popup.assignmentObject.type" ng-class="{\'active\' : popup.assignmentObject.type != \'idm\'}">{{\'PROPERTY.ASSIGNMENT.TYPE.STATIC\' | translate}}</button></div></div></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type != \'idm\'"><div class="col-xs-12"><label>{{\'PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS\' | translate}}</label></div><div class="col-xs-12" ng-repeat="candidateGroup in popup.assignmentObject.static.candidateGroups"><select ng-model="candidateGroup.value" class="form-control"><option ng-repeat="group in popup.groupResults" ng-if="candidateGroup.value==group.id" value="{{group.id}}" ng-selected="true">{{group.name}}</option><option ng-repeat="group in popup.groupResults" value="{{group.id}}">{{group.name}}</option></select><i ng-if="popup.assignmentObject.static.candidateGroups.length >1" class="glyphicon glyphicon-minus clickable-property" ng-click="removeCandidateGroupValue($index)"></i> <i ng-if="$index == (popup.assignmentObject.static.candidateGroups.length - 1)" class="glyphicon glyphicon-plus clickable-property" ng-click="addCandidateGroupValue($index)"></i></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type == \'idm\'"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROPERTY.ASSIGNMENT.IDM.TYPE\' | translate}}</label></div><div class="col-xs-8"><div class="btn-group span"><button class="selection" ng-options="option as (option.title | translate) for option in assignmentOptions" bs-select="" ng-model="assignmentOption" activiti-fix-dropdown-bug=""></button></div></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type == \'idm\' && assignmentOption.id == \'groups\'"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROPERTY.ASSIGNMENT.CANDIDATE_GROUPS\' | translate}}</label></div><div class="col-xs-8 clearfix"><ul class="simple-list" ng-show="popup.assignmentObject.idm.candidateGroups.length || popup.assignmentObject.idm.candidateGroupFields.length"><li ng-repeat="group in popup.assignmentObject.idm.candidateGroups">{{group.name}}<div class="actions"><a ng-click="removeCandidateGroup(group)"><i class="icon icon-remove"></i></a></div></li><li ng-repeat="groupField in popup.assignmentObject.idm.candidateGroupFields">{{groupField.name}}<div class="actions"><a ng-click="removeCandidateGroupField(groupField)"><i class="icon icon-remove"></i></a></div></li></ul><div class="no-results" ng-if="(!popup.assignmentObject.idm.candidateGroups || !popup.assignmentObject.idm.candidateGroups.length) && (!popup.assignmentObject.idm.candidateGroupFields || !popup.assignmentObject.idm.candidateGroupFields.length)">{{\'PROPERTY.ASSIGNMENT.IDM.NO_CANDIDATE_GROUPS\' | translate}}</div></div></div></div><div class="form-group clearfix" ng-if="popup.assignmentObject.type == \'idm\' && (!popup.assignmentObject.assignmentSourceType || popup.assignmentObject.assignmentSourceType == \'search\') && assignmentOption.id == \'groups\'"><div class="col-xs-12"><div class="col-xs-4"><label>Search:</label></div><div class="col-xs-8"><input class="form-control" type="text" id="people-select-input" placeholder="Search group" auto-focus="" custom-keys="" up-pressed="previousGroup()" down-pressed="nextGroup()" enter-pressed="confirmGroup()" delayed-model="popup.groupFilter" delay="200"></div></div><div class="col-xs-12"><div class="col-xs-4"><label></label></div><div class="col-xs-8"><div class="subtle"><span translate="PROPERTY.ASSIGNMENT.MATCHING"></span></div></div></div><div class="col-xs-12"><div class="col-xs-4"><label></label></div><div class="col-xs-8"><div class="inline-people-select"><ul class="simple-list"><li ng-click="confirmGroup(group);" ng-repeat="group in popup.groupResults" ng-class="{\'active\': $index == popup.selectedGroupIndex}">{{group.name}}</li></ul><div class="nothing-to-see" translate="GENERAL.MESSAGE.GROUP-NO-MATCHING-RESULTS" ng-show="popup.groupResults.length == 0"></div></div></div></div></div></div></div><div class="modal-footer"><button ng-click="close()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/assignment-popup2.html",'<div class="modal" ng-controller="FlowableAssignmentPopupCtrl3"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2 translate="">PROPERTY.ASSIGNMENT.TITLE</h2></div><div class="modal-body"><div class="detail-group clearfix"><div class="form-group clearfix"><div class="col-xs-12"><label class="col-xs-4">{{\'PROPERTY.ASSIGNMENT.TYPE\' | translate}}</label><div class="col-xs-8"><div class="btn-group btn-group-justified"><div class="btn-group"><button type="button" class="btn btn-default" ng-click="popup.assignmentObject.type = \'static\'" ng-model="popup.assignmentObject.type" ng-class="{\'active\' : popup.assignmentObject.type != \'idm\'}">{{\'PROPERTY.ASSIGNMENT.TYPE.STATIC\' | translate}}</button></div></div></div></div></div><div class="form-group clearfix" ng-show="popup.assignmentObject.type != \'idm\'"><div class="col-xs-12"><label>可阅人:</label></div><div class="col-xs-12" ng-repeat="candidateUser in popup.assignmentObject.static.candidateUsers"><select ng-model="candidateUser.value" class="form-control"><option ng-repeat="user in popup.userResults" ng-if="candidateUser.value==user.id" value="{{user.id}}" ng-selected="true">{{user.name}}</option><option ng-repeat="user in popup.userResults" value="{{user.id}}">{{user.name}}</option></select><i ng-if="popup.assignmentObject.static.candidateUsers.length >1" class="glyphicon glyphicon-minus clickable-property" ng-click="removeCandidateUserValue($index)"></i> <i ng-if="$index == (popup.assignmentObject.static.candidateUsers.length - 1)" class="glyphicon glyphicon-plus clickable-property" ng-click="addCandidateUserValue($index)"></i></div></div></div></div><div class="modal-footer"><button ng-click="close()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/assignment-write-template.html",'<span ng-controller="FlowableAssignmentCtrl"></span>'),e.put("views/properties/assignment-write-template1.html",'<span ng-controller="FlowableAssignmentCtrl1"></span>'),e.put("views/properties/assignment-write-template2.html",'<span ng-controller="FlowableAssignmentCtrl2"></span>'),e.put("views/properties/boolean-property-template.html",'<div ng-controller="FlowableBooleanPropertyCtrl"><input type="checkbox" ng-model="property.value" ng-change="changeValue()"></div>'),e.put("views/properties/condition-expression-display-template.html",'<span ng-if="property.value.expression.type != \'variables\' && property.value.expression.staticValue">{{property.value.expression.staticValue|limitTo:20}}</span> <span ng-if="property.value && !property.value.expression">{{property.value|limitTo:20}}</span> <span ng-if="!property.value">{{\'PROPERTY.SEQUENCEFLOW.CONDITION.NO-CONDITION-DISPLAY\' | translate}}</span>'),e.put("views/properties/condition-expression-popup.html",'<div class="modal" ng-controller="FlowableConditionExpressionPopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2 translate="">PROPERTY.SEQUENCEFLOW.CONDITION.TITLE</h2></div><div class="modal-body"><div class="detail-group clearfix"><div class="col-xs-12"><label class="col-xs-3">{{\'PROPERTY.SEQUENCEFLOW.CONDITION.STATIC\' | translate}}</label><div class="col-xs-9"><select class="form-control" ng-model="expression.staticValue"><option value=""></option><option value=\'${submitType == "y"|| submitType == "Y"}\'>通过</option><option value=\'${submitType == "n"|| submitType == "N"}\'>不通过</option></select></div></div></div><div class="modal-footer"><button ng-click="close()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div></div>'),e.put("views/properties/condition-expression-write-template.html",'<span ng-controller="FlowableConditionExpressionCtrl"></span>'),e.put("views/properties/decisiontable-reference-display-template.html",'<span ng-if="property.value.name">{{property.value.name}}</span> <span ng-if="!property.value || !property.value.name" translate="">PROPERTY.DECISIONTABLEREFERENCE.EMPTY</span>'),e.put("views/properties/decisiontable-reference-popup.html",'<div class="modal" ng-controller="FlowableDecisionTableReferencePopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header" ng-if="popup.state == \'decisionTableReference\'"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>{{\'PROPERTY.DECISIONTABLEREFERENCE.TITLE\' | translate}} <span ng-show="selectedDecisionTable != null">- {{selectedDecisionTable.name}}</span> <span ng-show="selectedDecisionTable == null">- {{\'PROPERTY.DECISIONTABLEREFERENCE.EMPTY\' | translate}}</span></h2></div><div class="modal-header" ng-if="popup.state == \'newDecisionTable\'"><h2>{{\'DECISION-TABLE.POPUP.CREATE-TITLE\' | translate}}</h2></div><div class="modal-body-with-overflow" ng-if="popup.state == \'decisionTableReference\'"><div class="detail-group clearfix"><div class="col-xs-12"><div class="alert alert-error" ng-show="!state.loadingDecisionTables && state.decisionTableError" translate="">PROPERTY.DECISIONTABLEREFERENCE.ERROR.FORM</div></div></div><div class="detail-group clearfix"><div class="col-xs-12 editor-item-picker"><div ng-if="!state.loadingDecisionTables && !state.decisionTableError" class="col-xs-4 editor-item-picker-component" ng-repeat="decisionTable in decisionTables" ng-class="{\'selected\' : decisionTable.decisionTableId == selectedDecisionTable.decisionTableId}" ng-click="selectDecisionTable(decisionTable, $event)"><div class="controls"><input type="checkbox" value="option1" ng-click="selectDecisionTable(decisionTable, $event)" ng-checked="decisionTable.id == selectedDecisionTable.id"></div><h4>{{decisionTable.name}}</h4><img ng-src="{{config.contextRoot}}/app/rest/models/{{decisionTable.id}}/thumbnail"></div><div ng-show="state.loadingDecisionTables"><p class="loading" translate="">PROPERTY.DECISIONTABLEREFERENCE.DECISIONTABLE.LOADING</p></div><div ng-show="!state.loadingDecisionTables && decisionTables.length == 0"><p translate="">PROPERTY.DECISIONTABLEREFERENCE.DECISIONTABLE.EMPTY</p></div></div></div></div><div class="modal-body" ng-if="popup.state == \'newDecisionTable\'"><p>{{\'DECISION-TABLE.POPUP.CREATE-DESCRIPTION\' | translate}}</p><div ng-if="model.errorMessage && model.errorMessage.length > 0" class="alert error" style="font-size: 14px; margin-top:20px"><div class="popup-error" style="font-size: 14px"><span class="glyphicon glyphicon-remove-circle"></span> <span>{{model.errorMessage}}</span></div></div><div class="form-group"><label for="newDecisionTableName">{{\'DECISION-TABLE.NAME\' | translate}}</label> <input ng-disabled="model.loading" type="text" class="form-control" id="newDecisionTableName" ng-model="model.decisionTable.name" custom-keys="" enter-pressed="ok()" auto-focus="" editor-input-check=""></div><div class="form-group"><label for="newDecisionTableKey">{{\'DECISION-TABLE.KEY\' | translate}}</label> <input ng-disabled="model.loading" type="text" class="form-control" id="newDecisionTableKey" ng-model="model.decisionTable.key" editor-input-check=""></div><div class="form-group"><label for="newDecisionTableDescription">{{\'DECISION-TABLE.DESCRIPTION\' | translate}}</label> <textarea ng-disabled="model.loading" class="form-control" id="newDecisionTableDescription" rows="5" ng-model="model.decisionTable.description"></textarea></div></div><div class="modal-footer" ng-if="popup.state == \'decisionTableReference\'"><button ng-click="cancel()" class="btn btn-primary" translate="">GENERAL.ACTION.CANCEL</button> <button ng-disabled="state.decisionTableError" ng-click="newDecisionTable()" class="btn btn-primary" translate="">GENERAL.ACTION.NEW-DECISION-TABLE</button> <button ng-disabled="!selectedDecisionTable || state.decisionTableError" ng-click="open()" class="btn btn-primary" translate="">GENERAL.ACTION.OPEN</button> <button ng-disabled="state.decisionTableError" ng-click="save()" class="btn btn-primary" translate="">GENERAL.ACTION.SAVE</button></div><div class="modal-footer" ng-if="popup.state == \'newDecisionTable\'"><button ng-click="cancel()" class="btn btn-primary" translate="">GENERAL.ACTION.CANCEL</button> <button ng-disabled="state.decisionTableError || model.decisionTable.name.length == 0 || model.decisionTable.key.length == 0" ng-click="createDecisionTable()" class="btn btn-primary" translate="">GENERAL.ACTION.CREATE-DECISION-TABLE</button></div></div></div></div>'),e.put("views/properties/decisiontable-reference-write-template.html",'<span ng-controller="FlowableDecisionTableReferenceCtrl"></span>'),e.put("views/properties/default-value-display-template.html",'<span ng-if="!property.noValue">{{property.value|limitTo:20}}</span> <span ng-if="!property.noValue && property.value != null && property.value.length > 20">{{property.value.key}}</span> <span ng-if="property.noValue" translate="">PROPERTY.EMPTY</span>'),e.put("views/properties/duedate-display-template.html",'<span ng-if="!property.value || property.value.length === 0" translate="">PROPERTY.DUEDATE.EMPTY</span><span ng-if="property.value != \'\' || property.value != null">{{property.value | date:"yyyy-MM-dd HH:mm:ss"}}</span>'),e.put("views/properties/duedate-popup.html",'<style>\r\n    .form-control {\r\n        display: block!important;\r\n    }\r\n</style><div class="modal" ng-controller="BpmnEditorDueDatePopupCtrl"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2 translate="">PROPERTY.DUEDATE.TITLE</h2></div><div class="modal-body"><div class="clearfix first"><div class="col-xs-12"><div class="col-xs-12"><div class="btn-group span"><button class="selection" data-toggle="dropdown" ng-options="option.id as (option.title | translate) for option in taskDueDateOptions" bs-select="" ng-model="popup.selectedDueDateOption" ng-change="dueDateOptionChanged()" activiti-fix-dropdown-bug=""><i class="icon icon-caret-down"></i></button></div></div></div></div><div class="clearfix first" ng-if="popup.selectedDueDateOption === \'expression\'" style="padding-top: 10px"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROPERTY.DUEDATE.EXPRESSION-LABEL\' | translate}}:</label></div><div class="col-xs-8"><input id="expression" type="text" datetime-picker="" date-format="" class="form-control" ng-model="popup.duedateExpression"></div></div></div><div class="clearfix first" ng-if="popup.selectedDueDateOption === \'field\'" style="padding-top: 10px"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROCESS-BUILDER.FIELD.TIMER.DATE-FIELD\' | translate}}:</label></div><div class="col-xs-8"><div field-select="popup.duedate.field.taskDueDateField" editor-type="bpmn" all-steps="allSteps" step-id="selectedShape.resourceId" field-type-filter="[\'date\']"></div></div></div></div><div class="clearfix first" ng-if="popup.selectedDueDateOption === \'field\'" style="padding-top: 10px"><div class="col-xs-12"><div class="col-xs-4"><label>{{\'PROCESS-BUILDER.FIELD.DUEDATE.CALCULATION-TYPE\' | translate}}:</label></div><div class="col-xs-8"><div class="btn-group btn-group-justified"><div class="btn-group"><button type="button" class="btn btn-default" ng-click="setAddCalculationType()" ng-model="popup.duedate.field.taskDueDateCalculationType" ng-class="{\'active\' : (!popup.duedate.field.taskDueDateCalculationType || popup.duedate.field.taskDueDateCalculationType == \'add\')}">{{\'PROCESS-BUILDER.FIELD.DUEDATE.CALCULATION-OPTIONS.ADD\' | translate}}</button></div><div class="btn-group"><button type="button" class="btn btn-default" ng-click="setSubtractCalculationType()" ng-model="popup.duedate.field.taskDueDateCalculationType" ng-class="{\'active\' : popup.duedate.field.taskDueDateCalculationType == \'subtract\'}">{{\'PROCESS-BUILDER.FIELD.DUEDATE.CALCULATION-OPTIONS.SUBTRACT\' | translate}}</button></div></div></div></div></div><div class="clearfix first" ng-if="popup.selectedDueDateOption === \'field\'" style="padding-top: 10px"><div class="col-xs-12"><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.YEARS\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.field.years"></div><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.MONTHS\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.field.months"></div><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.DAYS\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.field.days"></div></div><div class="col-xs-12"><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.HOURS\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.field.hours"></div><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.MINUTES\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.field.minutes"></div><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.SECONDS\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.field.seconds"></div></div></div><div class="clearfix first" ng-if="popup.selectedDueDateOption === \'static\'" style="padding-top: 10px"><div class="col-xs-12"><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.YEARS\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.fixed.years"></div><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.MONTHS\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.fixed.months"></div><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.DAYS\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.fixed.days"></div></div><div class="col-xs-12"><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.HOURS\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.fixed.hours"></div><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.MINUTES\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.fixed.minutes"></div><div class="col-xs-4">{{\'PROCESS-BUILDER.FIELD.TIMER.SECONDS\' | translate}}:<input type="number" class="form-control" ng-model="popup.duedate.fixed.seconds"></div></div></div><div class="modal-footer"><button ng-click="close()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div></div>'),e.put("views/properties/duedate-write-template.html",'<span ng-controller="BpmnEditorDueDateCtrl"></span>'),e.put("views/properties/errorgrid-critical.html",'<div class="ui-grid-cell-contents flowable-status"><div class="flowable-warning" ng-if="row.entity.warning">Warning</div><div class="flowable-critical" ng-if="!row.entity.warning">Critical</div></div>'),e.put("views/properties/event-listeners-display-template.html",'<span ng-if="!property.noValue">{{\'PROPERTY.EVENTLISTENERS.DISPLAY\' | translate:property.value.eventListeners}}</span> <span ng-if="property.noValue" translate="">PROPERTY.EVENTLISTENERS.EMPTY</span>'),
e.put("views/properties/event-listeners-popup.html",'<div class="modal" ng-controller="FlowableEventListenersPopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>{{\'PROPERTY.PROPERTY.EDIT.TITLE\' | translate}} "{{property.title | translate}}"</h2></div><div class="modal-body"><div class="row row-no-gutter"><div class="col-xs-10"><div ng-if="translationsRetrieved" class="kis-listener-grid" ui-grid="gridOptions" ui-grid-selection=""></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.UP | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveListenerUp()"><i class="glyphicon glyphicon-arrow-up"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.DOWN | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveListenerDown()"><i class="glyphicon glyphicon-arrow-down"></i></a></div><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.ADD | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewListener()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.REMOVE | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="removeListener()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div></div><div class="row row-no-gutter"><div ng-if="translationsRetrieved" ng-show="selectedListener" class="col-xs-6"><div class="form-group"><label>{{\'PROPERTY.EVENTLISTENERS.EVENTS\' | translate}}</label><div ng-repeat="eventDefinition in selectedListener.events"><select id="eventField" class="form-control" ng-model="eventDefinition.event" ng-change="listenerDetailsChanged()" style="display:inline-block; width:80%;margin-bottom: 10px;"><option title="{{\'EVENT_TYPE.ACTIVITY.COMPENSATE.TOOLTIP\' | translate}}">ACTIVITY_COMPENSATE</option><option title="{{\'EVENT_TYPE.ACTIVITY.COMPLETED.TOOLTIP\' | translate}}">ACTIVITY_COMPLETED</option><option title="bla">ACTIVITY_ERROR_RECEIVED</option><option>ACTIVITY_MESSAGE_RECEIVED</option><option>ACTIVITY_SIGNALED</option><option>ACTIVITY_STARTED</option><option>ENGINE_CLOSED</option><option>ENGINE_CREATED</option><option>ENTITY_ACTIVATED</option><option>ENTITY_CREATED</option><option>ENTITY_DELETED</option><option>ENTITY_INITIALIZED</option><option>ENTITY_SUSPENDED</option><option>ENTITY_UPDATED</option><option>JOB_EXECUTION_FAILURE</option><option>JOB_EXECUTION_SUCCESS</option><option>JOB_RETRIES_DECREMENTED</option><option title="{{\'EVENT_TYPE.MEMBERSHIP.CREATED.TOOLTIP\' | translate}}">MEMBERSHIP_CREATED</option><option title="{{\'EVENT_TYPE.MEMBERSHIP.DELETED.TOOLTIP\' | translate}}">MEMBERSHIP_DELETED</option><option title="{{\'EVENT_TYPE.MEMBERSHIPS.DELETED.TOOLTIP\' | translate}}">MEMBERSHIPS_DELETED</option><option title="{{\'EVENT_TYPE.TASK.ASSIGNED.TOOLTIP\' | translate}}">TASK_ASSIGNED</option><option title="{{\'EVENT_TYPE.TASK.COMPLETED.TOOLTIP\' | translate}}">TASK_COMPLETED</option><option>TIMER_FIRED</option><option title="{{\'EVENT_TYPE.UNCAUGHT.BPMNERROR.TOOLTIP\' | translate}}">UNCAUGHT_BPMN_ERROR</option><option title="{{\'EVENT_TYPE.VARIABLE.CREATED.TOOLTIP\' | translate}}">VARIABLE_CREATED</option><option title="{{\'EVENT_TYPE.VARIABLE.DELETED.TOOLTIP\' | translate}}">VARIABLE_DELETED</option><option title="{{\'EVENT_TYPE.VARIABLE.UPDATED.TOOLTIP\' | translate}}">VARIABLE_UPDATED</option></select><i ng-if="$index > 0" class="glyphicon glyphicon-minus clickable-property" ng-click="removeEventValue($index)" style="margin: 5px 0 5px 10px; font-size: 16px; cursor:pointer;"></i> <i class="glyphicon glyphicon-plus clickable-property" ng-click="addEventValue($index)" style="margin: 5px 0 5px 10px; font-size: 16px; cursor:pointer;"></i></div><div class="form-group" ng-show="selectedListener.event" style="margin-top: 10px;"><input type="checkbox" id="rethrowField" class="checkbox" ng-model="selectedListener.rethrowEvent" ng-change="listenerDetailsChanged()" style="display:inline-block;"> <label for="classField" ng-click="selectedListener.rethrowEvent = !selectedListener.rethrowEvent" style="cursor:pointer;">{{\'PROPERTY.EVENTLISTENERS.RETHROW\' | translate}}</label></div></div></div><div ng-show="selectedListener && selectedListener.events[0].event" class="col-xs-6"><div class="form-group" ng-if="!selectedListener.rethrowEvent"><label for="classField">{{\'PROPERTY.EVENTLISTENERS.CLASS\' | translate}}</label> <input type="text" id="classField" class="form-control" ng-model="selectedListener.className" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.EVENTLISTENERS.CLASS.PLACEHOLDER\' | translate}}"></div><div class="form-group" ng-if="!selectedListener.rethrowEvent"><label for="delegateExpressionField">{{\'PROPERTY.EVENTLISTENERS.DELEGATEEXPRESSION\' | translate}}</label> <input type="text" id="delegateExpressionField" class="form-control" ng-model="selectedListener.delegateExpression" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.EVENTLISTENERS.DELEGATEEXPRESSION.PLACEHOLDER\' | translate}}"></div><div class="form-group" ng-if="!selectedListener.rethrowEvent"><label for="entityTypeField">{{\'PROPERTY.EVENTLISTENERS.ENTITYTYPE\' | translate}}</label> <input type="text" id="entityTypeField" class="form-control" ng-model="selectedListener.entityType" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.EVENTLISTENERS.ENTITYTYPE.PLACEHOLDER\' | translate}}"></div><div class="form-group" ng-if="selectedListener.rethrowEvent"><label for="delegateExpressionField">{{\'PROPERTY.EVENTLISTENERS.RETHROWTYPE\' | translate}}</label><select id="rethrowTypeField" class="form-control" ng-model="selectedListener.rethrowType" ng-change="rethrowTypeChanged()"><option>error</option><option>message</option><option>signal</option><option>globalSignal</option></select></div><div class="form-group" ng-if="selectedListener.rethrowEvent && selectedListener.rethrowType === \'error\'"><label for="errorCodeField">{{\'PROPERTY.EVENTLISTENERS.ERRORCODE\' | translate}}</label> <input type="text" id="errorCodeField" class="form-control" ng-model="selectedListener.errorcode" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.EVENTLISTENERS.ERRORCODE.PLACEHOLDER\' | translate}}"></div><div class="form-group" ng-if="selectedListener.rethrowEvent && selectedListener.rethrowType === \'message\'"><label for="messageNameField">{{\'PROPERTY.EVENTLISTENERS.MESSAGENAME\' | translate}}</label> <input type="text" id="messageNameField" class="form-control" ng-model="selectedListener.messagename" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.EVENTLISTENERS.MESSAGENAME.PLACEHOLDER\' | translate}}"></div><div class="form-group" ng-if="selectedListener.rethrowEvent && (selectedListener.rethrowType === \'signal\' || selectedListener.rethrowType === \'globalSignal\')"><label for="messageNameField">{{\'PROPERTY.EVENTLISTENERS.SIGNALNAME\' | translate}}</label> <input type="text" id="signalNameField" class="form-control" ng-model="selectedListener.signalname" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.EVENTLISTENERS.SIGNALNAME.PLACEHOLDER\' | translate}}"></div></div><div ng-show="!selectedListener" class="col-xs-6 muted no-property-selected" translate="">PROPERTY.EVENTLISTENERS.UNSELECTED</div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/event-listeners-write-template.html",'<span ng-controller="FlowableEventListenersCtrl"></span>'),e.put("views/properties/execution-listeners-display-template.html",'<span ng-if="!property.noValue">{{\'PROPERTY.EXECUTIONLISTENERS.DISPLAY\' | translate:property.value.executionListeners}}</span> <span ng-if="property.noValue" translate="">PROPERTY.EXECUTIONLISTENERS.EMPTY</span>'),e.put("views/properties/execution-listeners-popup.html",'<div class="modal" ng-controller="FlowableExecutionListenersPopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>{{\'PROPERTY.PROPERTY.EDIT.TITLE\' | translate}} "{{property.title | translate}}"</h2></div><div class="modal-body"><div class="row row-no-gutter"><div class="col-xs-6"><div ng-if="translationsRetrieved" class="kis-listener-grid" ui-grid="gridOptions" ui-grid-selection=""></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.UP | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveListenerUp()"><i class="glyphicon glyphicon-arrow-up"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.DOWN | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveListenerDown()"><i class="glyphicon glyphicon-arrow-down"></i></a></div><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.ADD | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewListener()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.REMOVE | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="removeListener()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div><div class="col-xs-6"><div ng-show="selectedListener"><div class="form-group"><label for="eventField">{{\'PROPERTY.EXECUTIONLISTENERS.EVENT\' | translate}}</label><select id="eventField" class="form-control" ng-model="selectedListener.event"><option>start</option><option>end</option><option>take</option></select></div><div class="form-group"><label for="classField">{{\'PROPERTY.EXECUTIONLISTENERS.CLASS\' | translate}}</label> <input type="text" id="classField" class="form-control" ng-model="selectedListener.className" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.EXECUTIONLISTENERS.CLASS.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="expressionField">{{\'PROPERTY.EXECUTIONLISTENERS.EXPRESSION\' | translate}}</label> <input type="text" id="expressionField" class="form-control" ng-model="selectedListener.expression" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.EXECUTIONLISTENERS.EXPRESSION.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="delegateExpressionField">{{\'PROPERTY.EXECUTIONLISTENERS.DELEGATEEXPRESSION\' | translate}}</label> <input type="text" id="delegateExpressionField" class="form-control" ng-model="selectedListener.delegateExpression" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.EXECUTIONLISTENERS.DELEGATEEXPRESSION.PLACEHOLDER\' | translate}}"></div></div><div ng-show="!selectedListener" class="muted no-property-selected" translate="">PROPERTY.EXECUTIONLISTENERS.UNSELECTED</div></div></div><div class="row row-no-gutter"><div class="col-xs-6"><div ng-if="translationsRetrieved" class="kis-field-grid" ui-grid="gridFieldOptions" ui-grid-selection=""></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.UP | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveFieldUp()"><i class="glyphicon glyphicon-arrow-up"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.DOWN | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveFieldDown()"><i class="glyphicon glyphicon-arrow-down"></i></a></div><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.ADD | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewField()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.REMOVE | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="removeField()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div><div class="col-xs-6"><div ng-show="selectedField"><div class="form-group"><label for="nameField">{{\'PROPERTY.EXECUTIONLISTENERS.FIELDS.NAME\' | translate}}</label> <input type="text" id="nameField" class="form-control" ng-model="selectedField.name" placeholder="{{\'PROPERTY.EXECUTIONLISTENERS.FIELDS.NAME.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="stringValueField">{{\'PROPERTY.EXECUTIONLISTENERS.FIELDS.STRINGVALUE\' | translate}}</label> <input type="text" id="stringValueField" class="form-control" ng-model="selectedField.stringValue" ng-change="fieldDetailsChanged()" placeholder="{{\'PROPERTY.EXECUTIONLISTENERS.FIELDS.STRINGVALUE.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="expressionField">{{\'PROPERTY.EXECUTIONLISTENERS.FIELDS.EXPRESSION\' | translate}}</label> <input type="text" id="expressionField" class="form-control" ng-model="selectedField.expression" ng-change="fieldDetailsChanged()" placeholder="{{\'PROPERTY.EXECUTIONLISTENERS.FIELDS.EXPRESSION.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="stringField">{{\'PROPERTY.EXECUTIONLISTENERS.FIELDS.STRING\' | translate}}</label> <textarea id="stringField" class="form-control" ng-model="selectedField.string" ng-change="fieldDetailsChanged()" placeholder="{{\'PROPERTY.EXECUTIONLISTENERS.FIELDS.STRING.PLACEHOLDER\' | translate}}"></textarea></div></div><div ng-show="!selectedField" class="muted no-property-selected" translate="">PROPERTY.EXECUTIONLISTENERS.FIELDS.EMPTY</div></div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/execution-listeners-write-template.html",'<span ng-controller="FlowableExecutionListenersCtrl"></span>'),e.put("views/properties/feedback-popup.html",'<div class="modal" ng-controller="BpmnFeedbackPopupCtrl"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h2>{{\'PROPERTY.FEEDBACK.TITLE\' | translate:property}}</h2></div><div class="modal-body"><p><textarea auto-focus="" class="form-control" ng-model="model.feedback" style="width:90%; height:100%; max-width: 100%; max-height: 100%; min-height: 300px"></textarea></p></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="send()" ng-disabled="model.feedback.length === 0" class="btn btn-primary" translate="">ACTION.SEND</button></div></div></div></div>'),e.put("views/properties/fields-display-template.html","<span ng-if=\"!property.noValue\">{{'PROPERTY.FIELDS' | translate:property.value.fields}}</span> <span ng-if=\"property.noValue\">{{'PROPERTY.FIELDS.EMPTY' | translate}}</span>"),e.put("views/properties/fields-popup.html",'<div class="modal" ng-controller="FlowableFieldsPopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h3>{{\'PROPERTY.PROPERTY.EDIT.TITLE\' | translate}} "{{property.title | translate}}"</h3></div><div class="modal-body"><div class="row row-no-gutter"><div class="col-xs-6"><div ng-if="translationsRetrieved" class="kis-listener-grid" ui-grid="gridOptions" ui-grid-selection=""></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.MOVE.UP\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveFieldUp()"><i class="glyphicon glyphicon-arrow-up"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.MOVE.DOWN\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveFieldDown()"><i class="glyphicon glyphicon-arrow-down"></i></a></div><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.ADD\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewField()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.REMOVE\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="removeField()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div><div class="col-xs-6"><div ng-show="selectedField"><div class="form-group"><label translate="">PROPERTY.FIELDS.NAME</label> <input type="text" class="form-control" ng-model="selectedField.name" placeholder="{{\'PROPERTY.FIELDS.NAME.PLACEHOLDER\' | translate}}"></div><div><label translate="">PROPERTY.FIELDS.STRINGVALUE</label> <input type="text" class="form-control" ng-model="selectedField.stringValue" ng-change="fieldDetailsChanged()" placeholder="{{\'PROPERTY.FIELDS.STRINGVALUE.PLACEHOLDER\' | translate}}"></div><div><label translate="">PROPERTY.FIELDS.EXPRESSION</label> <input type="text" class="form-control" ng-model="selectedField.expression" ng-change="fieldDetailsChanged()" placeholder="{{\'PROPERTY.FIELDS.EXPRESSION.PLACEHOLDER\' | translate}}"></div><div><label translate="">PROPERTY.FIELDS.STRING</label> <textarea type="text" class="form-control" ng-model="selectedField.string" ng-change="fieldDetailsChanged()" placeholder="{{\'PROPERTY.FIELDS.STRING.PLACEHOLDER\' | translate}}"></textarea></div></div><div ng-show="!selectedField" class="muted no-property-selected" translate="">PROPERTY.FIELDS.EMPTY</div></div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/fields-write-template.html",'<span ng-controller="FlowableFieldsCtrl"></span>'),e.put("views/properties/form-properties-display-template.html",'<span ng-if="!property.noValue">{{\'PROPERTY.FORMPROPERTIES.VALUE\' | translate:property.value.formProperties}}</span> <span ng-if="property.noValue" translate="">PROPERTY.FORMPROPERTIES.EMPTY</span>'),e.put("views/properties/form-properties-popup.html",'<div class="modal" ng-controller="FlowableFormPropertiesPopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>{{\'PROPERTY.PROPERTY.EDIT.TITLE\' | translate}} "{{property.title | translate}}"</h2></div><div class="modal-body"><div class="row row-no-gutter"><div class="col-xs-6"><div ng-if="translationsRetrieved" class="kis-listener-grid" ui-grid="gridOptions" ui-grid-selection=""></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.MOVE.UP\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="movePropertyUp()"><i class="glyphicon glyphicon-arrow-up"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.MOVE.DOWN\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="movePropertyDown()"><i class="glyphicon glyphicon-arrow-down"></i></a></div><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.ADD\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewProperty()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.REMOVE\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="removeProperty()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div><div class="col-xs-6"><div ng-show="selectedProperty"><div class="form-group"><label for="idField">{{\'PROPERTY.FORMPROPERTIES.ID\' | translate}}</label> <input id="idField" class="form-control" type="text" ng-model="selectedProperty.id" placeholder="{{\'PROPERTY.FORMPROPERTIES.ID.PLACEHOLDER\' | translate }}"></div><div class="form-group"><label for="nameField">{{\'PROPERTY.FORMPROPERTIES.NAME\' | translate}}</label> <input id="nameField" class="form-control" type="text" ng-model="selectedProperty.name" placeholder="{{\'PROPERTY.FORMPROPERTIES.NAME.PLACEHOLDER\' | translate }}"></div><div class="form-group"><label for="typeField">{{\'PROPERTY.FORMPROPERTIES.TYPE\' | translate}}</label><select id="typeField" class="form-control" ng-model="selectedProperty.type" ng-change="propertyTypeChanged()"><option>string</option><option>long</option><option>boolean</option><option>date</option><option>enum</option></select></div><div class="form-group" ng-show="selectedProperty.datePattern"><label for="datePatternField">{{\'PROPERTY.FORMPROPERTIES.DATEPATTERN\' | translate}}</label> <input id="datePatternField" class="form-control" type="text" ng-model="selectedProperty.datePattern" placeholder="{{\'PROPERTY.FORMPROPERTIES.DATEPATTERN.PLACEHOLDER\' | translate }}"></div><div ng-if="selectedProperties[0].type == \'enum\'" style="padding-bottom:10px"><div class="row row-no-gutter"><div class="col-xs-6"><div ng-if="translationsRetrieved" class="kis-listener-grid" ng-grid="enumGridOptions"></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.UP | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveEnumValueUp()"><i class="glyphicon glyphicon-arrow-up"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.DOWN | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveEnumValueDown()"><i class="glyphicon glyphicon-arrow-down"></i></a></div><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.ADD | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewEnumValue()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.REMOVE | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="removeEnumValue()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div><div class="col-xs-6"><div ng-show="selectedEnumValues.length > 0"><div class="form-group"><label for="classField">{{\'PROPERTY.FORMPROPERTIES.VALUES.ID\' | translate}}</label> <input type="text" id="classField" class="form-control" ng-model="selectedEnumValues[0].id" placeholder="{{\'PROPERTY.FORMPROPERTIES.VALUES.ID.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="classField">{{\'PROPERTY.FORMPROPERTIES.VALUES.NAME\' | translate}}</label> <input type="text" id="classField" class="form-control" ng-model="selectedEnumValues[0].name" placeholder="{{\'PROPERTY.FORMPROPERTIES.VALUES.NAME.PLACEHOLDER\' | translate}}"></div></div><div ng-show="selectedEnumValues.length == 0" class="muted no-property-selected" translate="">PROPERTY.FORMPROPERTIES.ENUMVALUES.EMPTY</div></div></div></div><div class="form-group"><label for="expressionField">{{\'PROPERTY.FORMPROPERTIES.EXPRESSION\' | translate}}</label> <input id="expressionField" class="form-control" type="text" ng-model="selectedProperty.expression" placeholder="{{\'PROPERTY.FORMPROPERTIES.EXPRESSION.PLACEHOLDER\' | translate }}"></div><div class="form-group"><label for="variableField">{{\'PROPERTY.FORMPROPERTIES.VARIABLE\' | translate}}</label> <input id="variableField" class="form-control" type="text" ng-model="selectedProperty.variable" placeholder="{{\'PROPERTY.FORMPROPERTIES.VARIABLE.PLACEHOLDER\' | translate }}"></div><div class="form-inline"><div class="form-group col-xs-2"><label for="requiredField">{{\'PROPERTY.FORMPROPERTIES.REQUIRED\' | translate}}</label> <input id="requiredField" class="checkbox" type="checkbox" ng-model="selectedProperty.required"></div><div class="form-group col-xs-2"><label for="readableField">{{\'PROPERTY.FORMPROPERTIES.READABLE\' | translate}}</label> <input id="readableField" class="checkbox" type="checkbox" ng-model="selectedProperty.readable"></div><div class="form-group col-xs-2"><label for="writableField">{{\'PROPERTY.FORMPROPERTIES.WRITABLE\' | translate}}</label> <input id="writableField" class="checkbox" type="checkbox" ng-model="selectedProperty.writable"></div></div></div><div ng-show="!selectedProperty" class="muted no-property-selected" translate="">PROPERTY.FORMPROPERTIES.EMPTY</div></div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/form-properties-write-template.html",'<span ng-controller="FlowableFormPropertiesCtrl"></span>'),e.put("views/properties/form-reference-display-template.html",'<div ng-controller="FlowableFormReferenceDisplayCtrl"><span ng-if="!property.noValue">{{form.name}}</span> <span ng-if="property.noValue" translate="">PROPERTY.FORMREFERENCE.EMPTY</span></div>'),e.put("views/properties/form-reference-display-template1.html",'<div ng-controller="FlowableFormReferenceDisplayCtrl1"><span ng-if="!property.noValue"><span ng-repeat="user in users">{{user.name}}<span ng-if="!$last">，</span></span></span> <span ng-if="property.noValue" translate="">没有对应的用户</span></div>'),e.put("views/properties/form-reference-popup.html",'<div class="modal" ng-controller="FlowableFormReferencePopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header" ng-if="popup.state != \'newForm\'"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>{{\'PROPERTY.FORMREFERENCE.TITLE\' | translate}} <span ng-show="selectedForm != null">- {{selectedForm.name}}</span> <span ng-show="selectedForm == null">- {{\'PROPERTY.FORMREFERENCE.EMPTY\' | translate}}</span></h2></div><div class="modal-header" ng-if="popup.state == \'newForm\'"><h2>{{\'FORM.POPUP.CREATE-TITLE\' | translate}}</h2></div><div class="modal-body-with-overflow" ng-if="popup.state != \'newForm\'"><div class="detail-group clearfix"><div class="col-xs-12"><div class="alert alert-error" ng-show="!state.loadingForms && state.formError" translate="">PROPERTY.FORMREFERENCE.ERROR.FORM</div></div></div><div class="detail-group clearfix"><div class="col-xs-12 editor-item-picker"><div ng-if="!state.loadingForms && !state.formError" class="col-xs-4 editor-item-picker-component" ng-repeat="form in forms" ng-class="{\'selected\' : form.formId == selectedForm.formId}" ng-click="selectForm(form, $event)"><div class="controls"><input type="checkbox" value="option1" ng-click="selectForm(form, $event)" ng-checked="form.id == selectedForm.id"></div><h4>{{form.name}}</h4><img ng-src="{{config.contextRoot}}/app/rest/models/{{form.id}}/thumbnail"></div><div ng-show="state.loadingForms"><p class="loading" translate="">PROPERTY.FORMREFERENCE.FORM.LOADING</p></div><div ng-show="!state.loadingForms && forms.length == 0"><p translate="">PROPERTY.FORMREFERENCE.FORM.EMPTY</p></div></div></div></div><div class="modal-body" ng-if="popup.state == \'newForm\'"><p>{{\'FORM.POPUP.CREATE-DESCRIPTION\' | translate}}</p><div ng-if="model.errorMessage && model.errorMessage.length > 0" class="alert error" style="font-size: 14px; margin-top:20px"><div class="popup-error" style="font-size: 14px"><span class="glyphicon glyphicon-remove-circle"></span> <span>{{model.errorMessage}}</span></div></div><div class="form-group"><label for="newFormName">{{\'FORM.NAME\' | translate}}</label> <input ng-disabled="model.loading" type="text" class="form-control" id="newFormName" ng-model="model.form.name" custom-keys="" enter-pressed="ok()" auto-focus="" editor-input-check=""></div><div class="form-group"><label for="newFormKey">{{\'FORM.KEY\' | translate}}</label> <input ng-disabled="model.loading" type="text" class="form-control" id="newFormKey" ng-model="model.form.key" editor-input-check=""></div><div class="form-group"><label for="newFormDescription">{{\'FORM.DESCRIPTION\' | translate}}</label> <textarea ng-disabled="model.loading" class="form-control" id="newFormDescription" rows="5" ng-model="model.form.description"></textarea></div></div><div class="modal-footer" ng-if="popup.state != \'newForm\'"><button ng-click="cancel()" class="btn btn-primary" translate="">GENERAL.ACTION.CANCEL</button> <button ng-disabled="state.formError" ng-click="newForm()" class="btn btn-primary" translate="">GENERAL.ACTION.NEW-FORM</button> <button ng-disabled="!selectedForm || state.formError" ng-click="open()" class="btn btn-primary" translate="">GENERAL.ACTION.OPEN</button> <button ng-disabled="state.formError" ng-click="save()" class="btn btn-primary" translate="">GENERAL.ACTION.SAVE</button></div><div class="modal-footer" ng-if="popup.state == \'newForm\'"><button ng-click="cancel()" class="btn btn-primary" translate="">GENERAL.ACTION.CANCEL</button> <button ng-disabled="state.formError || model.form.name.length == 0 || model.form.key.length == 0" ng-click="createForm()" class="btn btn-primary" translate="">GENERAL.ACTION.CREATE-FORM</button></div></div></div></div>'),e.put("views/properties/form-reference-popup1.html",'<div class="modal" ng-controller="FlowableFormReferencePopupCtrl1"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header" ng-if="popup.state != \'newForm\'"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>选择用户 <span ng-show="selectedForm != null">- {{selectedForm.name}}</span> <span ng-show="selectedForm == null">- 没有选择用户</span></h2></div><div class="modal-body-with-overflow" ng-if="popup.state != \'newForm\'"><div class="detail-group clearfix"><div class="col-xs-12"><div class="alert alert-error" ng-show="!state.loadingForms && state.formError" translate="">PROPERTY.FORMREFERENCE.ERROR.FORM</div></div></div><div class="detail-group clearfix"><div class="col-xs-12 editor-item-picker"><div ng-if="!state.loadingForms && !state.formError" class="col-xs-4 editor-item-picker-component" ng-repeat="form in forms" ng-class="{\'selected\' : form.formId == selectedForm.formId}" ng-click="selectForm(form, $event)"><div class="controls"><input type="checkbox" value="option1" ng-click="selectForm(form, $event)" ng-checked="form.id == selectedForm.id"></div><h4>{{form.name}}</h4><img ng-src="http://wx.qlogo.cn/mmopen/fsFT5ibPNuBiaZGWzb7yT0yFy0ibaTENudO3LTia7fn4ibSc3mlma5alTpUDw39tx8EuCMrVqjCF9rMicak7H5MQ2tQ7LQTNt6cicv1/0"></div><div ng-show="state.loadingForms"><p class="loading" translate="">PROPERTY.FORMREFERENCE.FORM.LOADING</p></div><div ng-show="!state.loadingForms && forms.length == 0"><p translate="">PROPERTY.FORMREFERENCE.FORM.EMPTY</p></div></div></div></div><div class="modal-footer" ng-if="popup.state != \'newForm\'"><button ng-click="cancel()" class="btn btn-primary" translate="">GENERAL.ACTION.CANCEL</button><button ng-disabled="!selectedForm || state.formError" ng-click="open()" class="btn btn-primary" translate="">GENERAL.ACTION.OPEN</button></div></div></div></div>'),e.put("views/properties/form-reference-popup2.html",'<div class="modal" ng-controller="FlowableFormReferencePopupCtrl2"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header" ng-if="popup.state != \'newForm\'"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>选择用户 <span ng-show="selected != null">- <span ng-repeat="form in selected">{{form.name}} <span ng-if="!$last">，</span></span></span> <span ng-show="selected.size()==0">- 没有选择用户</span></h2></div><div class="modal-body-with-overflow" ng-if="popup.state != \'newForm\'"><div class="detail-group clearfix"><div class="col-xs-12"><div class="alert alert-error" ng-show="!state.loadingForms && state.formError" translate="">PROPERTY.FORMREFERENCE.ERROR.FORM</div></div></div><div class="detail-group clearfix"><div class="col-xs-12 editor-item-picker"><div ng-if="!state.loadingForms && !state.formError" class="col-xs-4 editor-item-picker-component" ng-repeat="form in forms track by $index" ng-class="{\'selected\' : form.formId == selectedForm.formId}" ng-click="selectForm(form, $event)"><div class="controls"><input type="checkbox" ng-value="form.userName" ng-click="selectForm(form, $event)" ng-checked="isselect(form.id)"></div><h4>{{form.name}}</h4><img ng-src="http://wx.qlogo.cn/mmopen/fsFT5ibPNuBiaZGWzb7yT0yFy0ibaTENudO3LTia7fn4ibSc3mlma5alTpUDw39tx8EuCMrVqjCF9rMicak7H5MQ2tQ7LQTNt6cicv1/0"></div><div ng-show="state.loadingForms"><p class="loading" translate="">PROPERTY.FORMREFERENCE.FORM.LOADING</p></div><div ng-show="!state.loadingForms && forms.length == 0"><p translate="">PROPERTY.FORMREFERENCE.FORM.EMPTY</p></div></div></div></div><div class="modal-footer" ng-if="popup.state != \'newForm\'"><button ng-click="cancel()" class="btn btn-primary" translate="">GENERAL.ACTION.CANCEL</button><button ng-disabled="!selected || state.formError" ng-click="open()" class="btn btn-primary" translate="">GENERAL.ACTION.OPEN</button></div></div></div></div>'),
e.put("views/properties/form-reference-write-template.html",'<span ng-controller="FlowableFormReferenceCtrl"></span>'),e.put("views/properties/form-reference-write-template1.html",'<span ng-controller="FlowableFormReferenceCtrl1"></span>'),e.put("views/properties/in-parameters-display-template.html",'<span ng-if="!property.noValue">{{\'PROPERTY.INPARAMETERS.VALUE\' | translate:property.value.inParameters}}</span> <span ng-if="property.noValue" translate="">PROPERTY.INPARAMETERS.EMPTY</span>'),e.put("views/properties/in-parameters-popup.html",'<div class="modal" ng-controller="FlowableInParametersPopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>{{\'PROPERTY.PROPERTY.EDIT.TITLE\' | translate}} "{{property.title | translate}}"</h2></div><div class="modal-body"><div class="row row-no-gutter"><div class="col-xs-6"><div ng-if="translationsRetrieved" class="kis-listener-grid" ui-grid="gridOptions" ui-grid-selection=""></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.MOVE.UP\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveParameterUp()"><i class="glyphicon glyphicon-arrow-up"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.MOVE.DOWN\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveParameterDown()"><i class="glyphicon glyphicon-arrow-down"></i></a></div><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.ADD\' | translate:property}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewParameter()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.REMOVE\' | translate:property}}" data-placement="bottom" data-original-title="" title="" ng-click="removeParameter()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div><div class="col-xs-6"><div ng-show="selectedParameter"><div class="form-group"><label for="sourceField">{{\'PROPERTY.PARAMETER.SOURCE\' | translate}}</label> <input type="text" id="sourceField" class="form-control" ng-model="selectedParameter.source" placeholder="{{\'PROPERTY.PARAMETER.SOURCE.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="expressionField">{{\'PROPERTY.PARAMETER.SOURCEEXPRESSION\' | translate}}</label> <input type="text" id="expressionField" class="form-control" ng-model="selectedParameter.sourceExpression" placeholder="{{\'PROPERTY.PARAMETER.SOURCEEXPRESSION.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="expressionField">{{\'PROPERTY.PARAMETER.TARGET\' | translate}}</label> <input type="text" id="expressionField" class="form-control" ng-model="selectedParameter.target" placeholder="{{\'PROPERTY.PARAMETER.TARGET.PLACEHOLDER\' | translate}}"></div></div><div ng-show="!selectedParameter" class="muted no-property-selected" translate="">PROPERTY.PARAMETER.EMPTY</div></div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/in-parameters-write-template.html",'<span ng-controller="FlowableInParametersCtrl"></span>'),e.put("views/properties/message-definitions-display-template.html",'<span ng-if="!property.noValue">{{\'PROPERTY.MESSAGEDEFINITIONS.DISPLAY\' | translate:property.value}}</span> <span ng-if="property.noValue" translate="">PROPERTY.MESSAGEDEFINITIONS.EMPTY</span>'),e.put("views/properties/message-definitions-popup.html",'<div class="modal" ng-controller="FlowableMessageDefinitionsPopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>{{\'PROPERTY.PROPERTY.EDIT.TITLE\' | translate}} "{{property.title | translate}}"</h2></div><div class="modal-body"><div class="row row-no-gutter"><div class="col-xs-8"><div ng-if="translationsRetrieved" class="kis-listener-grid" ui-grid="gridOptions" ui-grid-selection=""></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.ADD | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewMessageDefinition()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.REMOVE | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="removeMessageDefinition()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div><div class="col-xs-4" ng-show="selectedMessageDefinition"><div class="form-group"><label>{{\'PROPERTY.MESSAGEDEFINITIONS.ID\' | translate}}</label> <input type="text" class="form-control" ng-model="selectedMessageDefinition.id"></div><div class="form-group"><label>{{\'PROPERTY.MESSAGEDEFINITIONS.NAME\' | translate}}</label> <input type="text" class="form-control" ng-model="selectedMessageDefinition.name"></div></div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/message-definitions-write-template.html",'<span ng-controller="FlowableMessageDefinitionsCtrl"></span>'),e.put("views/properties/message-property-write-template.html",'<div ng-controller="FlowableMessageRefCtrl"><select ng-model="property.value" ng-change="messageChanged()" ng-options="messageDefinition.id as (messageDefinition.name + \' (\' + messageDefinition.id + \')\') for messageDefinition in messageDefinitions"></select></div>'),e.put("views/properties/multiinstance-property-write-template.html",'<div ng-controller="FlowableMultiInstanceCtrl"><select class="form-control" ng-model="property.value" ng-init="queryParams.category=\'\'" ng-change="multiInstanceChanged()"><option value="">请选择模型分类</option><option ng-repeat="item in category" value="{{item.moduleType}}">{{item.moduleType}}</option></select></div>'),e.put("views/properties/multiinstance-property-write-template1.html",'<div ng-controller="FlowableMultiInstanceCtrl"><select class="form-control" ng-model="property.value" ng-init="queryParams.category=\'\'" ng-change="multiInstanceChanged()"><option value="">是否可以填写表单</option><option value="可填">可填</option><option value="不可填">不可填</option></select></div>'),e.put("views/properties/ordering-property-write-template.html",'<div ng-controller="FlowableOrderingCtrl"><select ng-model="property.value" ng-change="orderingChanged()"><option>Parallel</option><option>Sequential</option></select></div>'),e.put("views/properties/out-parameters-display-template.html",'<span ng-if="!property.noValue">{{\'PROPERTY.OUTPARAMETERS.VALUE\' | translate:property.value.outParameters}}</span> <span ng-if="property.noValue" translate="">PROPERTY.OUTPARAMETERS.EMPTY</span>'),e.put("views/properties/out-parameters-popup.html",'<div class="modal" ng-controller="FlowableOutParametersPopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>{{\'PROPERTY.PROPERTY.EDIT.TITLE\' | translate}} "{{property.title | translate}}"</h2></div><div class="modal-body"><div class="row row-no-gutter"><div class="col-xs-6"><div ng-if="translationsRetrieved" class="kis-listener-grid" ui-grid="gridOptions" ui-grid-selection=""></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.MOVE.UP\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveParameterUp()"><i class="glyphicon glyphicon-arrow-up"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.MOVE.DOWN\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveParameterDown()"><i class="glyphicon glyphicon-arrow-down"></i></a></div><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.ADD\' | translate:property}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewParameter()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{\'ACTION.REMOVE\' | translate:property}}" data-placement="bottom" data-original-title="" title="" ng-click="removeParameter()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div><div class="col-xs-6"><div ng-show="selectedParameter"><div class="form-group"><label for="sourceField">{{\'PROPERTY.PARAMETER.SOURCE\' | translate}}</label> <input type="text" id="sourceField" class="form-control" ng-model="selectedParameter.source" placeholder="{{\'PROPERTY.PARAMETER.SOURCE.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="expressionField">{{\'PROPERTY.PARAMETER.SOURCEEXPRESSION\' | translate}}</label> <input type="text" id="expressionField" class="form-control" ng-model="selectedParameter.sourceExpression" placeholder="{{\'PROPERTY.PARAMETER.SOURCEEXPRESSION.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="expressionField">{{\'PROPERTY.PARAMETER.TARGET\' | translate}}</label> <input type="text" id="expressionField" class="form-control" ng-model="selectedParameter.target" placeholder="{{\'PROPERTY.PARAMETER.TARGET.PLACEHOLDER\' | translate}}"></div></div><div ng-show="!selectedParameter" class="muted no-property-selected" translate="">PROPERTY.PARAMETER.EMPTY</div></div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/out-parameters-write-template.html",'<span ng-controller="FlowableOutParametersCtrl"></span>'),e.put("views/properties/sequenceflow-order-display-template.html",'<span ng-if="!property.noValue" translate="">PROPERTY.SEQUENCEFLOW.ORDER.NOT.EMPTY</span> <span ng-if="property.noValue" translate="">PROPERTY.SEQUENCEFLOW.ORDER.EMPTY</span>'),e.put("views/properties/sequenceflow-order-popup.html",'<div class="modal" ng-controller="FlowableSequenceFlowOrderPopupCtrl"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h3>{{\'PROPERTY.PROPERTY.EDIT.TITLE\' | translate}} "{{property.title | translate}}"</h3></div><div class="modal-body"><div translate="">PROPERTY.SEQUENCEFLOW.ORDER.DESCRIPTION</div><br><ol><li class="sequence-flow-order-element" ng-repeat="sequenceFlow in outgoingSequenceFlow">{{\'PROPERTY.SEQUENCEFLOW.ORDER.SEQUENCEFLOW.VALUE\' | translate:sequenceFlow}} <a class="btn btn-icon btn-sm" rel="tooltip" data-title="{{\'ACTION.MOVE.UP\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveUp($index)" ng-if="$index > 0"><i class="glyphicon glyphicon-arrow-up"></i></a> <a class="btn btn-icon btn-sm" rel="tooltip" data-title="{{\'ACTION.MOVE.DOWN\' | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveDown($index)" ng-if="$index < outgoingSequenceFlow.length - 1"><i class="glyphicon glyphicon-arrow-down"></i></a></li></ol></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/sequenceflow-order-write-template.html",'<span ng-controller="FlowableSequenceFlowOrderCtrl"></span>'),e.put("views/properties/signal-definitions-display-template.html",'<span ng-if="!property.noValue">{{\'PROPERTY.SIGNALDEFINITIONS.DISPLAY\' | translate:property.value}}</span> <span ng-if="property.noValue" translate="">PROPERTY.SIGNALDEFINITIONS.EMPTY</span>'),e.put("views/properties/signal-definitions-popup.html",'<div class="modal" ng-controller="FlowableSignalDefinitionsPopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>{{\'PROPERTY.PROPERTY.EDIT.TITLE\' | translate}} "{{property.title | translate}}"</h2></div><div class="modal-body"><div class="row row-no-gutter"><div class="col-xs-8"><div ng-if="translationsRetrieved" class="kis-listener-grid" ui-grid="gridOptions" ui-grid-selection=""></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.ADD | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewSignalDefinition()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.REMOVE | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="removeSignalDefinition()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div><div class="col-xs-4" ng-show="selectedSignalDefinition"><div class="form-group"><label>{{\'PROPERTY.SIGNALDEFINITIONS.ID\' | translate}}</label> <input type="text" class="form-control" ng-model="selectedSignalDefinition.id"></div><div class="form-group"><label>{{\'PROPERTY.SIGNALDEFINITIONS.NAME\' | translate}}</label> <input type="text" class="form-control" ng-model="selectedSignalDefinition.name"></div><div class="form-group"><label>{{\'PROPERTY.SIGNALDEFINITIONS.SCOPE\' | translate}}</label><select class="form-control" ng-model="selectedSignalDefinition.scope" ng-change="listenerDetailsChanged()" ng-options="option.value as option.translationId | translate for option in scopeOptions"></select></div></div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/signal-definitions-write-template.html",'<span ng-controller="FlowableSignalDefinitionsCtrl"></span>'),e.put("views/properties/signal-property-write-template.html",'<div ng-controller="FlowableSignalRefCtrl"><select ng-model="property.value" ng-change="signalChanged()" ng-options="signalDefinition.id as (signalDefinition.name + \' (\' + signalDefinition.id + \')\') for signalDefinition in signalDefinitions"></select></div>'),e.put("views/properties/string-property-write-mode-template.html",'<div ng-controller="FlowableStringPropertyCtrl"><input type="text" ng-model="property.value" class="form-control" auto-focus="" select-text="property.value" ng-blur="inputBlurred()" ng-keypress="enterPressed($event)"></div>'),e.put("views/properties/subprocess-reference-display-template.html",'<span ng-if="property.value.name">{{property.value.name}}</span> <span ng-if="!property.value || !property.value.name" translate="">PROPERTY.SUBPROCESSREFERENCE.EMPTY</span>'),e.put("views/properties/subprocess-reference-popup.html",'<div class="modal" ng-controller="FlowableCollapsedSubprocessReferencePopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>{{\'PROPERTY.SUBPROCESSREFERENCE.TITLE\' | translate}} <span ng-show="selectedSubProcess != null">- {{selectedSubProcess.name}}</span> <span ng-show="selectedSubProcess == null">- {{\'PROPERTY.SUBPROCESSREFERENCE.EMPTY\' | translate}}</span></h2></div><div class="modal-body-with-overflow"><div class="detail-group clearfix"><div class="col-xs-12"><div class="alert alert-error" ng-show="(!state.loadingFolders && !state.loadingSubprocesses) && state.subprocessError" translate="">PROPERTY.SUBPROCESSREFERENCE.ERROR.SUBPROCESS</div></div></div><div class="detail-group clearfix"><div class="col-xs-12 editor-item-picker"><div ng-if="!state.loadingSubprocesses && !state.subprocessError" class="col-xs-4 editor-item-picker-component" ng-repeat="sub in subProcesses" ng-class="{\'selected\' : sub.id == selectedSubProcess.id}" ng-click="selectSubProcess(sub, $event)"><div class="controls"><input type="checkbox" value="option1" ng-click="selectSubProcess(sub, $event)" ng-checked="sub.id == selectedSubProcess.id"></div><h4>{{sub.name}}</h4><img src="{{config.contextRoot}}/app/rest/models/{{sub.id}}/thumbnail"></div><div ng-show="state.loadingSubprocesses"><p class="loading" translate="">PROPERTY.SUBPROCESSREFERENCE.SUBPROCESS.LOADING</p></div><div ng-show="!state.loadingSubprocesses && subProcesses.length == 0"><p translate="">PROPERTY.SUBPROCESSREFERENCE.SUBPROCESS.EMPTY</p></div></div></div></div><div class="modal-footer"><button ng-disabled="state.subprocessError" ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/subprocess-reference-write-template.html",'<span ng-controller="FlowableCollapsedSubprocessReferenceCtrl"></span>'),e.put("views/properties/task-listeners-display-template.html",'<span ng-if="!property.noValue">{{\'PROPERTY.TASKLISTENERS.VALUE\' | translate:property.value.taskListeners}}</span> <span ng-if="property.noValue" translate="">PROPERTY.TASKLISTENERS.EMPTY</span>'),e.put("views/properties/task-listeners-popup.html",'<div class="modal" ng-controller="FlowableTaskListenersPopupCtrl"><div class="modal-dialog modal-wide"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h2>{{\'PROPERTY.PROPERTY.EDIT.TITLE\' | translate}} "{{property.title | translate}}"</h2></div><div class="modal-body"><div class="row row-no-gutter"><div class="col-xs-6"><div ng-if="translationsRetrieved" class="kis-listener-grid" ui-grid="gridOptions" ui-grid-selection=""></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.UP | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveListenerUp()"><i class="glyphicon glyphicon-arrow-up"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.DOWN | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveListenerDown()"><i class="glyphicon glyphicon-arrow-down"></i></a></div><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.ADD | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewListener()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.REMOVE | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="removeListener()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div><div class="col-xs-6"><div ng-show="selectedListener"><div class="form-group"><label for="eventField">{{\'PROPERTY.TASKLISTENERS.EVENT\' | translate}}</label><select id="eventField" class="form-control" ng-model="selectedListener.event"><option>create</option><option>assignment</option><option>complete</option><option>delete</option></select></div><div class="form-group"><label for="classField">{{\'PROPERTY.TASKLISTENERS.CLASS\' | translate}}</label> <input type="text" id="classField" class="form-control" ng-model="selectedListener.className" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.TASKLISTENERS.CLASS.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="expressionField">{{\'PROPERTY.TASKLISTENERS.EXPRESSION\' | translate}}</label> <input type="text" id="expressionField" class="form-control" ng-model="selectedListener.expression" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.TASKLISTENERS.EXPRESSION.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="delegateExpressionField">{{\'PROPERTY.TASKLISTENERS.DELEGATEEXPRESSION\' | translate}}</label> <input type="text" id="delegateExpressionField" class="form-control" ng-model="selectedListener.delegateExpression" ng-change="listenerDetailsChanged()" placeholder="{{\'PROPERTY.TASKLISTENERS.DELEGATEEXPRESSION.PLACEHOLDER\' | translate}}"></div></div><div ng-show="!selectedListener" class="muted no-property-selected" translate="">PROPERTY.TASKLISTENERS.UNSELECTED</div></div></div><div class="row row-no-gutter"><div class="col-xs-6"><div ng-if="translationsRetrieved" class="kis-field-grid" ui-grid="gridFieldOptions" ui-grid-selection=""></div><div class="pull-right"><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.UP | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveFieldUp()"><i class="glyphicon glyphicon-arrow-up"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.MOVE.DOWN | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="moveFieldDown()"><i class="glyphicon glyphicon-arrow-down"></i></a></div><div class="btn-group"><a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.ADD | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="addNewField()"><i class="glyphicon glyphicon-plus"></i></a> <a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.REMOVE | translate}}" data-placement="bottom" data-original-title="" title="" ng-click="removeField()"><i class="glyphicon glyphicon-minus"></i></a></div></div></div><div class="col-xs-6"><div ng-show="selectedField"><div class="form-group"><label for="nameField">{{\'PROPERTY.TASKLISTENERS.FIELDS.NAME\' | translate}}</label> <input type="text" id="nameField" class="form-control" ng-model="selectedField.name" placeholder="{{\'PROPERTY.TASKLISTENERS.FIELDS.NAME.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="stringValueField">{{\'PROPERTY.TASKLISTENERS.FIELDS.STRINGVALUE\' | translate}}</label> <input type="text" id="stringValueField" class="form-control" ng-model="selectedField.stringValue" ng-change="fieldDetailsChanged()" placeholder="{{\'PROPERTY.TASKLISTENERS.FIELDS.STRINGVALUE.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="expressionField">{{\'PROPERTY.TASKLISTENERS.FIELDS.EXPRESSION\' | translate}}</label> <input type="text" id="expressionField" class="form-control" ng-model="selectedField.expression" ng-change="fieldDetailsChanged()" placeholder="{{\'PROPERTY.TASKLISTENERS.FIELDS.EXPRESSION.PLACEHOLDER\' | translate}}"></div><div class="form-group"><label for="stringField">{{\'PROPERTY.TASKLISTENERS.FIELDS.STRING\' | translate}}</label> <textarea id="stringField" class="form-control" ng-model="selectedField.string" ng-change="fieldDetailsChanged()" placeholder="{{\'PROPERTY.TASKLISTENERS.FIELDS.STRING.PLACEHOLDER\' | translate}}"></textarea></div></div><div ng-show="!selectedField" class="muted no-property-selected" translate="">PROPERTY.TASKLISTENERS.FIELDS.EMPTY</div></div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary" translate="">ACTION.CANCEL</button> <button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/task-listeners-write-template.html",'<span ng-controller="FlowableTaskListenersCtrl"></span>'),e.put("views/properties/text-popup.html",'<div class="modal" ng-controller="FlowableTextPropertyPopupCtrl"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h3>{{\'PROPERTY.PROPERTY.EDIT.TITLE\' | translate}} "{{property.title | translate}}"</h3></div><div class="modal-body"><p><textarea auto-focus="" class="form-control" ng-model="property.value" style="width:70%; height:100%; max-width: 100%; max-height: 100%; min-height: 200px"></textarea></p></div><div class="modal-footer"><button ng-click="save()" class="btn btn-primary" translate="">ACTION.SAVE</button></div></div></div></div>'),e.put("views/properties/text-property-write-template.html",'<span ng-controller="FlowableTextPropertyCtrl"></span>')}]);